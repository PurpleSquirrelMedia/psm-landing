"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9079],{63753:function(e,t,r){let n;r.d(t,{A:function(){return rc},B:function(){return iI},C:function(){return nq},D:function(){return tL},E:function(){return tt},F:function(){return st},G:function(){return oA},H:function(){return cY},I:function(){return cG},K:function(){return nF},L:function(){return et},M:function(){return tR},P:function(){return tm},S:function(){return re},T:function(){return tz},V:function(){return tD},_:function(){return iS},a:function(){return nX},aA:function(){return n8},aB:function(){return tK},aC:function(){return B},aD:function(){return c6},aE:function(){return oI},aF:function(){return oE},aG:function(){return cJ},aH:function(){return c0},aI:function(){return ow},aJ:function(){return cQ},aK:function(){return c5},aL:function(){return cX},aM:function(){return cZ},aN:function(){return oS},aO:function(){return c3},aP:function(){return c8},aQ:function(){return c2},aR:function(){return sp},aS:function(){return c1},aT:function(){return sh},aU:function(){return om},aV:function(){return oy},ab:function(){return sE},ac:function(){return C},ad:function(){return _},ae:function(){return u},af:function(){return P},ag:function(){return ob},ah:function(){return su},ai:function(){return tC},aj:function(){return k},ak:function(){return ib},al:function(){return li},am:function(){return e8},an:function(){return lt},ao:function(){return tw},ap:function(){return tZ},aq:function(){return cH},ar:function(){return og},as:function(){return sc},at:function(){return iT},au:function(){return iM},av:function(){return c7},aw:function(){return le},ay:function(){return ik},az:function(){return j},b:function(){return tW},c:function(){return o},d:function(){return tF},e:function(){return cM},f:function(){return sm},g:function(){return a},h:function(){return sg},i:function(){return sl},j:function(){return lr},k:function(){return c4},l:function(){return ln},m:function(){return o_},o:function(){return sf},p:function(){return i_},t:function(){return ix},w:function(){return A},x:function(){return tN},z:function(){return iv}});var i=r(73109),o="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function a(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}let c=BigInt(0),l=BigInt(1),h=BigInt(2),d=BigInt(8),f=BigInt(1),p=BigInt(2);BigInt(3);let g=BigInt(5),m=BigInt(8),y=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),b={p:y,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:m,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")},w=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),v=(0,i.bg)(b.p,{isLE:!0}),k=function(e){let{CURVE:t,curveOpts:r,hash:n,eddsaOpts:o}=function(e){let t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:(0,i.bg)(t.n,e.nBitLength,!0),uvRatio:e.uvRatio},n={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:r,hash:e.hash,eddsaOpts:n}}(e);return function(e,t){let r=t.Point;return Object.assign({},t,{ExtendedPoint:r,CURVE:e,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}(e,function(e,t,r={}){if("function"!=typeof t)throw Error('"hash" function param is required');(0,i.bi)(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:o,Fp:a,Fn:u}=e,c=r.randomBytes||i.bk,h=r.adjustScalarBytes||(e=>e),d=r.domain||((e,t,r)=>{if((0,i.bl)(r,"phflag"),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function f(e){return u.create((0,i.bo)(e))}function p(e){let{head:r,prefix:n,scalar:a}=function(e){let r=w.secretKey;e=(0,i.bq)("private key",e,r);let n=(0,i.bq)("hashed private key",t(e),2*r),o=h(n.slice(0,r)),a=n.slice(r,2*r),u=f(o);return{head:o,prefix:a,scalar:u}}(e),u=o.multiply(a),c=u.toBytes();return{head:r,prefix:n,scalar:a,point:u,pointBytes:c}}function g(e){return p(e).pointBytes}function m(e=Uint8Array.of(),...r){return f(t(d((0,i.bw)(...r),(0,i.bq)("context",e),!!n)))}let y={zip215:!0},b=a.BYTES,w={secretKey:b,publicKey:b,signature:2*b,seed:b};function v(e=c(w.seed)){return(0,i.bn)(e,w.seed,"seed")}let k={getExtendedPublicKey:p,randomSecretKey:v,isValidSecretKey:function(e){return(0,i.bv)(e)&&e.length===u.BYTES},isValidPublicKey:function(t,r){try{return!!e.fromBytes(t,r)}catch{return!1}},toMontgomery(t){let{y:r}=e.fromBytes(t),n=w.publicKey,i=32===n;if(!i&&57!==n)throw Error("only defined for 25519 and 448");let o=i?a.div(l+r,l-r):a.div(r-l,r+l);return a.toBytes(o)},toMontgomerySecret(e){let r=w.secretKey;return(0,i.bn)(e,r),h(t(e.subarray(0,r))).subarray(0,r)},randomPrivateKey:v,precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};return Object.freeze({keygen:function(e){let t=k.randomSecretKey(e);return{secretKey:t,publicKey:g(t)}},getPublicKey:g,sign:function(e,t,r={}){e=(0,i.bq)("message",e),n&&(e=n(e));let{prefix:a,scalar:c,pointBytes:l}=p(t),h=m(r.context,a,e),d=o.multiply(h).toBytes(),f=m(r.context,d,l,e),g=u.create(h+f*c);if(!u.isValid(g))throw Error("sign failed: invalid s");let y=(0,i.bw)(d,u.toBytes(g));return(0,i.bn)(y,w.signature,"result")},verify:function(t,r,a,u=y){let c,l,h;let{context:d,zip215:f}=u,p=w.signature;t=(0,i.bq)("signature",t,p),r=(0,i.bq)("message",r),a=(0,i.bq)("publicKey",a,w.publicKey),void 0!==f&&(0,i.bl)(f,"zip215"),n&&(r=n(r));let g=p/2,b=t.subarray(0,g),v=(0,i.bo)(t.subarray(g,p));try{c=e.fromBytes(a,f),l=e.fromBytes(b,f),h=o.multiplyUnsafe(v)}catch{return!1}if(!f&&c.isSmallOrder())return!1;let k=m(d,l.toBytes(),c.toBytes(),r);return l.add(c.multiplyUnsafe(k)).subtract(h).clearCofactor().is0()},utils:k,Point:e,lengths:w})}(function(e,t={}){let r=(0,i.bh)("edwards",e,t,t.FpFnLE),{Fp:n,Fn:o}=r,a=r.CURVE,{h:u}=a;(0,i.bi)(t,{},{uvRatio:"function"});let f=h<<BigInt(8*o.BYTES)-l,p=e=>n.create(e),g=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(n.div(e,t))}}catch{return{isValid:!1,value:c}}});if(!function(e,t,r,n){let i=e.sqr(r),o=e.sqr(n),a=e.add(e.mul(t.a,i),o),u=e.add(e.ONE,e.mul(t.d,e.mul(i,o)));return e.eql(a,u)}(n,a,a.Gx,a.Gy))throw Error("bad curve params: generator point");function m(e,t,r=!1){let n=r?l:c;return(0,i.bp)("coordinate "+e,t,n,f),t}function y(e){if(!(e instanceof v))throw Error("ExtendedPoint expected")}let b=(0,i.br)((e,t)=>{let{X:r,Y:i,Z:o}=e,a=e.is0();null==t&&(t=a?d:n.inv(o));let u=p(r*t),h=p(i*t),f=n.mul(o,t);if(a)return{x:c,y:l};if(f!==l)throw Error("invZ was invalid");return{x:u,y:h}}),w=(0,i.br)(e=>{let{a:t,d:r}=a;if(e.is0())throw Error("bad point: ZERO");let{X:n,Y:i,Z:o,T:u}=e,c=p(n*n),l=p(i*i),h=p(o*o),d=p(h*h),f=p(c*t);if(p(h*p(f+l))!==p(d+p(r*p(c*l))))throw Error("bad point: equation left != right (1)");if(p(n*i)!==p(o*u))throw Error("bad point: equation left != right (2)");return!0});class v{constructor(e,t,r,n){this.X=m("x",e),this.Y=m("y",t),this.Z=m("z",r,!0),this.T=m("t",n),Object.freeze(this)}static CURVE(){return a}static fromAffine(e){if(e instanceof v)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return m("x",t),m("y",r),new v(t,r,l,p(t*r))}static fromBytes(e,t=!1){let r=n.BYTES,{a:o,d:u}=a;e=(0,i.bm)((0,i.bn)(e,r,"point")),(0,i.bl)(t,"zip215");let h=(0,i.bm)(e),d=e[r-1];h[r-1]=-129&d;let m=(0,i.bo)(h),y=t?f:n.ORDER;(0,i.bp)("point.y",m,c,y);let b=p(m*m),{isValid:w,value:k}=g(p(b-l),p(u*b-o));if(!w)throw Error("bad point: invalid y coordinate");let S=(k&l)===l,I=(128&d)!=0;if(!t&&k===c&&I)throw Error("bad point: x=0 and x_0=1");return I!==S&&(k=p(-k)),v.fromAffine({x:k,y:m})}static fromHex(e,t=!1){return v.fromBytes((0,i.bq)("point",e),t)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(e=8,t=!0){return k.createCache(this,e),t||this.multiply(h),this}assertValidity(){w(this)}equals(e){y(e);let{X:t,Y:r,Z:n}=this,{X:i,Y:o,Z:a}=e,u=p(t*a),c=p(i*n),l=p(r*a),h=p(o*n);return u===c&&l===h}is0(){return this.equals(v.ZERO)}negate(){return new v(p(-this.X),this.Y,this.Z,p(-this.T))}double(){let{a:e}=a,{X:t,Y:r,Z:n}=this,i=p(t*t),o=p(r*r),u=p(h*p(n*n)),c=p(e*i),l=t+r,d=p(p(l*l)-i-o),f=c+o,g=f-u,m=c-o,y=p(d*g),b=p(f*m),w=p(d*m);return new v(y,b,p(g*f),w)}add(e){y(e);let{a:t,d:r}=a,{X:n,Y:i,Z:o,T:u}=this,{X:c,Y:l,Z:h,T:d}=e,f=p(n*c),g=p(i*l),m=p(u*r*d),b=p(o*h),w=p((n+i)*(c+l)-f-g),k=b-m,S=b+m,I=p(g-t*f),E=p(w*k),A=p(S*I),_=p(w*I);return new v(E,A,p(k*S),_)}subtract(e){return this.add(e.negate())}multiply(e){if(!o.isValidNot0(e))throw Error("invalid scalar: expected 1 <= sc < curve.n");let{p:t,f:r}=k.cached(this,e,e=>(0,i.bs)(v,e));return(0,i.bs)(v,[t,r])[0]}multiplyUnsafe(e,t=v.ZERO){if(!o.isValid(e))throw Error("invalid scalar: expected 0 <= sc < curve.n");return e===c?v.ZERO:this.is0()||e===l?this:k.unsafe(this,e,e=>(0,i.bs)(v,e),t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return k.unsafe(this,a.n).is0()}toAffine(e){return b(this,e)}clearCofactor(){return u===l?this:this.multiplyUnsafe(u)}toBytes(){let{x:e,y:t}=this.toAffine(),r=n.toBytes(t);return r[r.length-1]|=e&l?128:0,r}toHex(){return(0,i.bt)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(e){return(0,i.bs)(v,e)}static msm(e,t){return(0,i.bu)(v,o,e,t)}_setWindowSize(e){this.precompute(e)}toRawBytes(){return this.toBytes()}}v.BASE=new v(a.Gx,a.Gy,l,p(a.Gx*a.Gy)),v.ZERO=new v(c,l,l,c),v.Fp=n,v.Fn=o;let k=new i.bj(v,o.BITS);return v.BASE.precompute(8),v}(t,r),n,o))}({...b,Fp:v,hash:i.bx,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){let r=(0,i.by)(t*t*t,y),n=function(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),a=e*e%y*e%y,u=(0,i.bz)(a,p,y)*a%y,c=(0,i.bz)(u,f,y)*e%y,l=(0,i.bz)(c,g,y)*c%y,h=(0,i.bz)(l,t,y)*l%y,d=(0,i.bz)(h,r,y)*h%y,m=(0,i.bz)(d,n,y)*d%y,b=(0,i.bz)(m,o,y)*m%y,w=(0,i.bz)(b,o,y)*m%y,v=(0,i.bz)(w,t,y)*l%y;return{pow_p_5_8:(0,i.bz)(v,p,y)*e%y,b2:a}}(e*(0,i.by)(r*r*t,y)).pow_p_5_8,o=(0,i.by)(e*r*n,y),a=(0,i.by)(t*o*o,y),u=o,c=(0,i.by)(o*w,y),l=a===e,h=a===(0,i.by)(-e,y),d=a===(0,i.by)(-e*w,y);return l&&(o=u),(h||d)&&(o=c),(0,i.bA)(o,y)&&(o=(0,i.by)(-o,y)),{isValid:l||h,value:o}}});var S,I={exports:{}},E={};function A(){return S||(S=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},r={};r.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},r.toByteArray=function(e){var t,r,n=l(e),a=n[0],u=n[1],c=new o((a+u)*3/4-u),h=0,d=u>0?a-4:a;for(r=0;r<d;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],c[h++]=t>>16&255,c[h++]=t>>8&255,c[h++]=255&t;return 2===u&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,c[h++]=255&t),1===u&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,c[h++]=t>>8&255,c[h++]=255&t),c},r.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,u=r-i;a<u;a+=16383)o.push(function(e,t,r){for(var i,o=[],a=t;a<r;a+=3)o.push(n[(i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}(e,a,a+16383>u?u:a+16383));return 1===i?o.push(n[(t=e[r-1])>>2]+n[t<<4&63]+"=="):2===i&&o.push(n[(t=(e[r-2]<<8)+e[r-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),o.join("")};for(var n=[],i=[],o="u">typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=a.length;u<c;++u)n[u]=a[u],i[a.charCodeAt(u)]=u;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}i[45]=62,i[95]=63;var h={};h.read=function(e,t,r,n,i){var o,a,u=8*i-n-1,c=(1<<u)-1,l=c>>1,h=-7,d=r?i-1:0,f=r?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-h)-1,p>>=-h,h+=u;h>0;o=256*o+e[t+d],d+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+e[t+d],d+=f,h-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},h.write=function(e,t,r,n,i,o){var a,u,c,l=8*o-i-1,h=(1<<l)-1,d=h>>1,f=23===i?5960464477539062e-23:0,p=n?0:o-1,g=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(u=isNaN(t)?1:0,a=h):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+d>=1?t+=f/c:t+=f*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=h?(u=0,a=h):a+d>=1?(u=(t*c-1)*Math.pow(2,i),a+=d):(u=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&u,p+=g,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[r+p]=255&a,p+=g,a/=256,l-=8);e[r+p-g]|=128*m},function(e){let t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=2147483647;let{Uint8Array:n,ArrayBuffer:i,SharedArrayBuffer:o}=globalThis;function a(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new n(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!u.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|m(e,t),n=a(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(i.isView(e))return function(e){if(L(e,n)){let t=new n(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,i)||e&&L(e.buffer,i)||"u">typeof o&&(L(e,o)||e&&L(e.buffer,o)))return p(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return u.from(c,t,r);let l=function(e){var t;if(u.isBuffer(e)){let t=0|g(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?a(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(l)return l;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),a(e<0?0:0|g(e))}function f(e){let t=e.length<0?0:0|g(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new n(e):void 0===r?new n(e,t):new n(e,t,r),u.prototype),i}function g(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if(i.isView(e)||L(e,i))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(o)return n?-1:$(e).length;t=(""+t).toLowerCase(),o=!0}}function y(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=N[e[n]];return i}(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,n);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,n);case"base64":var o,a;return o=t,a=n,0===o&&a===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,n);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function b(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,i,o){var a;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(a=r=+r)!=a&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return -1;r=e.length-1}else if(r<0){if(!o)return -1;r=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,o);if("number"==typeof t)return t&=255,"function"==typeof n.prototype.indexOf?o?n.prototype.indexOf.call(e,t,r):n.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,i,o);throw TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let o,a=1,u=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,u/=2,c/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<u;o++)if(l(e,o)===l(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*a}else -1!==n&&(o-=o-n),n=-1}else for(r+c>u&&(r=u-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(l(e,o+n)!==l(t,n)){r=!1;break}if(r)return o}return -1}function k(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,u,c;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(c=(31&t)<<6|63&r)>127&&(o=c);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(c=(15&t)<<12|(63&r)<<6|63&n)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:r=e[i+1],n=e[i+2],u=e[i+3],(192&r)==128&&(192&n)==128&&(192&u)==128&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&u)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function S(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function I(e,t,r,n,i,o){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function E(e,t,r,n,i){B(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function A(e,t,r,n,i){B(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function _(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function x(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,t,r,4),h.write(e,t,r,n,23,4),r+4}function M(e,t,r,n,i){return t=+t,r>>>=0,i||_(e,t,r,8),h.write(e,t,r,n,52,8),r+8}u.TYPED_ARRAY_SUPPORT=function(){try{let e=new n(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,n.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!u.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,n.prototype),Object.setPrototypeOf(u,n),u.alloc=function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(L(e,n)&&(e=u.from(e,e.offset,e.byteLength)),L(t,n)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=u.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){let t=e[r];if(L(t,n))o+t.length>i.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(i,o)):n.prototype.set.call(i,t,o);else if(u.isBuffer(t))t.copy(i,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=t.length}return i},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?k(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},t&&(u.prototype[t]=u.prototype.inspect),u.prototype.compare=function(e,t,r,i,o){if(L(e,n)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;let a=o-i,c=r-t,l=Math.min(a,c),h=this.slice(i,o),d=e.slice(t,r);for(let e=0;e<l;++e)if(h[e]!==d[e]){a=h[e],c=d[e];break}return a<c?-1:c<a?1:0},u.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){var i,o,a,u,c,l,h,d;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let p=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(n!=n)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,z($(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return a=t,u=r,z(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,u);case"base64":return c=t,l=r,z(U(e),this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,d=r,z(function(e,t){let r,n;let i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-h),this,h,d);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=D(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),u.prototype.readBigUInt64BE=D(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||S(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=D(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),u.prototype.readBigInt64BE=D(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),h.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),h.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),h.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),h.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;I(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=D(function(e,t=0){return E(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=D(function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);I(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=D(function(e,t=0){return E(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=D(function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(e,t,r){return x(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return x(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(!u.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let o=i-r;return this===e&&"function"==typeof n.prototype.copyWithin?this.copyWithin(t,r,i):n.prototype.set.call(e,this.subarray(r,i),t),o},u.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=u.isBuffer(e)?e:u.from(e,n),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};let T={};function O(e,t,r){T[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function P(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function B(e,t,r,n,i,o){if(e>r||e<t){let r;let n="bigint"==typeof t?"n":"";throw r=0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`,new T.ERR_OUT_OF_RANGE("value",r,e)}C(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&R(i,n.length-(o+1))}function C(e,t){if("number"!=typeof e)throw new T.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){throw Math.floor(e)!==e?(C(e,r),new T.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new T.ERR_BUFFER_OUT_OF_BOUNDS:new T.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}O("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),O("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),O("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=P(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=P(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let j=/[^+/0-9A-Za-z-_]/g;function $(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function U(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let N=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function D(e){return typeof BigInt>"u"?W:e}function W(){throw Error("BigInt not supported")}}(t);let d=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=d,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(E)),E}function _(){return x||(x=1,function(e,t){var r=A(),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}}(I,I.exports)),I.exports}var x,M,T={exports:{}},O=T.exports;function P(){return M||(M=1,function(e,t){function r(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function i(e,t,r){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&(("le"===t||"be"===t)&&(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{h="u">typeof window&&"u">typeof window.Buffer?window.Buffer:A().Buffer}catch{}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=o(e,r);return r-1>=t&&(n|=o(e,r-1)<<4),n}function u(e,t,n,i){for(var o=0,a=0,u=Math.min(e.length,n),c=t;c<u;c++){var l=e.charCodeAt(c)-48;o*=i,a=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&a<i,"Invalid character"),o+=a}return o}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return 0>e.cmp(t)?e:t},i.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},i.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},i.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,u=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<u&67108863,this.words[o+1]=a>>>26-u&67108863,(u+=24)>=26&&(u-=26,o++);return this._strip()},i.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,u=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=a(e,t,n)<<o,this.words[u]|=67108863&i,o>=18?(o-=18,u+=1,this.words[u]|=i>>>26):o+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=a(e,t,n)<<o,this.words[u]|=67108863&i,o>=18?(o-=18,u+=1,this.words[u]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,a=o%n,c=Math.min(o,o-a)+r,l=0,h=r;h<c;h+=n)l=u(e,h,h+n,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var d=1;for(l=u(e,h,e.length,t),h=0;h<a;h++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},i.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){c(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"u">typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch{i.prototype.inspect=l}else i.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,u=67108863&a,c=a/67108864|0;r.words[0]=u;for(var l=1;l<n;l++){for(var h=c>>>26,d=67108863&c,f=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=f;p++){var g=l-p|0;h+=(a=(i=0|e.words[g])*(o=0|t.words[p])+d)/67108864|0,d=67108863&a}r.words[l]=0|d,c=0|h}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}i.prototype.toString=function(e,t){if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var n,i=0,o=0,a=0;a<this.length;a++){var u=this.words[a],c=((u<<i|o)&16777215).toString(16);o=u>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),n=0!==o||a!==this.length-1?d[6-c.length]+c+n:c+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var l=f[e],h=p[e];n="";var g=this.clone();for(g.negative=0;!g.isZero();){var m=g.modrn(h).toString(e);n=(g=g.idivn(h)).isZero()?m+n:d[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},h&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(h,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=e.allocUnsafe?e.allocUnsafe(o):new e(o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},i.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r++]=255&a,r<e.length&&(e[r++]=a>>8&255),r<e.length&&(e[r++]=a>>16&255),6===o?(r<e.length&&(e[r++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|n;e[r--]=255&a,r>=0&&(e[r--]=a>>8&255),r>=0&&(e[r--]=a>>16&255),6===o?(r>=0&&(e[r--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return(8191&t)==0&&(r+=13,t>>>=13),(127&t)==0&&(r+=7,t>>>=7),(15&t)==0&&(r+=4,t>>>=4),(3&t)==0&&(r+=2,t>>>=2),(1&t)==0&&r++,r},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return(this.length-1)*26+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r((this.negative|e.negative)==0),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r((this.negative|e.negative)==0),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r((this.negative|e.negative)==0),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),t?this.words[n]=this.words[n]|1<<i:this.words[n]=this.words[n]&~(1<<i),this._strip()},i.prototype.iadd=function(e){if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var t,r,n,i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t,r,n=this.iadd(e);return e.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(t=this,r=e):(t=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(n=(0|t.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&n;for(;0!==o&&a<t.length;a++)o=(n=(0|t.words[a])+o)>>26,this.words[a]=67108863&n;if(0===o&&a<t.length&&t!==this)for(;a<t.length;a++)this.words[a]=t.words[a];return this.length=Math.max(this.length,a),t!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,o,a=e.words,u=t.words,c=r.words,l=0,h=0|a[0],d=8191&h,f=h>>>13,p=0|a[1],g=8191&p,m=p>>>13,y=0|a[2],b=8191&y,w=y>>>13,v=0|a[3],k=8191&v,S=v>>>13,I=0|a[4],E=8191&I,A=I>>>13,_=0|a[5],x=8191&_,M=_>>>13,T=0|a[6],O=8191&T,P=T>>>13,B=0|a[7],C=8191&B,R=B>>>13,j=0|a[8],$=8191&j,U=j>>>13,z=0|a[9],L=8191&z,N=z>>>13,D=0|u[0],W=8191&D,V=D>>>13,K=0|u[1],q=8191&K,F=K>>>13,H=0|u[2],G=8191&H,J=H>>>13,Y=0|u[3],Z=8191&Y,X=Y>>>13,Q=0|u[4],ee=8191&Q,et=Q>>>13,er=0|u[5],en=8191&er,ei=er>>>13,es=0|u[6],eo=8191&es,ea=es>>>13,eu=0|u[7],ec=8191&eu,el=eu>>>13,eh=0|u[8],ed=8191&eh,ef=eh>>>13,ep=0|u[9],eg=8191&ep,em=ep>>>13;r.negative=e.negative^t.negative,r.length=19,n=Math.imul(d,W),i=(i=Math.imul(d,V))+Math.imul(f,W)|0,o=Math.imul(f,V);var ey=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ey>>>26)|0,ey&=67108863,n=Math.imul(g,W),i=(i=Math.imul(g,V))+Math.imul(m,W)|0,o=Math.imul(m,V),n=n+Math.imul(d,q)|0,i=(i=i+Math.imul(d,F)|0)+Math.imul(f,q)|0,o=o+Math.imul(f,F)|0;var eb=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eb>>>26)|0,eb&=67108863,n=Math.imul(b,W),i=(i=Math.imul(b,V))+Math.imul(w,W)|0,o=Math.imul(w,V),n=n+Math.imul(g,q)|0,i=(i=i+Math.imul(g,F)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,F)|0,n=n+Math.imul(d,G)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(f,G)|0,o=o+Math.imul(f,J)|0;var ew=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ew>>>26)|0,ew&=67108863,n=Math.imul(k,W),i=(i=Math.imul(k,V))+Math.imul(S,W)|0,o=Math.imul(S,V),n=n+Math.imul(b,q)|0,i=(i=i+Math.imul(b,F)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,F)|0,n=n+Math.imul(g,G)|0,i=(i=i+Math.imul(g,J)|0)+Math.imul(m,G)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(d,Z)|0,i=(i=i+Math.imul(d,X)|0)+Math.imul(f,Z)|0,o=o+Math.imul(f,X)|0;var ev=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ev>>>26)|0,ev&=67108863,n=Math.imul(E,W),i=(i=Math.imul(E,V))+Math.imul(A,W)|0,o=Math.imul(A,V),n=n+Math.imul(k,q)|0,i=(i=i+Math.imul(k,F)|0)+Math.imul(S,q)|0,o=o+Math.imul(S,F)|0,n=n+Math.imul(b,G)|0,i=(i=i+Math.imul(b,J)|0)+Math.imul(w,G)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,X)|0)+Math.imul(m,Z)|0,o=o+Math.imul(m,X)|0,n=n+Math.imul(d,ee)|0,i=(i=i+Math.imul(d,et)|0)+Math.imul(f,ee)|0,o=o+Math.imul(f,et)|0;var ek=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ek>>>26)|0,ek&=67108863,n=Math.imul(x,W),i=(i=Math.imul(x,V))+Math.imul(M,W)|0,o=Math.imul(M,V),n=n+Math.imul(E,q)|0,i=(i=i+Math.imul(E,F)|0)+Math.imul(A,q)|0,o=o+Math.imul(A,F)|0,n=n+Math.imul(k,G)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(S,G)|0,o=o+Math.imul(S,J)|0,n=n+Math.imul(b,Z)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(w,Z)|0,o=o+Math.imul(w,X)|0,n=n+Math.imul(g,ee)|0,i=(i=i+Math.imul(g,et)|0)+Math.imul(m,ee)|0,o=o+Math.imul(m,et)|0,n=n+Math.imul(d,en)|0,i=(i=i+Math.imul(d,ei)|0)+Math.imul(f,en)|0,o=o+Math.imul(f,ei)|0;var eS=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eS>>>26)|0,eS&=67108863,n=Math.imul(O,W),i=(i=Math.imul(O,V))+Math.imul(P,W)|0,o=Math.imul(P,V),n=n+Math.imul(x,q)|0,i=(i=i+Math.imul(x,F)|0)+Math.imul(M,q)|0,o=o+Math.imul(M,F)|0,n=n+Math.imul(E,G)|0,i=(i=i+Math.imul(E,J)|0)+Math.imul(A,G)|0,o=o+Math.imul(A,J)|0,n=n+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,X)|0,n=n+Math.imul(b,ee)|0,i=(i=i+Math.imul(b,et)|0)+Math.imul(w,ee)|0,o=o+Math.imul(w,et)|0,n=n+Math.imul(g,en)|0,i=(i=i+Math.imul(g,ei)|0)+Math.imul(m,en)|0,o=o+Math.imul(m,ei)|0,n=n+Math.imul(d,eo)|0,i=(i=i+Math.imul(d,ea)|0)+Math.imul(f,eo)|0,o=o+Math.imul(f,ea)|0;var eI=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eI>>>26)|0,eI&=67108863,n=Math.imul(C,W),i=(i=Math.imul(C,V))+Math.imul(R,W)|0,o=Math.imul(R,V),n=n+Math.imul(O,q)|0,i=(i=i+Math.imul(O,F)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,F)|0,n=n+Math.imul(x,G)|0,i=(i=i+Math.imul(x,J)|0)+Math.imul(M,G)|0,o=o+Math.imul(M,J)|0,n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,X)|0,n=n+Math.imul(k,ee)|0,i=(i=i+Math.imul(k,et)|0)+Math.imul(S,ee)|0,o=o+Math.imul(S,et)|0,n=n+Math.imul(b,en)|0,i=(i=i+Math.imul(b,ei)|0)+Math.imul(w,en)|0,o=o+Math.imul(w,ei)|0,n=n+Math.imul(g,eo)|0,i=(i=i+Math.imul(g,ea)|0)+Math.imul(m,eo)|0,o=o+Math.imul(m,ea)|0,n=n+Math.imul(d,ec)|0,i=(i=i+Math.imul(d,el)|0)+Math.imul(f,ec)|0,o=o+Math.imul(f,el)|0;var eE=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eE>>>26)|0,eE&=67108863,n=Math.imul($,W),i=(i=Math.imul($,V))+Math.imul(U,W)|0,o=Math.imul(U,V),n=n+Math.imul(C,q)|0,i=(i=i+Math.imul(C,F)|0)+Math.imul(R,q)|0,o=o+Math.imul(R,F)|0,n=n+Math.imul(O,G)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(P,G)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,X)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,X)|0,n=n+Math.imul(E,ee)|0,i=(i=i+Math.imul(E,et)|0)+Math.imul(A,ee)|0,o=o+Math.imul(A,et)|0,n=n+Math.imul(k,en)|0,i=(i=i+Math.imul(k,ei)|0)+Math.imul(S,en)|0,o=o+Math.imul(S,ei)|0,n=n+Math.imul(b,eo)|0,i=(i=i+Math.imul(b,ea)|0)+Math.imul(w,eo)|0,o=o+Math.imul(w,ea)|0,n=n+Math.imul(g,ec)|0,i=(i=i+Math.imul(g,el)|0)+Math.imul(m,ec)|0,o=o+Math.imul(m,el)|0,n=n+Math.imul(d,ed)|0,i=(i=i+Math.imul(d,ef)|0)+Math.imul(f,ed)|0,o=o+Math.imul(f,ef)|0;var eA=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eA>>>26)|0,eA&=67108863,n=Math.imul(L,W),i=(i=Math.imul(L,V))+Math.imul(N,W)|0,o=Math.imul(N,V),n=n+Math.imul($,q)|0,i=(i=i+Math.imul($,F)|0)+Math.imul(U,q)|0,o=o+Math.imul(U,F)|0,n=n+Math.imul(C,G)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(R,G)|0,o=o+Math.imul(R,J)|0,n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,X)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,X)|0,n=n+Math.imul(x,ee)|0,i=(i=i+Math.imul(x,et)|0)+Math.imul(M,ee)|0,o=o+Math.imul(M,et)|0,n=n+Math.imul(E,en)|0,i=(i=i+Math.imul(E,ei)|0)+Math.imul(A,en)|0,o=o+Math.imul(A,ei)|0,n=n+Math.imul(k,eo)|0,i=(i=i+Math.imul(k,ea)|0)+Math.imul(S,eo)|0,o=o+Math.imul(S,ea)|0,n=n+Math.imul(b,ec)|0,i=(i=i+Math.imul(b,el)|0)+Math.imul(w,ec)|0,o=o+Math.imul(w,el)|0,n=n+Math.imul(g,ed)|0,i=(i=i+Math.imul(g,ef)|0)+Math.imul(m,ed)|0,o=o+Math.imul(m,ef)|0,n=n+Math.imul(d,eg)|0,i=(i=i+Math.imul(d,em)|0)+Math.imul(f,eg)|0,o=o+Math.imul(f,em)|0;var e_=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(e_>>>26)|0,e_&=67108863,n=Math.imul(L,q),i=(i=Math.imul(L,F))+Math.imul(N,q)|0,o=Math.imul(N,F),n=n+Math.imul($,G)|0,i=(i=i+Math.imul($,J)|0)+Math.imul(U,G)|0,o=o+Math.imul(U,J)|0,n=n+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,X)|0,n=n+Math.imul(O,ee)|0,i=(i=i+Math.imul(O,et)|0)+Math.imul(P,ee)|0,o=o+Math.imul(P,et)|0,n=n+Math.imul(x,en)|0,i=(i=i+Math.imul(x,ei)|0)+Math.imul(M,en)|0,o=o+Math.imul(M,ei)|0,n=n+Math.imul(E,eo)|0,i=(i=i+Math.imul(E,ea)|0)+Math.imul(A,eo)|0,o=o+Math.imul(A,ea)|0,n=n+Math.imul(k,ec)|0,i=(i=i+Math.imul(k,el)|0)+Math.imul(S,ec)|0,o=o+Math.imul(S,el)|0,n=n+Math.imul(b,ed)|0,i=(i=i+Math.imul(b,ef)|0)+Math.imul(w,ed)|0,o=o+Math.imul(w,ef)|0,n=n+Math.imul(g,eg)|0,i=(i=i+Math.imul(g,em)|0)+Math.imul(m,eg)|0,o=o+Math.imul(m,em)|0;var ex=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(ex>>>26)|0,ex&=67108863,n=Math.imul(L,G),i=(i=Math.imul(L,J))+Math.imul(N,G)|0,o=Math.imul(N,J),n=n+Math.imul($,Z)|0,i=(i=i+Math.imul($,X)|0)+Math.imul(U,Z)|0,o=o+Math.imul(U,X)|0,n=n+Math.imul(C,ee)|0,i=(i=i+Math.imul(C,et)|0)+Math.imul(R,ee)|0,o=o+Math.imul(R,et)|0,n=n+Math.imul(O,en)|0,i=(i=i+Math.imul(O,ei)|0)+Math.imul(P,en)|0,o=o+Math.imul(P,ei)|0,n=n+Math.imul(x,eo)|0,i=(i=i+Math.imul(x,ea)|0)+Math.imul(M,eo)|0,o=o+Math.imul(M,ea)|0,n=n+Math.imul(E,ec)|0,i=(i=i+Math.imul(E,el)|0)+Math.imul(A,ec)|0,o=o+Math.imul(A,el)|0,n=n+Math.imul(k,ed)|0,i=(i=i+Math.imul(k,ef)|0)+Math.imul(S,ed)|0,o=o+Math.imul(S,ef)|0,n=n+Math.imul(b,eg)|0,i=(i=i+Math.imul(b,em)|0)+Math.imul(w,eg)|0,o=o+Math.imul(w,em)|0;var eM=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eM>>>26)|0,eM&=67108863,n=Math.imul(L,Z),i=(i=Math.imul(L,X))+Math.imul(N,Z)|0,o=Math.imul(N,X),n=n+Math.imul($,ee)|0,i=(i=i+Math.imul($,et)|0)+Math.imul(U,ee)|0,o=o+Math.imul(U,et)|0,n=n+Math.imul(C,en)|0,i=(i=i+Math.imul(C,ei)|0)+Math.imul(R,en)|0,o=o+Math.imul(R,ei)|0,n=n+Math.imul(O,eo)|0,i=(i=i+Math.imul(O,ea)|0)+Math.imul(P,eo)|0,o=o+Math.imul(P,ea)|0,n=n+Math.imul(x,ec)|0,i=(i=i+Math.imul(x,el)|0)+Math.imul(M,ec)|0,o=o+Math.imul(M,el)|0,n=n+Math.imul(E,ed)|0,i=(i=i+Math.imul(E,ef)|0)+Math.imul(A,ed)|0,o=o+Math.imul(A,ef)|0,n=n+Math.imul(k,eg)|0,i=(i=i+Math.imul(k,em)|0)+Math.imul(S,eg)|0,o=o+Math.imul(S,em)|0;var eT=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eT>>>26)|0,eT&=67108863,n=Math.imul(L,ee),i=(i=Math.imul(L,et))+Math.imul(N,ee)|0,o=Math.imul(N,et),n=n+Math.imul($,en)|0,i=(i=i+Math.imul($,ei)|0)+Math.imul(U,en)|0,o=o+Math.imul(U,ei)|0,n=n+Math.imul(C,eo)|0,i=(i=i+Math.imul(C,ea)|0)+Math.imul(R,eo)|0,o=o+Math.imul(R,ea)|0,n=n+Math.imul(O,ec)|0,i=(i=i+Math.imul(O,el)|0)+Math.imul(P,ec)|0,o=o+Math.imul(P,el)|0,n=n+Math.imul(x,ed)|0,i=(i=i+Math.imul(x,ef)|0)+Math.imul(M,ed)|0,o=o+Math.imul(M,ef)|0,n=n+Math.imul(E,eg)|0,i=(i=i+Math.imul(E,em)|0)+Math.imul(A,eg)|0,o=o+Math.imul(A,em)|0;var eO=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eO>>>26)|0,eO&=67108863,n=Math.imul(L,en),i=(i=Math.imul(L,ei))+Math.imul(N,en)|0,o=Math.imul(N,ei),n=n+Math.imul($,eo)|0,i=(i=i+Math.imul($,ea)|0)+Math.imul(U,eo)|0,o=o+Math.imul(U,ea)|0,n=n+Math.imul(C,ec)|0,i=(i=i+Math.imul(C,el)|0)+Math.imul(R,ec)|0,o=o+Math.imul(R,el)|0,n=n+Math.imul(O,ed)|0,i=(i=i+Math.imul(O,ef)|0)+Math.imul(P,ed)|0,o=o+Math.imul(P,ef)|0,n=n+Math.imul(x,eg)|0,i=(i=i+Math.imul(x,em)|0)+Math.imul(M,eg)|0,o=o+Math.imul(M,em)|0;var eP=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eP>>>26)|0,eP&=67108863,n=Math.imul(L,eo),i=(i=Math.imul(L,ea))+Math.imul(N,eo)|0,o=Math.imul(N,ea),n=n+Math.imul($,ec)|0,i=(i=i+Math.imul($,el)|0)+Math.imul(U,ec)|0,o=o+Math.imul(U,el)|0,n=n+Math.imul(C,ed)|0,i=(i=i+Math.imul(C,ef)|0)+Math.imul(R,ed)|0,o=o+Math.imul(R,ef)|0,n=n+Math.imul(O,eg)|0,i=(i=i+Math.imul(O,em)|0)+Math.imul(P,eg)|0,o=o+Math.imul(P,em)|0;var eB=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eB>>>26)|0,eB&=67108863,n=Math.imul(L,ec),i=(i=Math.imul(L,el))+Math.imul(N,ec)|0,o=Math.imul(N,el),n=n+Math.imul($,ed)|0,i=(i=i+Math.imul($,ef)|0)+Math.imul(U,ed)|0,o=o+Math.imul(U,ef)|0,n=n+Math.imul(C,eg)|0,i=(i=i+Math.imul(C,em)|0)+Math.imul(R,eg)|0,o=o+Math.imul(R,em)|0;var eC=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eC>>>26)|0,eC&=67108863,n=Math.imul(L,ed),i=(i=Math.imul(L,ef))+Math.imul(N,ed)|0,o=Math.imul(N,ef),n=n+Math.imul($,eg)|0,i=(i=i+Math.imul($,em)|0)+Math.imul(U,eg)|0,o=o+Math.imul(U,em)|0;var eR=(l+n|0)+((8191&i)<<13)|0;l=(o+(i>>>13)|0)+(eR>>>26)|0,eR&=67108863,n=Math.imul(L,eg),i=(i=Math.imul(L,em))+Math.imul(N,eg)|0,o=Math.imul(N,em);var ej=(l+n|0)+((8191&i)<<13)|0;return l=(o+(i>>>13)|0)+(ej>>>26)|0,ej&=67108863,c[0]=ey,c[1]=eb,c[2]=ew,c[3]=ev,c[4]=ek,c[5]=eS,c[6]=eI,c[7]=eE,c[8]=eA,c[9]=e_,c[10]=ex,c[11]=eM,c[12]=eT,c[13]=eO,c[14]=eP,c[15]=eB,c[16]=eC,c[17]=eR,c[18]=ej,0!==l&&(c[19]=l,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var u=67108863&n,c=Math.min(o,t.length-1),l=Math.max(0,o-e.length+1);l<=c;l++){var h=o-l,d=(0|e.words[h])*(0|t.words[l]),f=67108863&d;a=a+(d/67108864|0)|0,u=67108863&(f=f+u|0),i+=(a=a+(f>>>26)|0)>>>26,a&=67108863}r.words[o]=u,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}Math.imul||(m=g),i.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?g(this,e,t):y(this,e,t)},i.prototype.mul=function(e){var t=new i(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=Array(this.length+e.length),y(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&n);n>>=26,n+=(o/67108864|0)+(a>>>26),this.words[i]=67108863&a}return 0!==n&&(this.words[i]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new i(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var o=r.sqr();n<t.length;n++,o=o.sqr())0!==t[n]&&(r=r.mul(o));return r},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var u=this.words[t]&o,c=(0|this.words[t])-u<<n;this.words[t]=c|a,a=u>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,n){r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var i,o=e%26,a=Math.min((e-o)/26,this.length),u=67108863^67108863>>>o<<o;if(i-=a,i=Math.max(0,i),n){for(var c=0;c<a;c++)n.words[c]=this.words[c];n.length=a}if(0!==a){if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1}var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var h=0|this.words[c];this.words[c]=l<<26-o|h>>>o,l=h&u}return n&&0!==l&&(n.words[n.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return!(this.length<=n)&&!!(this.words[n]&1<<t)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;return(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)?this:(0!==t&&n++,this.length=Math.min(n,this.length),0!==t&&(this.words[this.length-1]&=67108863^67108863>>>t<<t),this._strip())},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?(1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(e),this.negative=1),this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,n){var i,o=e.length+n;this._expand(o);var a,u=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+u;var c=(0|e.words[i])*t;a-=67108863&c,u=(a>>26)-(c/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)u=(a=(0|this.words[i+n])+u)>>26,this.words[i+n]=67108863&a;if(0===u)return this._strip();for(r(-1===u),u=0,i=0;i<this.length;i++)u=(a=-(0|this.words[i])+u)>>26,this.words[i]=67108863&a;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var r=this.length-e.length,n=this.clone(),o=e,a=0|o.words[o.length-1];0!=(r=26-this._countBits(a))&&(o=o.ushln(r),n.iushln(r),a=0|o.words[o.length-1]);var u,c=n.length-o.length;if("mod"!==t){(u=new i(null)).length=c+1,u.words=Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var h=n.clone()._ishlnsubmul(o,1,c);0===h.negative&&(n=h,u&&(u.words[c]=1));for(var d=c-1;d>=0;d--){var f=(0|n.words[o.length+d])*67108864+(0|n.words[o.length+d-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(o,f,d);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(o,1,d),n.isZero()||(n.negative^=1);u&&(u.words[d]=f)}return u&&u._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:u||null,mod:n}},i.prototype.divmod=function(e,t,n){var o,a,u;return(r(!e.isZero()),this.isZero())?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(u=this.neg().divmod(e,t),"mod"!==t&&(o=u.div.neg()),"div"!==t&&(a=u.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:o,mod:a}):0===this.negative&&0!==e.negative?(u=this.divmod(e.neg(),t),"mod"!==t&&(o=u.div.neg()),{div:o,mod:u.mod}):(this.negative&e.negative)!=0?(u=this.neg().divmod(e.neg(),t),"div"!==t&&(a=u.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:u.div,mod:a}):e.length>this.length||0>this.cmp(e)?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=67108864%e,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%e;return t?-i:i},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var o=new i(1),a=new i(0),u=new i(0),c=new i(1),l=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++l;for(var h=n.clone(),d=t.clone();!t.isZero();){for(var f=0,p=1;(t.words[0]&p)==0&&f<26;++f,p<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(o.isOdd()||a.isOdd())&&(o.iadd(h),a.isub(d)),o.iushrn(1),a.iushrn(1);for(var g=0,m=1;(n.words[0]&m)==0&&g<26;++g,m<<=1);if(g>0)for(n.iushrn(g);g-- >0;)(u.isOdd()||c.isOdd())&&(u.iadd(h),c.isub(d)),u.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),o.isub(u),a.isub(c)):(n.isub(t),u.isub(o),c.isub(a))}return{a:u,b:c,gcd:n.iushln(l)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t,n=this,o=e.clone();n=0!==n.negative?n.umod(e):n.clone();for(var a=new i(1),u=new i(0),c=o.clone();n.cmpn(1)>0&&o.cmpn(1)>0;){for(var l=0,h=1;(n.words[0]&h)==0&&l<26;++l,h<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);for(var d=0,f=1;(o.words[0]&f)==0&&d<26;++d,f<<=1);if(d>0)for(o.iushrn(d);d-- >0;)u.isOdd()&&u.iadd(c),u.iushrn(1);n.cmp(o)>=0?(n.isub(o),a.isub(u)):(o.isub(n),u.isub(a))}return 0>(t=0===n.cmpn(1)?a:u).cmpn(0)&&t.iadd(e),t},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return(1&this.words[0])==0},i.prototype.isOdd=function(){return(1&this.words[0])==1},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var u=0|this.words[a];u+=o,o=u>>>26,u&=67108863,this.words[a]=u}return 0!==o&&(this.words[a]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return -1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return -1===this.cmpn(e)},i.prototype.lt=function(e){return -1===this.cmp(e)},i.prototype.lten=function(e){return 0>=this.cmpn(e)},i.prototype.lte=function(e){return 0>=this.cmp(e)},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new E(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function I(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function _(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new i(null);return e.words=Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},n(v,w),v.prototype.split=function(e,t){for(var r=Math.min(e.length,9),n=0;n<r;n++)t.words[n]=e.words[n];if(t.length=r,e.length<=9){e.words[0]=0,e.length=1;return}var i=e.words[9];for(t.words[t.length++]=4194303&i,n=10;n<e.length;n++){var o=0|e.words[n];e.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,e.words[n-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},v.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(k,w),n(S,w),n(I,w),I.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=(0|e.words[r])*19+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){var t;if(b[e])return b[e];if("k256"===e)t=new v;else if("p224"===e)t=new k;else if("p192"===e)t=new S;else if("p25519"===e)t=new I;else throw Error("Unknown prime "+e);return b[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r((e.negative|t.negative)==0,"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new i(1)).iushrn(2);return this.pow(e,n)}for(var o=this.m.subn(1),a=0;!o.isZero()&&0===o.andln(1);)a++,o.iushrn(1);r(!o.isZero());var u=new i(1).toRed(this),c=u.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var d=this.pow(h,o),f=this.pow(e,o.addn(1).iushrn(1)),p=this.pow(e,o),g=a;0!==p.cmp(u);){for(var m=p,y=0;0!==m.cmp(u);y++)m=m.redSqr();r(y<g);var b=this.pow(d,new i(1).iushln(g-y-1));f=f.redMul(b),d=b.redSqr(),p=p.redMul(d),g=y}return f},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new i(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var o=r[0],a=0,u=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],h=c-1;h>=0;h--){var d=l>>h&1;if(o!==r[0]&&(o=this.sqr(o)),0===d&&0===a){u=0;continue}a<<=1,a|=d,4!=++u&&(0!==n||0!==h)||(o=this.mul(o,r[a]),u=0,a=0)}c=26}return o},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new _(e)},n(_,E),_.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},_.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},_.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),a=o;return o.cmp(this.m)>=0?a=o.isub(this.m):0>o.cmpn(0)&&(a=o.iadd(this.m)),a._forceRed(this)},_.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(T,O)),T.exports}var B=P();let C=a(B);function R(){return Y?J:(Y=1,J=(function(){if(G)return H;G=1;var e=_().Buffer;return H=function(t){if(t.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),a=o.charCodeAt(0);if(255!==r[a])throw TypeError(o+" is ambiguous");r[a]=i}var u=t.length,c=t.charAt(0),l=Math.log(u)/Math.log(256),h=Math.log(256)/Math.log(u);function d(t){if("string"!=typeof t)throw TypeError("Expected String");if(0===t.length)return e.alloc(0);for(var n=0,i=0,o=0;t[n]===c;)i++,n++;for(var a=(t.length-n)*l+1>>>0,h=new Uint8Array(a);n<t.length;){var d=t.charCodeAt(n);if(d>255)return;var f=r[d];if(255===f)return;for(var p=0,g=a-1;(0!==f||p<o)&&-1!==g;g--,p++)f+=u*h[g]>>>0,h[g]=f%256>>>0,f=f/256>>>0;if(0!==f)throw Error("Non-zero carry");o=p,n++}for(var m=a-o;m!==a&&0===h[m];)m++;var y=e.allocUnsafe(i+(a-m));y.fill(0,0,i);for(var b=i;m!==a;)y[b++]=h[m++];return y}return{encode:function(r){if((Array.isArray(r)||r instanceof Uint8Array)&&(r=e.from(r)),!e.isBuffer(r))throw TypeError("Expected Buffer");if(0===r.length)return"";for(var n=0,i=0,o=0,a=r.length;o!==a&&0===r[o];)o++,n++;for(var l=(a-o)*h+1>>>0,d=new Uint8Array(l);o!==a;){for(var f=r[o],p=0,g=l-1;(0!==f||p<i)&&-1!==g;g--,p++)f+=256*d[g]>>>0,d[g]=f%u>>>0,f=f/u>>>0;if(0!==f)throw Error("Non-zero carry");i=p,o++}for(var m=l-i;m!==l&&0===d[m];)m++;for(var y=c.repeat(n);m<l;++m)y+=t.charAt(d[m]);return y},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw Error("Non-base"+u+" character")}}}})()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"))}let j=a(R());var $={};function U(e,t,r){return t<=e&&e<=r}function z(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function L(e){this.tokens=[].slice.call(e)}function N(e,t){if(e)throw TypeError("Decoder error");return t||65533}L.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(;e.length;)this.tokens.push(e.shift());else this.tokens.push(e)}};var D="utf-8";function W(e,t){if(!(this instanceof W))return new W(e,t);if((e=void 0!==e?String(e).toLowerCase():D)!==D)throw Error("Encoding not supported. Only utf-8 is supported");t=z(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function V(e,t){if(!(this instanceof V))return new V(e,t);if((e=void 0!==e?String(e).toLowerCase():D)!==D)throw Error("Encoding not supported. Only utf-8 is supported");t=z(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function K(e){var t=e.fatal,r=0,n=0,i=0,o=128,a=191;this.handler=function(e,u){if(-1===u&&0!==i)return i=0,N(t);if(-1===u)return -1;if(0===i){if(U(u,0,127))return u;if(U(u,194,223))i=1,r=u-192;else if(U(u,224,239))224===u&&(o=160),237===u&&(a=159),i=2,r=u-224;else{if(!U(u,240,244))return N(t);240===u&&(o=144),244===u&&(a=143),i=3,r=u-240}return r<<=6*i,null}if(!U(u,o,a))return r=i=n=0,o=128,a=191,e.prepend(u),N(t);if(o=128,a=191,n+=1,r+=u-128<<6*(i-n),n!==i)return null;var c=r;return r=i=n=0,c}}function q(e){e.fatal,this.handler=function(e,t){if(-1===t)return -1;if(U(t,0,127))return t;U(t,128,2047)?(r=1,n=192):U(t,2048,65535)?(r=2,n=224):U(t,65536,1114111)&&(r=3,n=240);for(var r,n,i=[(t>>6*r)+n];r>0;){var o=t>>6*(r-1);i.push(128|63&o),r-=1}return i}}W.prototype={decode:function(e,t){r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=z(t),this._streaming||(this._decoder=new K({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var r,n,i=new L(r),o=[];!i.endOfStream()&&-1!==(n=this._decoder.handler(i,i.read()));)null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));if(!this._streaming){do{if(-1===(n=this._decoder.handler(i,i.read())))break;null!==n&&(Array.isArray(n)?o.push.apply(o,n):o.push(n))}while(!i.endOfStream());this._decoder=null}return!o.length||-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(1023&n)+56320))}return t}(o)}},V.prototype={encode:function(e,t){e=e?String(e):"",t=z(t),this._streaming||(this._encoder=new q(this._options)),this._streaming=!!t.stream;for(var r,n=[],i=new L(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319){if(n===r-1)i.push(65533);else{var a=e.charCodeAt(n+1);if(56320<=a&&a<=57343){var u=1023&o,c=1023&a;i.push(65536+(u<<10)+c),n+=1}else i.push(65533)}}n+=1}return i}(e));!i.endOfStream()&&-1!==(r=this._encoder.handler(i,i.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(i,i.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};let F=u(Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:W,TextEncoder:V},Symbol.toStringTag,{value:"Module"})));var H,G,J,Y,Z,X,Q=function(){if(Z)return $;Z=1;var e=$&&$.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),t=$&&$.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=$&&$.__decorate||function(e,t,r,n){var i,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(i=e[u])&&(a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},n=$&&$.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var i in r)"default"!==i&&Object.hasOwnProperty.call(r,i)&&e(n,r,i);return t(n,r),n},o=$&&$.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($,"__esModule",{value:!0}),$.deserializeUnchecked=$.deserialize=$.serialize=$.BinaryReader=$.BinaryWriter=$.BorshError=$.baseDecode=$.baseEncode=void 0;let a=o(P()),u=o(R()),c=n(F),l=new("function"!=typeof TextDecoder?c.TextDecoder:TextDecoder)("utf-8",{fatal:!0});$.baseEncode=function(e){return"string"==typeof e&&(e=i.C.from(e,"utf8")),u.default.encode(i.C.from(e))},$.baseDecode=function(e){return i.C.from(u.default.decode(e))};class h extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}$.BorshError=h;class d{constructor(){this.buf=i.C.alloc(1024),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=i.C.concat([this.buf,i.C.alloc(1024)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(i.C.from(new a.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(i.C.from(new a.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(i.C.from(new a.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(i.C.from(new a.default(e).toArray("le",64)))}writeBuffer(e){this.buf=i.C.concat([i.C.from(this.buf.subarray(0,this.length)),e,i.C.alloc(1024)]),this.length+=e.length}writeString(e){this.maybeResize();let t=i.C.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(i.C.from(e))}writeArray(e,t){for(let r of(this.maybeResize(),this.writeU32(e.length),e))this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function f(e,t,r){let n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError&&["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(e.code)>=0)throw new h("Reached the end of buffer when deserializing");throw e}}}$.BinaryWriter=d;class p{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new a.default(e,"le")}readU128(){let e=this.readBuffer(16);return new a.default(e,"le")}readU256(){let e=this.readBuffer(32);return new a.default(e,"le")}readU512(){let e=this.readBuffer(64);return new a.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new h(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return l.decode(t)}catch(e){throw new h(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=[];for(let n=0;n<t;++n)r.push(e());return r}}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function m(e,t,r,n,i){try{if("string"==typeof n)i[`write${g(n)}`](r);else if(n instanceof Array){if("number"==typeof n[0]){if(r.length!==n[0])throw new h(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new h(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)m(e,null,r[t],n[0],i)}else i.writeArray(r,r=>{m(e,t,r,n[0],i)})}else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),m(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach((r,o)=>{m(e,t,o,n.key,i),m(e,t,r,n.value,i)});break;default:throw new h(`FieldType ${n} unrecognized`)}else y(e,r,i)}catch(e){throw e instanceof h&&e.addToFieldPath(t),e}}function y(e,t,r){if("function"==typeof t.borshSerialize){t.borshSerialize(r);return}let n=e.get(t.constructor);if(!n)throw new h(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map(([n,i])=>{m(e,n,t[n],i,r)});else if("enum"===n.kind){let i=t[n.field];for(let o=0;o<n.values.length;++o){let[a,u]=n.values[o];if(a===i){r.writeU8(o),m(e,a,t[a],u,r);break}}}else throw new h(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function b(e,t,r,n){try{if("string"==typeof r)return n[`read${g(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"!=typeof r[1])return n.readArray(()=>b(e,t,r[0],n));{let t=[];for(let i=0;i<r[1];i++)t.push(b(e,null,r[0],n));return t}}if("option"===r.kind)return n.readU8()?b(e,t,r.type,n):void 0;if("map"===r.kind){let i=new Map,o=n.readU32();for(let a=0;a<o;a++){let o=b(e,t,r.key,n),a=b(e,t,r.value,n);i.set(o,a)}return i}return w(e,r,n)}catch(e){throw e instanceof h&&e.addToFieldPath(t),e}}function w(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);let n=e.get(t);if(!n)throw new h(`Class ${t.name} is missing in schema`);if("struct"===n.kind){let n={};for(let[i,o]of e.get(t).fields)n[i]=b(e,i,o,r);return new t(n)}if("enum"===n.kind){let i=r.readU8();if(i>=n.values.length)throw new h(`Enum index: ${i} is out of range`);let[o,a]=n.values[i],u=b(e,o,a,r);return new t({[o]:u})}throw new h(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}return r([f],p.prototype,"readU8",null),r([f],p.prototype,"readU16",null),r([f],p.prototype,"readU32",null),r([f],p.prototype,"readU64",null),r([f],p.prototype,"readU128",null),r([f],p.prototype,"readU256",null),r([f],p.prototype,"readU512",null),r([f],p.prototype,"readString",null),r([f],p.prototype,"readFixedArray",null),r([f],p.prototype,"readArray",null),$.BinaryReader=p,$.serialize=function(e,t,r=d){let n=new r;return y(e,t,n),n.toArray()},$.deserialize=function(e,t,r,n=p){let i=new n(r),o=w(e,t,i);if(i.offset<r.length)throw new h(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return o},$.deserializeUnchecked=function(e,t,r,n=p){return w(e,t,new n(r))},$}(),ee={},et=function(){if(X)return ee;X=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.s16=ee.s8=ee.nu64be=ee.u48be=ee.u40be=ee.u32be=ee.u24be=ee.u16be=ee.nu64=ee.u48=ee.u40=ee.u32=ee.u24=ee.u16=ee.u8=ee.offset=ee.greedy=ee.Constant=ee.UTF8=ee.CString=ee.Blob=ee.Boolean=ee.BitField=ee.BitStructure=ee.VariantLayout=ee.Union=ee.UnionLayoutDiscriminator=ee.UnionDiscriminator=ee.Structure=ee.Sequence=ee.DoubleBE=ee.Double=ee.FloatBE=ee.Float=ee.NearInt64BE=ee.NearInt64=ee.NearUInt64BE=ee.NearUInt64=ee.IntBE=ee.Int=ee.UIntBE=ee.UInt=ee.OffsetLayout=ee.GreedyCount=ee.ExternalLayout=ee.bindConstructorLayout=ee.nameWithProperty=ee.Layout=ee.uint8ArrayToBuffer=ee.checkUint8Array=void 0,ee.constant=ee.utf8=ee.cstr=ee.blob=ee.unionLayoutDiscriminator=ee.union=ee.seq=ee.bits=ee.struct=ee.f64be=ee.f64=ee.f32be=ee.f32=ee.ns64be=ee.s48be=ee.s40be=ee.s32be=ee.s24be=ee.s16be=ee.ns64=ee.s48=ee.s40=ee.s32=ee.s24=void 0;let e=A();function t(e){if(!(e instanceof Uint8Array))throw TypeError("b must be a Uint8Array")}function r(r){return t(r),e.Buffer.from(r.buffer,r.byteOffset,r.length)}ee.checkUint8Array=t,ee.uint8ArrayToBuffer=r;let n=class{constructor(e,t){if(!Number.isInteger(e))throw TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};function i(e,t){return t.property?e+"["+t.property+"]":e}ee.Layout=n,ee.nameWithProperty=i,ee.bindConstructorLayout=function(e,t){if("function"!=typeof e)throw TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw Error("Class is already bound to a layout");if(!(t&&t instanceof n))throw TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=()=>new e,Object.defineProperty(e.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(e,"decode",{value:(e,r)=>t.decode(e,r),writable:!0})};class o extends n{isCount(){throw Error("ExternalLayout is abstract")}}ee.ExternalLayout=o;class a extends o{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,r=0){return t(e),Math.floor((e.length-r)/this.elementSpan)}encode(e,t,r){return 0}}ee.GreedyCount=a;class u extends o{constructor(e,t=0,r){if(!(e instanceof n))throw TypeError("layout must be a Layout");if(!Number.isInteger(t))throw TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof c||this.layout instanceof l}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}ee.OffsetLayout=u;class c extends n{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readUIntLE(t,this.span)}encode(e,t,n=0){return r(t).writeUIntLE(e,n,this.span),this.span}}ee.UInt=c;class l extends n{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readUIntBE(t,this.span)}encode(e,t,n=0){return r(t).writeUIntBE(e,n,this.span),this.span}}ee.UIntBE=l;class h extends n{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readIntLE(t,this.span)}encode(e,t,n=0){return r(t).writeIntLE(e,n,this.span),this.span}}ee.Int=h;class d extends n{constructor(e,t){if(super(e,t),6<this.span)throw RangeError("span must not exceed 6 bytes")}decode(e,t=0){return r(e).readIntBE(t,this.span)}encode(e,t,n=0){return r(t).writeIntBE(e,n,this.span),this.span}}function f(e){let t=Math.floor(e/4294967296);return{hi32:t,lo32:e-4294967296*t}}function p(e,t){return 4294967296*e+t}ee.IntBE=d;class g extends n{constructor(e){super(8,e)}decode(e,t=0){let n=r(e),i=n.readUInt32LE(t);return p(n.readUInt32LE(t+4),i)}encode(e,t,n=0){let i=f(e),o=r(t);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}}ee.NearUInt64=g;class m extends n{constructor(e){super(8,e)}decode(e,t=0){let n=r(e);return p(n.readUInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){let i=f(e),o=r(t);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}}ee.NearUInt64BE=m;class y extends n{constructor(e){super(8,e)}decode(e,t=0){let n=r(e),i=n.readUInt32LE(t);return p(n.readInt32LE(t+4),i)}encode(e,t,n=0){let i=f(e),o=r(t);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}}ee.NearInt64=y;class b extends n{constructor(e){super(8,e)}decode(e,t=0){let n=r(e);return p(n.readInt32BE(t),n.readUInt32BE(t+4))}encode(e,t,n=0){let i=f(e),o=r(t);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}}ee.NearInt64BE=b;class w extends n{constructor(e){super(4,e)}decode(e,t=0){return r(e).readFloatLE(t)}encode(e,t,n=0){return r(t).writeFloatLE(e,n),4}}ee.Float=w;class v extends n{constructor(e){super(4,e)}decode(e,t=0){return r(e).readFloatBE(t)}encode(e,t,n=0){return r(t).writeFloatBE(e,n),4}}ee.FloatBE=v;class k extends n{constructor(e){super(8,e)}decode(e,t=0){return r(e).readDoubleLE(t)}encode(e,t,n=0){return r(t).writeDoubleLE(e,n),8}}ee.Double=k;class S extends n{constructor(e){super(8,e)}decode(e,t=0){return r(e).readDoubleBE(t)}encode(e,t,n=0){return r(t).writeDoubleBE(e,n),8}}ee.DoubleBE=S;class I extends n{constructor(e,t,r){if(!(e instanceof n))throw TypeError("elementLayout must be a Layout");if(!(t instanceof o&&t.isCount()||Number.isInteger(t)&&0<=t))throw TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;t instanceof o||!(0<e.span)||(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof o&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){let r=[],n=0,i=this.count;for(i instanceof o&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){let n=this.elementLayout,i=e.reduce((e,i)=>e+n.encode(i,t,r+e),0);return this.count instanceof o&&this.count.encode(e.length,t,r),i}}ee.Sequence=I;class E extends n{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((e,t)=>e&&t instanceof n,!0)))throw TypeError("fields must be array of Layout instances");for(let n of("boolean"==typeof t&&void 0===r&&(r=t,t=void 0),e))if(0>n.span&&void 0===n.property)throw Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((e,t)=>e+t.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((r,n)=>{let i=n.getSpan(e,t);return t+=i,r+i},0)}catch{throw RangeError("indeterminate span")}return r}decode(e,r=0){t(e);let n=this.makeDestinationObject();for(let t of this.fields)if(void 0!==t.property&&(n[t.property]=t.decode(e,r)),r+=t.getSpan(e,r),this.decodePrefixes&&e.length===r)break;return n}encode(e,t,r=0){let n=r,i=0,o=0;for(let n of this.fields){let a=n.span;if(o=0<a?a:0,void 0!==n.property){let i=e[n.property];void 0!==i&&(o=n.encode(i,t,r),0>a&&(a=n.getSpan(t,r)))}i=r,r+=a}return i+o-n}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}ee.Structure=E;class _{constructor(e){this.property=e}decode(e,t){throw Error("UnionDiscriminator is abstract")}encode(e,t,r){throw Error("UnionDiscriminator is abstract")}}ee.UnionDiscriminator=_;class x extends _{constructor(e,t){if(!(e instanceof o&&e.isCount()))throw TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}ee.UnionLayoutDiscriminator=x;class M extends n{constructor(e,t,r){let i;if(e instanceof c||e instanceof l)i=new x(new u(e));else if(e instanceof o&&e.isCount())i=new x(e);else if(e instanceof _)i=e;else throw TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===t&&(t=null),!(null===t||t instanceof n))throw TypeError("defaultLayout must be null or a Layout");if(null!==t){if(0>t.span)throw Error("defaultLayout must have constant span");void 0===t.property&&(t=t.replicate("content"))}let a=-1;t&&0<=(a=t.span)&&(e instanceof c||e instanceof l)&&(a+=i.layout.span),super(a,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof c||e instanceof l,this.defaultLayout=t,this.registry={};let h=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(e){return h(e)},this.configGetSourceVariant=function(e){h=e.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw Error("unable to infer src variant")}decode(e,t=0){let r;let n=this.discriminator,i=n.decode(e,t),o=this.registry[i];if(void 0===o){let o=this.defaultLayout,a=0;this.usesPrefixDiscriminator&&(a=n.layout.span),(r=this.makeDestinationObject())[n.property]=i,r[o.property]=o.decode(e,t+a)}else r=o.decode(e,t);return r}encode(e,t,r=0){let n=this.getSourceVariant(e);if(void 0===n){let n=this.discriminator,i=this.defaultLayout,o=0;return this.usesPrefixDiscriminator&&(o=n.layout.span),n.encode(e[n.property],t,r),o+i.encode(e[i.property],t,r+o)}return n.encode(e,t,r)}addVariant(e,t,r){let n=new T(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}ee.Union=M;class T extends n{constructor(e,t,r,i){if(!(e instanceof M))throw TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw TypeError("variant must be a (non-negative) integer");if("string"==typeof r&&void 0===i&&(i=r,r=null),r){if(!(r instanceof n))throw TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=r.span&&r.span>e.defaultLayout.span)throw Error("variant span exceeds span of containing union");if("string"!=typeof i)throw TypeError("variant must have a String property")}let o=e.span;0>e.span&&0<=(o=r?r.span:0)&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span),super(o,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let i=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),i+=this.layout.getSpan(t,r+n),0<=this.union.span&&i>this.union.span))throw Error("encoded variant overruns containing union");return i}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}function O(e){return 0>e&&(e+=4294967296),e}ee.VariantLayout=T;class P extends n{constructor(e,t,r){if(!(e instanceof c||e instanceof l))throw TypeError("word must be a UInt or UIntBE layout");if("string"==typeof t&&void 0===r&&(r=t,t=!1),4<e.span)throw RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(e){return n=O(e),this},this._packedGetValue=function(){return n}}decode(e,t=0){let r=this.makeDestinationObject(),n=this.word.decode(e,t);for(let t of(this._packedSetValue(n),this.fields))void 0!==t.property&&(r[t.property]=t.decode(e));return r}encode(e,t,r=0){let n=this.word.decode(t,r);for(let t of(this._packedSetValue(n),this.fields))if(void 0!==t.property){let r=e[t.property];void 0!==r&&t.encode(r)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new B(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new C(this,e);return this.fields.push(t),t}fieldFor(e){if("string"!=typeof e)throw TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}}ee.BitStructure=P;class B{constructor(e,t,r){if(!(e instanceof P))throw TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw TypeError("bits must be positive integer");let n=8*e.span,i=e.fields.reduce((e,t)=>e+t.bits,0);if(t+i>n)throw Error("bits too long for span remainder ("+(n-i)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,32===t&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=n-i-t),this.wordMask=O(this.valueMask<<this.start),this.property=r}decode(e,t){return O(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(e){if("number"!=typeof e||!Number.isInteger(e)||e!==O(e&this.valueMask))throw TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=O(e<<this.start);this.container._packedSetValue(O(t&~this.wordMask)|r)}}ee.BitField=B;class C extends B{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){"boolean"==typeof e&&(e=+e),super.encode(e)}}ee.Boolean=C;class R extends n{constructor(e,t){if(!(e instanceof o&&e.isCount()||Number.isInteger(e)&&0<=e))throw TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof o||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),r(e).slice(t,t+n)}encode(e,t,n){let a=this.length;if(this.length instanceof o&&(a=e.length),!(e instanceof Uint8Array&&a===e.length))throw TypeError(i("Blob.encode",this)+" requires (length "+a+") Uint8Array as src");if(n+a>t.length)throw RangeError("encoding overruns Uint8Array");let u=r(e);return r(t).write(u.toString("hex"),n,a,"hex"),this.length instanceof o&&this.length.encode(a,t,n),a}}ee.Blob=R;class j extends n{constructor(e){super(-1,e)}getSpan(e,r=0){t(e);let n=r;for(;n<e.length&&0!==e[n];)n+=1;return 1+n-r}decode(e,t=0){let n=this.getSpan(e,t);return r(e).slice(t,t+n-1).toString("utf-8")}encode(t,n,i=0){"string"!=typeof t&&(t=String(t));let o=e.Buffer.from(t,"utf8"),a=o.length;if(i+a>n.length)throw RangeError("encoding overruns Buffer");let u=r(n);return o.copy(u,i),u[i+a]=0,a+1}}ee.CString=j;class $ extends n{constructor(e,t){if("string"==typeof e&&void 0===t&&(t=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,r=0){return t(e),e.length-r}decode(e,t=0){let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw RangeError("text length exceeds maxSpan");return r(e).slice(t,t+n).toString("utf-8")}encode(t,n,i=0){"string"!=typeof t&&(t=String(t));let o=e.Buffer.from(t,"utf8"),a=o.length;if(0<=this.maxSpan&&this.maxSpan<a)throw RangeError("text length exceeds maxSpan");if(i+a>n.length)throw RangeError("encoding overruns Buffer");return o.copy(r(n),i),a}}ee.UTF8=$;class U extends n{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}return ee.Constant=U,ee.greedy=(e,t)=>new a(e,t),ee.offset=(e,t,r)=>new u(e,t,r),ee.u8=e=>new c(1,e),ee.u16=e=>new c(2,e),ee.u24=e=>new c(3,e),ee.u32=e=>new c(4,e),ee.u40=e=>new c(5,e),ee.u48=e=>new c(6,e),ee.nu64=e=>new g(e),ee.u16be=e=>new l(2,e),ee.u24be=e=>new l(3,e),ee.u32be=e=>new l(4,e),ee.u40be=e=>new l(5,e),ee.u48be=e=>new l(6,e),ee.nu64be=e=>new m(e),ee.s8=e=>new h(1,e),ee.s16=e=>new h(2,e),ee.s24=e=>new h(3,e),ee.s32=e=>new h(4,e),ee.s40=e=>new h(5,e),ee.s48=e=>new h(6,e),ee.ns64=e=>new y(e),ee.s16be=e=>new d(2,e),ee.s24be=e=>new d(3,e),ee.s32be=e=>new d(4,e),ee.s40be=e=>new d(5,e),ee.s48be=e=>new d(6,e),ee.ns64be=e=>new b(e),ee.f32=e=>new w(e),ee.f32be=e=>new v(e),ee.f64=e=>new k(e),ee.f64be=e=>new S(e),ee.struct=(e,t,r)=>new E(e,t,r),ee.bits=(e,t,r)=>new P(e,t,r),ee.seq=(e,t,r)=>new I(e,t,r),ee.union=(e,t,r)=>new M(e,t,r),ee.unionLayoutDiscriminator=(e,t)=>new x(e,t),ee.blob=(e,t)=>new R(e,t),ee.cstr=e=>new j(e),ee.utf8=(e,t)=>new $(e,t),ee.constant=(e,t)=>new U(e,t),ee}();function er([e,t]){return`${e}=${function e(t){return Array.isArray(t)?"%5B"+t.map(e).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}(t)}`}var en={323e4:"Account not found at address: $address",3230004:"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.",3230003:"Expected decoded account at address: $address",3230002:"Failed to decode account data at address: $address",32300001:"Accounts not found at addresses: $addresses",2800009:"Unable to find a viable program address bump seed.",2800002:"$putativeAddress is not a base58-encoded address.",28e5:"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.",2800003:"The `CryptoKey` must be an `Ed25519` public key.",2800011:"$putativeOffCurveAddress is not a base58-encoded off-curve address.",2800008:"Invalid seeds; point must fall off the Ed25519 curve.",2800004:"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].",2800006:"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.",2800007:"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.",2800005:"Expected program derived address bump to be in the range [0, 255], got: $bump.",2800010:"Program address cannot end with PDA marker.",2800001:"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.",4:"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.",1:"The network has progressed past the last block for which this transaction could have been committed.",8078e3:"Codec [$codecDescription] cannot decode empty byte arrays.",8078022:"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.",8078020:"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].",8078005:"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].",8078006:"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].",8078004:"Encoder and decoder must either both be fixed-size or variable-size.",8078008:"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.",8078002:"Expected a fixed-size codec, got a variable-size one.",8078013:"Codec [$codecDescription] expected a positive byte length, got $bytesLength.",8078003:"Expected a variable-size codec, got a fixed-size one.",8078019:"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].",8078001:"Codec [$codecDescription] expected $expected bytes, got $bytesLength.",8078018:"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].",8078009:"Invalid discriminated union variant. Expected one of [$variants], got $value.",8078010:"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.",8078015:"Invalid literal union variant. Expected one of [$variants], got $value.",8078007:"Expected [$codecDescription] to have $expected items, got $actual.",8078012:"Invalid value $value for base $base with alphabet $alphabet.",8078016:"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.",8078011:"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.",8078014:"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.",8078021:"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].",8078017:"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.",3611e3:"No random values implementation could be found.",4615009:"instruction requires an uninitialized account",4615023:"instruction tries to borrow reference for an account which is already borrowed",4615024:"instruction left account with an outstanding borrowed reference",4615021:"program other than the account's owner changed the size of the account data",4615005:"account data too small for instruction",4615022:"instruction expected an executable account",4615046:"An account does not have enough lamports to be rent-exempt",4615048:"Program arithmetic overflowed",4615045:"Failed to serialize or deserialize account data: $encodedData",4615054:"Builtin programs must consume compute units",4615032:"Cross-program invocation call depth too deep",4615038:"Computational budget exceeded",4615026:"custom program error: #$code",4615017:"instruction contains duplicate accounts",4615025:"instruction modifications of multiply-passed account differ",4615030:"executable accounts must be rent exempt",4615028:"instruction changed executable accounts data",4615029:"instruction changed the balance of an executable account",4615018:"instruction changed executable bit of an account",4615014:"instruction modified data of an account it does not own",4615013:"instruction spent from the balance of an account it does not own",4615001:"generic instruction error",4615050:"Provided owner is not allowed",4615043:"Account is immutable",4615044:"Incorrect authority provided",4615007:"incorrect program id for instruction",4615006:"insufficient funds for instruction",4615004:"invalid account data for instruction",4615047:"Invalid account owner",4615002:"invalid program argument",4615027:"program returned invalid error code",4615003:"invalid instruction data",4615037:"Failed to reallocate account data",4615036:"Provided seeds do not result in a valid address",4615051:"Accounts data allocations exceeded the maximum allowed per transaction",4615052:"Max accounts exceeded",4615053:"Max instruction trace length exceeded",4615035:"Length of the seed is too long for address generation",4615033:"An account required by the instruction is missing",4615008:"missing required signature for instruction",4615012:"instruction illegally modified the program id of an account",4615020:"insufficient account keys for instruction",4615039:"Cross-program invocation with unauthorized signer or writable account",4615040:"Failed to create program execution environment",4615042:"Program failed to compile",4615041:"Program failed to complete",4615016:"instruction modified data of a read-only account",4615015:"instruction changed the balance of a read-only account",4615034:"Cross-program invocation reentrancy not allowed for this instruction",4615019:"instruction modified rent epoch of an account",4615011:"sum of account balances before and after instruction do not match",4615010:"instruction requires an initialized account",4615e3:"",4615031:"Unsupported program id",4615049:"Unsupported sysvar",4128e3:"The instruction does not have any accounts.",4128001:"The instruction does not have any data.",4128002:"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.",5:"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.",2:"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`",9900002:"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",9900004:"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.",9900001:"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",99e5:"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",9900003:"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[-32603]:"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)",[-32602]:"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)",[-32600]:"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)",[-32601]:"JSON-RPC error: The method does not exist / is not available ($__serverMessage)",[-32700]:"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)",[-32012]:"$__serverMessage",[-32001]:"$__serverMessage",[-32004]:"$__serverMessage",[-32014]:"$__serverMessage",[-32010]:"$__serverMessage",[-32009]:"$__serverMessage",[-32016]:"Minimum context slot has not been reached",[-32005]:"Node is unhealthy; behind by $numSlotsBehind slots",[-32008]:"No snapshot",[-32002]:"Transaction simulation failed",[-32007]:"$__serverMessage",[-32011]:"Transaction history is not available from this node",[-32006]:"$__serverMessage",[-32013]:"Transaction signature length mismatch",[-32003]:"Transaction signature verification failure",[-32015]:"$__serverMessage",3704e3:"Key pair bytes must be of length 64, got $byteLength.",3704001:"Expected private key bytes with length 32. Actual length: $actualLength.",3704002:"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.",3704004:"The provided private key does not match the provided public key.",3704003:"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.",6:"Lamports value must be in the range [0, 2e64-1]",7:"`$value` cannot be parsed as a `BigInt`",10:"$message",8:"`$value` cannot be parsed as a `Number`",3:"No nonce account could be found at address `$nonceAccountAddress`",819e4:"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.",8190002:"WebSocket was closed before payload could be added to the send buffer",8190003:"WebSocket connection closed",8190004:"WebSocket failed to connect",8190001:"Failed to obtain a subscription id from the server",8100003:"Could not find an API plan for RPC method: `$method`",81e5:"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.",8100002:"HTTP error ($statusCode): $message",8100001:"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.",5508e3:"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.",5508001:"The provided value does not implement the `KeyPairSigner` interface",5508003:"The provided value does not implement the `MessageModifyingSigner` interface",5508004:"The provided value does not implement the `MessagePartialSigner` interface",5508002:"The provided value does not implement any of the `MessageSigner` interfaces",5508006:"The provided value does not implement the `TransactionModifyingSigner` interface",5508007:"The provided value does not implement the `TransactionPartialSigner` interface",5508008:"The provided value does not implement the `TransactionSendingSigner` interface",5508005:"The provided value does not implement any of the `TransactionSigner` interfaces",5508009:"More than one `TransactionSendingSigner` was identified.",5508010:"No `TransactionSendingSigner` was identified. Please provide a valid `TransactionWithSingleSendingSigner` transaction.",5508011:"Wallet account signers do not support signing multiple messages/transactions in a single operation",3610007:"Cannot export a non-extractable key.",3610001:"No digest implementation could be found.",361e4:"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.",3610002:`This runtime does not support the generation of Ed25519 key pairs.

Install @solana/webcrypto-ed25519-polyfill and call its \`install\` function before generating keys in environments that do not support Ed25519.

For a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.`,3610003:"No signature verification implementation could be found.",3610004:"No key generation implementation could be found.",3610005:"No signing implementation could be found.",3610006:"No key export implementation could be found.",9:"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given",7050016:"Transaction processing left an account with an outstanding borrowed reference",7050001:"Account in use",7050002:"Account loaded twice",7050003:"Attempt to debit an account but found no record of a prior credit.",7050023:"Transaction loads an address table account that doesn't exist",7050007:"This transaction has already been processed",7050008:"Blockhash not found",7050009:"Loader call chain is too deep",7050015:"Transactions are currently disabled due to cluster maintenance",7050030:"Transaction contains a duplicate instruction ($index) that is not allowed",7050005:"Insufficient funds for fee",7050031:"Transaction results in an account ($accountIndex) with insufficient funds for rent",7050006:"This account may not be used to pay transaction fees",7050011:"Transaction contains an invalid account reference",7050025:"Transaction loads an address table account with invalid data",7050026:"Transaction address table lookup uses an invalid index",7050024:"Transaction loads an address table account with an invalid owner",7050033:"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.",7050013:"This program may not be used for executing instructions",7050027:"Transaction leaves an account with a lower balance than rent-exempt minimum",7050019:"Transaction loads a writable account that cannot be written",7050032:"Transaction exceeded max loaded accounts data size cap",7050010:"Transaction requires a fee but has no signature present",7050004:"Attempt to load a program that does not exist",7050035:"Execution of the program referenced by account at index $accountIndex is temporarily restricted.",7050034:"ResanitizationNeeded",7050014:"Transaction failed to sanitize accounts offsets correctly",7050012:"Transaction did not pass signature verification",7050022:"Transaction locked too many accounts",7050036:"Sum of account balances before and after transaction do not match",705e4:"The transaction failed with the error `$errorName`",7050018:"Transaction version is unsupported",7050021:"Transaction would exceed account data limit within the block",7050029:"Transaction would exceed total account data limit",7050020:"Transaction would exceed max account limit within the block",7050017:"Transaction would exceed max Block Cost Limit",7050028:"Transaction would exceed max Vote Cost Limit",5663015:"Attempted to sign a transaction with an address that is not a signer for it",5663010:"Transaction is missing an address at index: $index.",5663016:"Transaction has no expected signers therefore it cannot be encoded",5663020:"Transaction size $transactionSize exceeds limit of $transactionSizeLimit bytes",5663002:"Transaction does not have a blockhash lifetime",5663003:"Transaction is not a durable nonce transaction",5663005:"Contents of these address lookup tables unknown: $lookupTableAddresses",5663006:"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved",5663008:"No fee payer set in CompiledTransaction",5663007:"Could not find program address at index $index",5663018:"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more",5663019:"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more",5663011:"Transaction is missing a fee payer.",5663012:"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.",5663014:"Transaction first instruction is not advance nonce account instruction.",5663013:"Transaction with no instructions cannot be durable nonce transaction.",5663e3:"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees",5663001:"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable",5663017:"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.",5663009:"Transaction is missing signatures for addresses: $addresses.",5663004:"Transaction version must be in the range [0, 127]. `$actualVersion` given"},ei=class extends Error{cause=this.cause;context;constructor(...[e,t]){let r,n;if(t){let{cause:e,...i}=t;e&&(n={cause:e}),Object.keys(i).length>0&&(r=i)}super(function(e,t={}){if("production"!==i.p.env.NODE_ENV)return function(e,t={}){let r;let n=en[e];if(0===n.length)return"";function i(e){if(2===r.t){let i=n.slice(r.i+1,e);o.push(i in t?`${t[i]}`:`$${i}`)}else 1===r.t&&o.push(n.slice(r.i,e))}let o=[];return n.split("").forEach((e,t)=>{let o;if(0===t){r={i:0,t:"\\"===n[0]?0:"$"===n[0]?2:1};return}switch(r.t){case 0:o={i:t,t:1};break;case 1:"\\"===e?o={i:t,t:0}:"$"===e&&(o={i:t,t:2});break;case 2:"\\"===e?o={i:t,t:0}:"$"===e?o={i:t,t:2}:e.match(/\w/)||(o={i:t,t:1})}o&&(r!==o&&i(t),r=o)}),i(),o.join("")}(e,t);{let r=`Solana error #${e}; Decode this error by running \`npx @solana/errors decode -- ${e}`;return Object.keys(t).length&&(r+=` '${btoa(Object.entries(t).map(er).join("&"))}'`),`${r}\``}}(e,r),n),this.context={__code:e,...r},this.name="SolanaError"}};function es(e){return"fixedSize"in e&&"number"==typeof e.fixedSize}function eo(e){return e?.endian!==1}var ea=(e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,r)=>e.setBigUint64(0,BigInt(t),r),size:8}).size,write(e,r,n){t.range&&function(e,t,r,n){if(n<t||n>r)throw new ei(8078011,{codecDescription:e,max:r,min:t,value:n})}(t.name,t.range[0],t.range[1],e);let i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,eo(t.config)),r.set(new Uint8Array(i),n),n+t.size}},encode:e=>{let t=new Uint8Array("fixedSize"in r?r.fixedSize:r.getSizeFromValue(e));return r.write(e,t,0),t}})},eu=(e={})=>{var t,r;return Object.freeze({...r={fixedSize:(t={config:e,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}).size,read(e,r=0){(function(e,t,r=0){if(t.length-r<=0)throw new ei(8078e3,{codecDescription:e})})(t.name,e,r),function(e,t,r,n=0){let i=r.length-n;if(i<t)throw new ei(8078001,{bytesLength:i,codecDescription:e,expected:t})}(t.name,t.size,e,r);let n=new DataView(function(e,t,r){let n=e.byteOffset+(t??0),i=r??e.byteLength;return e.buffer.slice(n,n+i)}(e,r,t.size));return[t.get(n,eo(t.config)),r+t.size]}},decode:(e,t=0)=>r.read(e,t)[0]})},ec=(e={})=>(function(e,t){if(es(e)!==es(t))throw new ei(8078004);if(es(e)&&es(t)&&e.fixedSize!==t.fixedSize)throw new ei(8078005,{decoderFixedSize:t.fixedSize,encoderFixedSize:e.fixedSize});if(!es(e)&&!es(t)&&e.maxSize!==t.maxSize)throw new ei(8078006,{decoderMaxSize:t.maxSize,encoderMaxSize:e.maxSize});return{...t,...e,decode:t.decode,encode:e.encode,read:t.read,write:e.write}})(ea(e),eu(e));class el extends TypeError{constructor(e,t){let r;let{message:n,explanation:i,...o}=e,{path:a}=e,u=0===a.length?n:`At path: ${a.join(".")} -- ${n}`;super(i??u),null!=i&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function eh(e){return"object"==typeof e&&null!=e}function ed(e){return eh(e)&&!Array.isArray(e)}function ef(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function*ep(e,t,r,n){var i;for(let o of(eh(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]),e)){let e=function(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});let{path:i,branch:o}=t,{type:a}=r,{refinement:u,message:c=`Expected a value of type \`${a}\`${u?` with refinement \`${u}\``:""}, but received: \`${ef(n)}\``}=e;return{value:n,type:a,refinement:u,key:i[i.length-1],path:i,branch:o,...e,message:c}}(o,t,r,n);e&&(yield e)}}function*eg(e,t,r={}){let{path:n=[],branch:i=[e],coerce:o=!1,mask:a=!1}=r,u={path:n,branch:i,mask:a};o&&(e=t.coercer(e,u));let c="valid";for(let n of t.validator(e,u))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[l,h,d]of t.entries(e,u))for(let t of eg(h,d,{path:void 0===l?n:[...n,l],branch:void 0===l?i:[...i,h],coerce:o,mask:a,message:r.message}))t[0]?(c=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(h=t[1],void 0===l?e=h:e instanceof Map?e.set(l,h):e instanceof Set?e.add(h):eh(e)&&(void 0!==h||l in e)&&(e[l]=h));if("not_valid"!==c)for(let n of t.refiner(e,u))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}let em=class{constructor(e){let{type:t,schema:r,validator:n,refiner:i,coercer:o=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,n?this.validator=(e,t)=>ep(n(e,t),t,this,e):this.validator=()=>[],i?this.refiner=(e,t)=>ep(i(e,t),t,this,e):this.refiner=()=>[]}assert(e,t){return ey(e,this,t)}create(e,t){return eb(e,this,t)}is(e){return!ew(e,this)[0]}mask(e,t){return function(e,t,r){let n=ew(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return ew(e,this,t)}};function ey(e,t,r){let n=ew(e,t,{message:r});if(n[0])throw n[0]}function eb(e,t,r){let n=ew(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function ew(e,t,r={}){let n=eg(e,t,r),i=function(e){let{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new el(i[0],function*(){for(let e of n)e[0]&&(yield e[0])}),void 0]:[void 0,i[1]]}function ev(e,t){return new em({type:e,schema:null,validator:t})}function ek(e){return new em({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(let[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${ef(e)}`})}function eS(){return ev("boolean",e=>"boolean"==typeof e)}function eI(e){return ev("instance",t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${ef(t)}`)}function eE(e){let t=ef(e),r=typeof e;return new em({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${ef(r)}`})}function eA(e){return new em({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function e_(){return ev("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${ef(e)}`)}function ex(e){return new em({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function eM(e,t){return new em({type:"record",schema:null,*entries(r){if(eh(r))for(let n in r){let i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>ed(e)||`Expected an object, but received: ${ef(e)}`,coercer:e=>ed(e)?{...e}:e})}function eT(){return ev("string",e=>"string"==typeof e||`Expected a string, but received: ${ef(e)}`)}function eO(e){let t=ev("never",()=>!1);return new em({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){let n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${ef(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function eP(e){let t=Object.keys(e);return new em({type:"type",schema:e,*entries(r){if(eh(r))for(let n of t)yield[n,r[n],e[n]]},validator:e=>ed(e)||`Expected an object, but received: ${ef(e)}`,coercer:e=>ed(e)?{...e}:e})}function eB(e){let t=e.map(e=>e.type).join(" | ");return new em({type:"union",schema:null,coercer(t,r){for(let n of e){let[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){let i=[];for(let t of e){let[...e]=eg(r,t,n),[o]=e;if(!o[0])return[];for(let[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ef(r)}`,...i]}})}function eC(){return ev("unknown",()=>!0)}function eR(e,t,r){return new em({...e,coercer:(n,i)=>ew(n,t)[0]?e.coercer(n,i):e.coercer(r(n,i),i)})}var ej,e$=new Uint8Array(16);function eU(){if(!ej&&!(ej="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"u">typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ej(e$)}let ez=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function eL(e){return"string"==typeof e&&ez.test(e)}for(var eN=[],eD=0;eD<256;++eD)eN.push((eD+256).toString(16).substr(1));function eW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(eN[e[t+0]]+eN[e[t+1]]+eN[e[t+2]]+eN[e[t+3]]+"-"+eN[e[t+4]]+eN[e[t+5]]+"-"+eN[e[t+6]]+eN[e[t+7]]+"-"+eN[e[t+8]]+eN[e[t+9]]+"-"+eN[e[t+10]]+eN[e[t+11]]+eN[e[t+12]]+eN[e[t+13]]+eN[e[t+14]]+eN[e[t+15]]).toLowerCase();if(!eL(r))throw TypeError("Stringified UUID is invalid");return r}var eV,eK,eq=0,eF=0;function eH(e){if(!eL(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}function eG(e,t,r){function n(e,n,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=eH(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var u=0;u<16;++u)i[o+u]=a[u];return i}return eW(a)}try{n.name=e}catch{}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function eJ(e){return(e+64>>>9<<4)+14+1}function eY(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function eZ(e,t,r,n,i,o){var a;return eY((a=eY(eY(t,e),eY(n,o)))<<i|a>>>32-i,r)}function eX(e,t,r,n,i,o,a){return eZ(t&r|~t&n,e,t,i,o,a)}function eQ(e,t,r,n,i,o,a){return eZ(t&n|r&~n,e,t,i,o,a)}function e0(e,t,r,n,i,o,a){return eZ(t^r^n,e,t,i,o,a)}function e1(e,t,r,n,i,o,a){return eZ(r^(t|~n),e,t,i,o,a)}function e2(e,t){return e<<t|e>>>32-t}let e6=u(Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:eH,stringify:eW,v1:function(e,t,r){var n=t&&r||0,i=t||Array(16),o=(e=e||{}).node||eV,a=void 0!==e.clockseq?e.clockseq:eK;if(null==o||null==a){var u=e.random||(e.rng||eU)();null==o&&(o=eV=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==a&&(a=eK=(u[6]<<8|u[7])&16383)}var c=void 0!==e.msecs?e.msecs:Date.now(),l=void 0!==e.nsecs?e.nsecs:eF+1,h=c-eq+(l-eF)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||c>eq)&&void 0===e.nsecs&&(l=0),l>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");eq=c,eF=l,eK=a;var d=((268435455&(c+=122192928e5))*1e4+l)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=255&d;var f=c/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=255&f,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var p=0;p<6;++p)i[n+p]=o[p];return t||eW(i)},v3:eG("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n="0123456789abcdef",i=0;i<r;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(n.charAt(o>>>4&15)+n.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[eJ(t)-1]=t;for(var r=1732584193,n=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var u=r,c=n,l=i,h=o;r=eX(r,n,i,o,e[a],7,-680876936),o=eX(o,r,n,i,e[a+1],12,-389564586),i=eX(i,o,r,n,e[a+2],17,606105819),n=eX(n,i,o,r,e[a+3],22,-1044525330),r=eX(r,n,i,o,e[a+4],7,-176418897),o=eX(o,r,n,i,e[a+5],12,1200080426),i=eX(i,o,r,n,e[a+6],17,-1473231341),n=eX(n,i,o,r,e[a+7],22,-45705983),r=eX(r,n,i,o,e[a+8],7,1770035416),o=eX(o,r,n,i,e[a+9],12,-1958414417),i=eX(i,o,r,n,e[a+10],17,-42063),n=eX(n,i,o,r,e[a+11],22,-1990404162),r=eX(r,n,i,o,e[a+12],7,1804603682),o=eX(o,r,n,i,e[a+13],12,-40341101),i=eX(i,o,r,n,e[a+14],17,-1502002290),n=eX(n,i,o,r,e[a+15],22,1236535329),r=eQ(r,n,i,o,e[a+1],5,-165796510),o=eQ(o,r,n,i,e[a+6],9,-1069501632),i=eQ(i,o,r,n,e[a+11],14,643717713),n=eQ(n,i,o,r,e[a],20,-373897302),r=eQ(r,n,i,o,e[a+5],5,-701558691),o=eQ(o,r,n,i,e[a+10],9,38016083),i=eQ(i,o,r,n,e[a+15],14,-660478335),n=eQ(n,i,o,r,e[a+4],20,-405537848),r=eQ(r,n,i,o,e[a+9],5,568446438),o=eQ(o,r,n,i,e[a+14],9,-1019803690),i=eQ(i,o,r,n,e[a+3],14,-187363961),n=eQ(n,i,o,r,e[a+8],20,1163531501),r=eQ(r,n,i,o,e[a+13],5,-1444681467),o=eQ(o,r,n,i,e[a+2],9,-51403784),i=eQ(i,o,r,n,e[a+7],14,1735328473),n=eQ(n,i,o,r,e[a+12],20,-1926607734),r=e0(r,n,i,o,e[a+5],4,-378558),o=e0(o,r,n,i,e[a+8],11,-2022574463),i=e0(i,o,r,n,e[a+11],16,1839030562),n=e0(n,i,o,r,e[a+14],23,-35309556),r=e0(r,n,i,o,e[a+1],4,-1530992060),o=e0(o,r,n,i,e[a+4],11,1272893353),i=e0(i,o,r,n,e[a+7],16,-155497632),n=e0(n,i,o,r,e[a+10],23,-1094730640),r=e0(r,n,i,o,e[a+13],4,681279174),o=e0(o,r,n,i,e[a],11,-358537222),i=e0(i,o,r,n,e[a+3],16,-722521979),n=e0(n,i,o,r,e[a+6],23,76029189),r=e0(r,n,i,o,e[a+9],4,-640364487),o=e0(o,r,n,i,e[a+12],11,-421815835),i=e0(i,o,r,n,e[a+15],16,530742520),n=e0(n,i,o,r,e[a+2],23,-995338651),r=e1(r,n,i,o,e[a],6,-198630844),o=e1(o,r,n,i,e[a+7],10,1126891415),i=e1(i,o,r,n,e[a+14],15,-1416354905),n=e1(n,i,o,r,e[a+5],21,-57434055),r=e1(r,n,i,o,e[a+12],6,1700485571),o=e1(o,r,n,i,e[a+3],10,-1894986606),i=e1(i,o,r,n,e[a+10],15,-1051523),n=e1(n,i,o,r,e[a+1],21,-2054922799),r=e1(r,n,i,o,e[a+8],6,1873313359),o=e1(o,r,n,i,e[a+15],10,-30611744),i=e1(i,o,r,n,e[a+6],15,-1560198380),n=e1(n,i,o,r,e[a+13],21,1309151649),r=e1(r,n,i,o,e[a+4],6,-145523070),o=e1(o,r,n,i,e[a+11],10,-1120210379),i=e1(i,o,r,n,e[a+2],15,718787259),n=e1(n,i,o,r,e[a+9],21,-343485551),r=eY(r,u),n=eY(n,c),i=eY(i,l),o=eY(o,h)}return[r,n,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(eJ(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}),v4:function(e,t,r){var n=(e=e||{}).random||(e.rng||eU)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return eW(n)},v5:eG("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var i=0;i<n.length;++i)e.push(n.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),u=Array(a),c=0;c<a;++c){for(var l=new Uint32Array(16),h=0;h<16;++h)l[h]=e[64*c+4*h]<<24|e[64*c+4*h+1]<<16|e[64*c+4*h+2]<<8|e[64*c+4*h+3];u[c]=l}u[a-1][14]=(e.length-1)*8/4294967296,u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=(e.length-1)*8&4294967295;for(var d=0;d<a;++d){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=u[d][p];for(var g=16;g<80;++g)f[g]=e2(f[g-3]^f[g-8]^f[g-14]^f[g-16],1);for(var m=r[0],y=r[1],b=r[2],w=r[3],v=r[4],k=0;k<80;++k){var S=Math.floor(k/20),I=e2(m,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(S,y,b,w)+v+t[S]+f[k]>>>0;v=w,w=b,b=e2(y,30)>>>0,y=m,m=I}r[0]=r[0]+m>>>0,r[1]=r[1]+y>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+w>>>0,r[4]=r[4]+v>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}),validate:eL,version:function(e){if(!eL(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"}))),e8=a(function(){if(e7)return e4;e7=1;let e=e6.v4,t=function(){if(e5)return e3;e5=1;let e=e6.v4;return e3=function(t,r,n,i){if("string"!=typeof t)throw TypeError(t+" must be a string");let o="number"==typeof(i=i||{}).version?i.version:2;if(1!==o&&2!==o)throw TypeError(o+" must be 1 or 2");let a={method:t};if(2===o&&(a.jsonrpc="2.0"),r){if("object"!=typeof r&&!Array.isArray(r))throw TypeError(r+" must be an object, array or omitted");a.params=r}if(typeof n>"u"){let t="function"==typeof i.generator?i.generator:function(){return e()};a.id=t(a,i)}else 2===o&&null===n?i.notificationIdNull&&(a.id=null):a.id=n;return a}}(),r=function(t,n){if(!(this instanceof r))return new r(t,n);n||(n={}),this.options={reviver:"u">typeof n.reviver?n.reviver:null,replacer:"u">typeof n.replacer?n.replacer:null,generator:"u">typeof n.generator?n.generator:function(){return e()},version:"u">typeof n.version?n.version:2,notificationIdNull:"boolean"==typeof n.notificationIdNull&&n.notificationIdNull},this.callServer=t};return e4=r,r.prototype.request=function(e,r,n,i){let o;let a=this,u=null,c=Array.isArray(e)&&"function"==typeof r;if(1===this.options.version&&c)throw TypeError("JSON-RPC 1.0 does not support batching");if(c||!c&&e&&"object"==typeof e&&"function"==typeof r)i=r,u=e;else{"function"==typeof n&&(i=n,n=void 0);let o="function"==typeof i;try{u=t(e,r,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(o)return i(e);throw e}if(!o)return u}try{o=JSON.stringify(u,this.options.replacer)}catch(e){return i(e)}return this.callServer(o,function(e,t){a._parseResponse(e,t,i)}),u},r.prototype._parseResponse=function(e,t,r){let n;if(e){r(e);return}if(!t)return r();try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(!Array.isArray(n))return r(null,n.error,n.result);{let e=function(e){return"u">typeof e.error};return r(null,n.filter(e),n.filter(function(t){return!e(t)}))}}r(null,n)},e4}());var e3,e5,e4,e7,e9,te={exports:{}};let tt=a((e9||(e9=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var u=new i(n,o||e,a),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],u]:e._events[c].push(u):(e._events[c]=u,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function u(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),u.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},u.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=Array(o);i<o;i++)a[i]=n[i].fn;return a},u.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,i,o,a){var u=r?r+e:e;if(!this._events[u])return!1;var c,l,h=this._events[u],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,n),!0;case 4:return h.fn.call(h.context,t,n,i),!0;case 5:return h.fn.call(h.context,t,n,i,o),!0;case 6:return h.fn.call(h.context,t,n,i,o,a),!0}for(l=1,c=Array(d-1);l<d;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var f,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),d){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,n);break;case 4:h[l].fn.call(h[l].context,t,n,i);break;default:if(!c)for(f=1,c=Array(d-1);f<d;f++)c[f-1]=arguments[f];h[l].fn.apply(h[l].context,c)}}return!0},u.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var u=this._events[o];if(u.fn)u.fn!==t||i&&!u.once||n&&u.context!==n||a(this,o);else{for(var c=0,l=[],h=u.length;c<h;c++)(u[c].fn!==t||i&&!u[c].once||n&&u[c].context!==n)&&l.push(u[c]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u}(te)),te.exports));var tr=class extends tt{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){let n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}},tn=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},ti=class extends tt{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},u,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new tn,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(Error("socket not ready"));let a=this.generate_request_id(e,t);this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t||void 0,id:a}),n,e=>{if(e)return o(e);this.queue[a]={promise:[i,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(Error("reply timeout"))},r))})})}async login(e){let t=await this.call("rpc.login",e);if(!t)throw Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,n)=>{if(!this.ready)return n(Error("socket not ready"));this.socket.send(this.dataPack.encode({jsonrpc:"2.0",method:e,params:t}),e=>{if(e)return n(e);r()})})}async subscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);let t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=i.D.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);let t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then(()=>{this.emit.apply(this,t)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:r,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",r,n),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};let ts=k.utils.randomPrivateKey,to=()=>{let e=k.utils.randomPrivateKey(),t=ta(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},ta=k.getPublicKey;function tu(e){try{return k.ExtendedPoint.fromHex(e),!0}catch{return!1}}let tc=(e,t)=>k.sign(e,t.slice(0,32)),tl=k.verify,th=e=>i.D.isBuffer(e)?e:e instanceof Uint8Array?i.D.from(e.buffer,e.byteOffset,e.byteLength):i.D.from(e);class td{constructor(e){Object.assign(this,e)}encode(){return i.D.from(Q.serialize(tp,this))}static decode(e){return Q.deserialize(tp,this,e)}static decodeUnchecked(e){return Q.deserializeUnchecked(tp,this,e)}}class tf extends td{constructor(e){if(super(e),this.enum="",1!==Object.keys(e).length)throw Error("Enum can only take single value");Object.keys(e).map(e=>{this.enum=e})}}let tp=new Map,tg=1,tm=class e extends td{constructor(e){if(super({}),this._bn=void 0,void 0!==e._bn)this._bn=e._bn;else{if("string"==typeof e){let t=j.decode(e);if(32!=t.length)throw Error("Invalid public key input");this._bn=new C(t)}else this._bn=new C(e);if(this._bn.byteLength()>32)throw Error("Invalid public key input")}}static unique(){let t=new e(tg);return tg+=1,new e(t.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return j.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(i.D);if(32===e.length)return e;let t=i.D.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,r,n){let o=i.D.concat([t.toBuffer(),i.D.from(r),n.toBuffer()]);return new e((0,i.bC)(o))}static createProgramAddressSync(t,r){let n=i.D.alloc(0);t.forEach(function(e){if(e.length>32)throw TypeError("Max seed length exceeded");n=i.D.concat([n,th(e)])}),n=i.D.concat([n,r.toBuffer(),i.D.from("ProgramDerivedAddress")]);let o=(0,i.bC)(n);if(tu(o))throw Error("Invalid seeds, address must fall off the curve");return new e(o)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,n;for(;0!=r;){try{let o=e.concat(i.D.from([r]));n=this.createProgramAddressSync(o,t)}catch(e){if(e instanceof TypeError)throw e;r--;continue}return[n,r]}throw Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(t){return tu(new e(t).toBytes())}};tm.default=new tm("11111111111111111111111111111111"),tp.set(tm,{kind:"struct",fields:[["_bn","u256"]]});class ty{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){let t=th(e);if(64!==e.length)throw Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=th(ts()),this._publicKey=th(ta(this._secretKey))}get publicKey(){return new tm(this._publicKey)}get secretKey(){return i.D.concat([this._secretKey,this._publicKey],64)}}let tb=new tm("BPFLoader1111111111111111111111111111111111");class tw extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(tw.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class tv extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(tv.prototype,"name",{value:"TransactionExpiredTimeoutError"});class tk extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(tk.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class tS{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw Error("Account index overflow encountered during compilation");let t=new Map;this.keySegments().flat().forEach((e,r)=>{t.set(e.toBase58(),r)});let r=e=>{let r=t.get(e.toBase58());if(void 0===r)throw Error("Encountered an unknown instruction account key during compilation");return r};return e.map(e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map(e=>r(e.pubkey)),data:e.data}))}}let tI=(e="publicKey")=>et.blob(32,e),tE=(e="signature")=>et.blob(64,e),tA=(e="string")=>{let t=et.struct([et.u32("length"),et.u32("lengthPadding"),et.blob(et.offset(et.u32(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t);return t.decode=(e,t)=>r(e,t).chars.toString(),t.encode=(e,t,r)=>n({chars:i.D.from(e,"utf8")},t,r),t.alloc=e=>et.u32().span+et.u32().span+i.D.from(e,"utf8").length,t};function t_(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,(128&n)==0)break}return t}function tx(e,t){let r=t;for(;;){let t=127&r;if(0==(r>>=7)){e.push(t);break}t|=128,e.push(t)}}function tM(e,t){if(!e)throw Error(t||"Assertion failed")}class tT{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,n=e=>{let t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);for(let t of(i.isSigner=!0,i.isWritable=!0,e))for(let e of(n(t.programId).isInvoked=!0,t.keys)){let t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}return new tT(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];tM(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,e])=>e.isSigner&&e.isWritable),r=e.filter(([,e])=>e.isSigner&&!e.isWritable),n=e.filter(([,e])=>!e.isSigner&&e.isWritable),i=e.filter(([,e])=>!e.isSigner&&!e.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{tM(t.length>0,"Expected at least one writable signer key");let[e]=t[0];tM(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...t.map(([e])=>new tm(e)),...r.map(([e])=>new tm(e)),...n.map(([e])=>new tm(e)),...i.map(([e])=>new tm(e))]]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&e.isWritable),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,e=>!e.isSigner&&!e.isInvoked&&!e.isWritable);if(!(0===t.length&&0===n.length))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){let r=[],n=[];for(let[i,o]of this.keyMetaMap.entries())if(t(o)){let t=new tm(i),o=e.findIndex(e=>e.equals(t));o>=0&&(tM(o<256,"Max lookup table index exceeded"),r.push(o),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}let tO="Reached end of buffer unexpectedly";function tP(e){if(0===e.length)throw Error(tO);return e.shift()}function tB(e,...t){let[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw Error(tO);return e.splice(...t)}class tC{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(e=>new tm(e)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:j.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new tS(this.staticAccountKeys)}static compile(e){let[t,r]=tT.compile(e.instructions,e.payerKey).getMessageComponents(),n=new tS(r).compileInstructions(e.instructions).map(e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:j.encode(e.data)}));return new tC({header:t,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:n})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return e-t<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];tx(t,e);let r=this.instructions.map(e=>{let{accounts:t,programIdIndex:r}=e,n=Array.from(j.decode(e.data)),o=[];tx(o,t.length);let a=[];return tx(a,n.length),{programIdIndex:r,keyIndicesCount:i.D.from(o),keyIndices:t,dataLength:i.D.from(a),data:n}}),n=[];tx(n,r.length);let o=i.D.alloc(1232);i.D.from(n).copy(o);let a=n.length;r.forEach(e=>{let t=et.struct([et.u8("programIdIndex"),et.blob(e.keyIndicesCount.length,"keyIndicesCount"),et.seq(et.u8("keyIndex"),e.keyIndices.length,"keyIndices"),et.blob(e.dataLength.length,"dataLength"),et.seq(et.u8("userdatum"),e.data.length,"data")]).encode(e,o,a);a+=t}),o=o.slice(0,a);let u=et.struct([et.blob(1,"numRequiredSignatures"),et.blob(1,"numReadonlySignedAccounts"),et.blob(1,"numReadonlyUnsignedAccounts"),et.blob(t.length,"keyCount"),et.seq(tI("key"),e,"keys"),tI("recentBlockhash")]),c={numRequiredSignatures:i.D.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:i.D.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:i.D.from([this.header.numReadonlyUnsignedAccounts]),keyCount:i.D.from(t),keys:this.accountKeys.map(e=>th(e.toBytes())),recentBlockhash:j.decode(this.recentBlockhash)},l=i.D.alloc(2048),h=u.encode(c,l);return o.copy(l,h),l.slice(0,h+o.length)}static from(e){let t=[...e],r=tP(t);if(r!==(127&r))throw Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=tP(t),o=tP(t),a=t_(t),u=[];for(let e=0;e<a;e++){let e=tB(t,0,32);u.push(new tm(i.D.from(e)))}let c=tB(t,0,32),l=t_(t),h=[];for(let e=0;e<l;e++){let e=tP(t),r=t_(t),n=tB(t,0,r),o=t_(t),a=tB(t,0,o),u=j.encode(i.D.from(a));h.push({programIdIndex:e,accounts:n,data:u})}return new tC({header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:j.encode(i.D.from(c)),accountKeys:u,instructions:h})}}class tR{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw Error("Failed to get account keys because address table lookups were not resolved");return new tS(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r)return e-r<this.addressTableLookups.reduce((e,t)=>e+t.writableIndexes.length,0);if(!(e>=this.header.numRequiredSignatures))return e<t-this.header.numReadonlySignedAccounts;{let n=r-t-this.header.numReadonlyUnsignedAccounts;return e-t<n}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=e.find(e=>e.key.equals(r.accountKey));if(!n)throw Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let e of r.writableIndexes)if(e<n.state.addresses.length)t.writable.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);for(let e of r.readonlyIndexes)if(e<n.state.addresses.length)t.readonly.push(n.state.addresses[e]);else throw Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=tT.compile(e.instructions,e.payerKey),r=[],n={writable:[],readonly:[]};for(let i of e.addressLookupTableAccounts||[]){let e=t.extractTableLookup(i);if(void 0!==e){let[t,{writable:i,readonly:o}]=e;r.push(t),n.writable.push(...i),n.readonly.push(...o)}}let[i,o]=t.getMessageComponents(),a=new tS(o,n).compileInstructions(e.instructions);return new tR({header:i,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){let e=[];tx(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=[];tx(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),i=[];tx(i,this.addressTableLookups.length);let o=et.struct([et.u8("prefix"),et.struct([et.u8("numRequiredSignatures"),et.u8("numReadonlySignedAccounts"),et.u8("numReadonlyUnsignedAccounts")],"header"),et.blob(e.length,"staticAccountKeysLength"),et.seq(tI(),this.staticAccountKeys.length,"staticAccountKeys"),tI("recentBlockhash"),et.blob(r.length,"instructionsLength"),et.blob(t.length,"serializedInstructions"),et.blob(i.length,"addressTableLookupsLength"),et.blob(n.length,"serializedAddressTableLookups")]),a=new Uint8Array(1232),u=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(e=>e.toBytes()),recentBlockhash:j.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},a);return a.slice(0,u)}serializeInstructions(){let e=0,t=new Uint8Array(1232);for(let r of this.compiledInstructions){let n=[];tx(n,r.accountKeyIndexes.length);let i=[];tx(i,r.data.length);let o=et.struct([et.u8("programIdIndex"),et.blob(n.length,"encodedAccountKeyIndexesLength"),et.seq(et.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),et.blob(i.length,"encodedDataLength"),et.blob(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(1232);for(let r of this.addressTableLookups){let n=[];tx(n,r.writableIndexes.length);let i=[];tx(i,r.readonlyIndexes.length);let o=et.struct([tI("accountKey"),et.blob(n.length,"encodedWritableIndexesLength"),et.seq(et.u8(),r.writableIndexes.length,"writableIndexes"),et.blob(i.length,"encodedReadonlyIndexesLength"),et.seq(et.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=tP(t),n=127&r;tM(r!==n,"Expected versioned message but received legacy message"),tM(0===n,`Expected versioned message with version 0 but found version ${n}`);let i={numRequiredSignatures:tP(t),numReadonlySignedAccounts:tP(t),numReadonlyUnsignedAccounts:tP(t)},o=[],a=t_(t);for(let e=0;e<a;e++)o.push(new tm(tB(t,0,32)));let u=j.encode(tB(t,0,32)),c=t_(t),l=[];for(let e=0;e<c;e++){let e=tP(t),r=t_(t),n=tB(t,0,r),i=t_(t),o=new Uint8Array(tB(t,0,i));l.push({programIdIndex:e,accountKeyIndexes:n,data:o})}let h=t_(t),d=[];for(let e=0;e<h;e++){let e=new tm(tB(t,0,32)),r=t_(t),n=tB(t,0,r),i=t_(t),o=tB(t,0,i);d.push({accountKey:e,writableIndexes:n,readonlyIndexes:o})}return new tR({header:i,staticAccountKeys:o,recentBlockhash:u,compiledInstructions:l,addressTableLookups:d})}}let tj={deserializeMessageVersion(e){let t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{let t=tj.deserializeMessageVersion(e);if("legacy"===t)return tC.from(e);if(0===t)return tR.deserialize(e);throw Error(`Transaction message version ${t} deserialization is not supported`)}},t$=((iD={})[iD.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",iD[iD.PROCESSED=1]="PROCESSED",iD[iD.TIMED_OUT=2]="TIMED_OUT",iD[iD.NONCE_INVALID=3]="NONCE_INVALID",iD),tU=i.D.alloc(64).fill(0);class tz{constructor(e){this.keys=void 0,this.programId=void 0,this.data=i.D.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}let tL=class e{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e){if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(0===e.length)throw Error("No instructions");return e.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new tz(e))}),this}compileMessage(){let e,t,r;if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw Error("Transaction fee payer required");for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw Error(`Transaction instruction index ${e} has undefined program id`);let n=[],i=[];t.forEach(e=>{e.keys.forEach(e=>{i.push({...e})});let t=e.programId.toString();n.includes(t)||n.push(t)}),n.forEach(e=>{i.push({pubkey:new tm(e),isSigner:!1,isWritable:!1})});let o=[];i.forEach(e=>{let t=e.pubkey.toString(),r=o.findIndex(e=>e.pubkey.toString()===t);r>-1?(o[r].isWritable=o[r].isWritable||e.isWritable,o[r].isSigner=o[r].isSigner||e.isSigner):o.push(e)}),o.sort(function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});let a=o.findIndex(e=>e.pubkey.equals(r));if(a>-1){let[e]=o.splice(a,1);e.isSigner=!0,e.isWritable=!0,o.unshift(e)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let e of this.signatures){let t=o.findIndex(t=>t.pubkey.equals(e.publicKey));if(t>-1)o[t].isSigner||(o[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw Error(`unknown signer: ${e.publicKey.toString()}`)}let u=0,c=0,l=0,h=[],d=[];o.forEach(({pubkey:e,isSigner:t,isWritable:r})=>{t?(h.push(e.toString()),u+=1,r||(c+=1)):(d.push(e.toString()),r||(l+=1))});let f=h.concat(d),p=t.map(e=>{let{data:t,programId:r}=e;return{programIdIndex:f.indexOf(r.toString()),accounts:e.keys.map(e=>f.indexOf(e.pubkey.toString())),data:j.encode(t)}});return p.forEach(e=>{tM(e.programIdIndex>=0),e.accounts.forEach(e=>tM(e>=0))}),new tC({header:{numRequiredSignatures:u,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:f,recentBlockhash:e,instructions:p})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((e,r)=>t[r].equals(e.publicKey))||(this.signatures=t.map(e=>({signature:null,publicKey:e}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw Error("No signers");let t=new Set;this.signatures=e.filter(e=>{let r=e.toString();return!t.has(r)&&(t.add(r),!0)}).map(e=>({signature:null,publicKey:e}))}sign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map(e=>({signature:null,publicKey:e.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw Error("No signers");let t=new Set,r=[];for(let n of e){let e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}let n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(e=>{let t=tc(r,e.secretKey);this._addSignature(e.publicKey,th(t))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){tM(64===t.length);let r=this.signatures.findIndex(t=>e.equals(t.publicKey));if(r<0)throw Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=i.D.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):tl(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){let e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`
Invalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map(e=>e.toBase58()).join("`, `")}\`].`),e.missing&&(t+=`
Missing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map(e=>e.toBase58()).join("`, `")}\`].`),Error(t)}}return this._serialize(n)}_serialize(e){let{signatures:t}=this,r=[];tx(r,t.length);let n=r.length+64*t.length+e.length,o=i.D.alloc(n);return tM(t.length<256),i.D.from(r).copy(o,0),t.forEach(({signature:e},t)=>{null!==e&&(tM(64===e.length,"signature has invalid length"),i.D.from(e).copy(o,r.length+64*t))}),e.copy(o,r.length+64*t.length),tM(o.length<=1232,`Transaction too large: ${o.length} > 1232`),o}get keys(){return tM(1===this.instructions.length),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return tM(1===this.instructions.length),this.instructions[0].programId}get data(){return tM(1===this.instructions.length),this.instructions[0].data}static from(t){let r=[...t],n=t_(r),o=[];for(let e=0;e<n;e++){let e=tB(r,0,64);o.push(j.encode(i.D.from(e)))}return e.populate(tC.from(r),o)}static populate(t,r=[]){let n=new e;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),r.forEach((e,r)=>{let i={signature:e==j.encode(tU)?null:j.decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)}),t.instructions.forEach(e=>{let r=e.accounts.map(e=>{let r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some(e=>e.publicKey.toString()===r.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});n.instructions.push(new tz({keys:r,programId:t.accountKeys[e.programIdIndex],data:j.decode(e.data)}))}),n._message=t,n._json=n.toJSON(),n}};class tN{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){let{header:r,compiledInstructions:n,recentBlockhash:i}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=r,c=o-a;tM(c>0,"Message header is invalid");let l=e.staticAccountKeys.length-o-u;tM(l>=0,"Message header is invalid");let h=e.getAccountKeys(t),d=h.get(0);if(void 0===d)throw Error("Failed to decompile message because no account keys were found");let f=[];for(let e of n){let t=[];for(let n of e.accountKeyIndexes){let e;let i=h.get(n);if(void 0===i)throw Error(`Failed to find key for account key index ${n}`);e=n<o?n<c:n<h.staticAccountKeys.length?n-o<l:n-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,t.push({pubkey:i,isSigner:n<r.numRequiredSignatures,isWritable:e})}let n=h.get(e.programIdIndex);if(void 0===n)throw Error(`Failed to find program id for program id index ${e.programIdIndex}`);f.push(new tz({programId:n,data:th(e.data),keys:t}))}return new tN({payerKey:d,instructions:f,recentBlockhash:i})}compileToLegacyMessage(){return tC.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return tR.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class tD{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)tM(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){let e=this.message.serialize(),t=[];tx(t,this.signatures.length);let r=et.struct([et.blob(t.length,"encodedSignaturesLength"),et.seq(tE(),this.signatures.length,"signatures"),et.blob(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e],r=[],n=t_(t);for(let e=0;e<n;e++)r.push(new Uint8Array(tB(t,0,64)));return new tD(tj.deserialize(new Uint8Array(t)),r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of e){let e=r.findIndex(e=>e.equals(n.publicKey));tM(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=tc(t,n.secretKey)}}addSignature(e,t){tM(64===t.byteLength,"Signature must be 64 bytes long");let r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(t=>t.equals(e));tM(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}let tW=new tm("SysvarC1ock11111111111111111111111111111111"),tV=new tm("SysvarEpochSchedu1e111111111111111111111111"),tK=new tm("Sysvar1nstructions1111111111111111111111111"),tq=new tm("SysvarRecentB1ockHashes11111111111111111111"),tF=new tm("SysvarRent111111111111111111111111111111111"),tH=new tm("SysvarRewards111111111111111111111111111111"),tG=new tm("SysvarS1otHashes111111111111111111111111111"),tJ=new tm("SysvarS1otHistory11111111111111111111111111"),tY=new tm("SysvarStakeHistory1111111111111111111111111");class tZ extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){let i;let o=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";switch(e){case"send":i=`Transaction ${t} resulted in an error. 
${r}. `+o+a;break;case"simulate":i=`Simulation failed. 
Message: ${r}. 
`+o+a;break;default:i=`Unknown action '${e}'`}super(i),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(null!=e&&"object"==typeof e&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(e=>{if(e&&e.meta&&e.meta.logMessages){let r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class tX extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function tQ(e,t,r,n){let i;let o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},a=await e.sendTransaction(t,r,o);if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)i=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:a,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){let{nonceInstruction:r}=t.nonceInfo,o=r.keys[0].pubkey;i=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:o,nonceValue:t.nonceInfo.nonce,signature:a},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),i=(await e.confirmTransaction(a,n&&n.commitment)).value;if(i.err)throw null!=a?new tZ({action:"send",signature:a,transactionMessage:`Status: (${JSON.stringify(i)})`}):Error(`Transaction ${a} failed (${JSON.stringify(i)})`);return a}function t0(e){return new Promise(t=>setTimeout(t,e))}function t1(e,t){let r=e.layout.span>=0?e.layout.span:function e(t,r){let n=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(r[t.property]);if("count"in t&&"elementLayout"in t){let e=r[t.property];if(Array.isArray(e))return e.length*n(t.elementLayout)}else if("fields"in t)return e({layout:t},r[t.property]);return 0},i=0;return t.layout.fields.forEach(e=>{i+=n(e)}),i}(e,t),n=i.D.alloc(r),o=Object.assign({instruction:e.index},t);return e.layout.encode(o,n),n}function t2(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.instruction!==e.index)throw Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${e.index}`);return r}let t6=et.nu64("lamportsPerSignature"),t8=et.struct([et.u32("version"),et.u32("state"),tI("authorizedPubkey"),tI("nonce"),et.struct([t6],"feeCalculator")]),t3=t8.span;class t5{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=t8.decode(th(e),0);return new t5({authorizedPubkey:new tm(t.authorizedPubkey),nonce:new tm(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function t4(e){let t=et.blob(8,e),r=t.decode.bind(t),n=t.encode.bind(t),i=ec();return t.decode=(e,t)=>{let n=r(e,t);return i.decode(n)},t.encode=(e,t,r)=>n(i.encode(e),t,r),t}class t7{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=et.u32("instruction").decode(e.data);for(let[e,n]of Object.entries(t9))if(n.index==r){t=e;break}if(!t)throw Error("Instruction type incorrect; not a SystemInstruction");return t}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t,space:r,programId:n}=t2(t9.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new tm(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t}=t2(t9.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t,seed:r,programId:n}=t2(t9.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new tm(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:t}=t2(t9.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,space:n,programId:i}=t2(t9.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new tm(t),seed:r,space:n,programId:new tm(i)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:t}=t2(t9.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new tm(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,programId:n}=t2(t9.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new tm(t),seed:r,programId:new tm(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:t,seed:r,lamports:n,space:i,programId:o}=t2(t9.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new tm(t),seed:r,lamports:n,space:i,programId:new tm(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:t}=t2(t9.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new tm(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),t2(t9.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=t2(t9.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t}=t2(t9.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new tm(t)}}static checkProgramId(e){if(!e.equals(re.programId))throw Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}let t9=Object.freeze({Create:{index:0,layout:et.struct([et.u32("instruction"),et.ns64("lamports"),et.ns64("space"),tI("programId")])},Assign:{index:1,layout:et.struct([et.u32("instruction"),tI("programId")])},Transfer:{index:2,layout:et.struct([et.u32("instruction"),t4("lamports")])},CreateWithSeed:{index:3,layout:et.struct([et.u32("instruction"),tI("base"),tA("seed"),et.ns64("lamports"),et.ns64("space"),tI("programId")])},AdvanceNonceAccount:{index:4,layout:et.struct([et.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:et.struct([et.u32("instruction"),et.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:et.struct([et.u32("instruction"),tI("authorized")])},AuthorizeNonceAccount:{index:7,layout:et.struct([et.u32("instruction"),tI("authorized")])},Allocate:{index:8,layout:et.struct([et.u32("instruction"),et.ns64("space")])},AllocateWithSeed:{index:9,layout:et.struct([et.u32("instruction"),tI("base"),tA("seed"),et.ns64("space"),tI("programId")])},AssignWithSeed:{index:10,layout:et.struct([et.u32("instruction"),tI("base"),tA("seed"),tI("programId")])},TransferWithSeed:{index:11,layout:et.struct([et.u32("instruction"),t4("lamports"),tA("seed"),tI("programId")])},UpgradeNonceAccount:{index:12,layout:et.struct([et.u32("instruction")])}});class re{constructor(){}static createAccount(e){let t=t1(t9.Create,{lamports:e.lamports,space:e.space,programId:th(e.programId.toBuffer())});return new tz({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=t1(t9.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:th(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=t1(t9.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new tz({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=t1(t9.AssignWithSeed,{base:th(e.basePubkey.toBuffer()),seed:e.seed,programId:th(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=t1(t9.Assign,{programId:th(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new tz({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=t1(t9.CreateWithSeed,{base:th(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:th(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new tz({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){let t=new tL;"basePubkey"in e&&"seed"in e?t.add(re.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:t3,programId:this.programId})):t.add(re.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:t3,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=t1(t9.InitializeNonceAccount,{authorized:th(e.authorizedPubkey.toBuffer())});return new tz({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:tq,isSigner:!1,isWritable:!1},{pubkey:tF,isSigner:!1,isWritable:!1}],programId:this.programId,data:t})}static nonceAdvance(e){let t=t1(t9.AdvanceNonceAccount);return new tz({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:tq,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceWithdraw(e){let t=t1(t9.WithdrawNonceAccount,{lamports:e.lamports});return new tz({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:tq,isSigner:!1,isWritable:!1},{pubkey:tF,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){let t=t1(t9.AuthorizeNonceAccount,{authorized:th(e.newAuthorizedPubkey.toBuffer())});return new tz({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=t1(t9.AllocateWithSeed,{base:th(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:th(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=t1(t9.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new tz({keys:r,programId:this.programId,data:t})}}re.programId=new tm("11111111111111111111111111111111");class rt{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/rt.chunkSize)+1+1)}static async load(e,t,r,n,o){{let i=await e.getMinimumBalanceForRentExemption(o.length),a=await e.getAccountInfo(r.publicKey,"confirmed"),u=null;if(null!==a){if(a.executable)return console.error("Program load failed, account is already executable"),!1;a.data.length!==o.length&&(u=u||new tL).add(re.allocate({accountPubkey:r.publicKey,space:o.length})),a.owner.equals(n)||(u=u||new tL).add(re.assign({accountPubkey:r.publicKey,programId:n})),a.lamports<i&&(u=u||new tL).add(re.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:i-a.lamports}))}else u=new tL().add(re.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:i>0?i:1,space:o.length,programId:n}));null!==u&&await tQ(e,u,[t,r],{commitment:"confirmed"})}let a=et.struct([et.u32("instruction"),et.u32("offset"),et.u32("bytesLength"),et.u32("bytesLengthPadding"),et.seq(et.u8("byte"),et.offset(et.u32(),-8),"bytes")]),u=rt.chunkSize,c=0,l=o,h=[];for(;l.length>0;){let o=l.slice(0,u),d=i.D.alloc(u+16);a.encode({instruction:0,offset:c,bytes:o,bytesLength:0,bytesLengthPadding:0},d);let f=new tL().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:d});h.push(tQ(e,f,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await t0(250),c+=u,l=l.slice(u)}await Promise.all(h);{let o=et.struct([et.u32("instruction")]),a=i.D.alloc(o.span);o.encode({instruction:1},a);let u=new tL().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:tF,isSigner:!1,isWritable:!1}],programId:n,data:a}),c="processed",l=await e.sendTransaction(u,[t,r],{preflightCommitment:c}),{context:h,value:d}=await e.confirmTransaction({signature:l,lastValidBlockHeight:u.lastValidBlockHeight,blockhash:u.recentBlockhash},c);if(d.err)throw Error(`Transaction ${l} failed (${JSON.stringify(d)})`);for(;;){try{if(await e.getSlot({commitment:c})>h.slot)break}catch{}await new Promise(e=>setTimeout(e,Math.round(200)))}}return!0}}rt.chunkSize=932;let rr=new tm("BPFLoader2111111111111111111111111111111111");class rn{static getMinNumSignatures(e){return rt.getMinNumSignatures(e)}static load(e,t,r,n,i){return rt.load(e,t,r,i,n)}}var ri=(iW=function(){if(iK)return iV;iK=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};return iV=function(r){var n=function r(n,i){var o,a,u,c,l,h,d;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(d=e.call(n))){for(u="[",a=n.length-1,o=0;o<a;o++)u+=r(n[o],!0)+",";return a>-1&&(u+=r(n[o],!0)),u+"]"}if("[object Object]"!==d)return JSON.stringify(n);for(a=(c=t(n).sort()).length,u="",o=0;o<a;)void 0!==(h=r(n[l=c[o]],!1))&&(u&&(u+=","),u+=JSON.stringify(l)+":"+h),o++;return"{"+u+"}";case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}(r,!1);if(void 0!==n)return""+n}}())&&iW.__esModule&&Object.prototype.hasOwnProperty.call(iW,"default")?iW.default:iW;function rs(e){let t=0;for(;e>1;)e/=2,t++;return t}class ro{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){var t;let r=rs(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,(t|=t>>32)+1))-rs(32)-1,n=this.getSlotsInEpoch(r);return[r,e-(n-32)]}{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*32:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+rs(32)):this.slotsPerEpoch}}var ra=globalThis.fetch;class ru extends ti{constructor(e,t,r){super(e=>{let r=new tr(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in r?this.underlyingSocket=r.socket:this.underlyingSocket=r,r},e,t,r),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class rc{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(rl,e),r=e.length-56;tM(r>=0,"lookup table is invalid"),tM(r%32==0,"lookup table is invalid");let{addresses:n}=et.struct([et.seq(tI(),r/32,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new tm(t.authority[0]):void 0,addresses:n.map(e=>new tm(e))}}}let rl={index:1,layout:et.struct([et.u32("typeIndex"),t4("deactivationSlot"),et.nu64("lastExtendedSlot"),et.u8("lastExtendedStartIndex"),et.u8(),et.seq(tI(),et.offset(et.u8(),-1),"authority")])},rh=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,rd=eR(eI(tm),eT(),e=>new tm(e)),rf=eO([eT(),eE("base64")]),rp=eR(eI(i.D),rf,e=>i.D.from(e[0],"base64"));function rg(e){let t,r;if("string"==typeof e)t=e;else if(e){let{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function rm(e){return e.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function ry(e){return eB([eP({jsonrpc:eE("2.0"),id:eT(),result:e}),eP({jsonrpc:eE("2.0"),id:eT(),error:eP({code:eC(),message:eT(),data:ex(ev("any",()=>!0))})})])}let rb=ry(eC());function rw(e){return eR(ry(e),rb,t=>"error"in t?t:{...t,result:eb(t.result,e)})}function rv(e){return rw(eP({context:eP({slot:e_()}),value:e}))}function rk(e){return eP({context:eP({slot:e_()}),value:e})}function rS(e,t){return 0===e?new tR({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new tm(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:j.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new tC(t)}let rI=eP({foundation:e_(),foundationTerm:e_(),initial:e_(),taper:e_(),terminal:e_()}),rE=rw(ek(eA(eP({epoch:e_(),effectiveSlot:e_(),amount:e_(),postBalance:e_(),commission:ex(eA(e_()))})))),rA=ek(eP({slot:e_(),prioritizationFee:e_()})),r_=eP({total:e_(),validator:e_(),foundation:e_(),epoch:e_()}),rx=eP({epoch:e_(),slotIndex:e_(),slotsInEpoch:e_(),absoluteSlot:e_(),blockHeight:ex(e_()),transactionCount:ex(e_())}),rM=eP({slotsPerEpoch:e_(),leaderScheduleSlotOffset:e_(),warmup:eS(),firstNormalEpoch:e_(),firstNormalSlot:e_()}),rT=eM(eT(),ek(e_())),rO=eA(eB([eP({}),eT()])),rP=eP({err:rO}),rB=eE("receivedSignature"),rC=eP({"solana-core":eT(),"feature-set":ex(e_())}),rR=eP({program:eT(),programId:rd,parsed:eC()}),rj=eP({programId:rd,accounts:ek(rd),data:eT()}),r$=rv(eP({err:eA(eB([eP({}),eT()])),logs:eA(ek(eT())),accounts:ex(eA(ek(eA(eP({executable:eS(),owner:eT(),lamports:e_(),data:ek(eT()),rentEpoch:ex(e_())}))))),unitsConsumed:ex(e_()),returnData:ex(eA(eP({programId:eT(),data:eO([eT(),eE("base64")])}))),innerInstructions:ex(eA(ek(eP({index:e_(),instructions:ek(eB([rR,rj]))}))))})),rU=rv(eP({byIdentity:eM(eT(),ek(e_())),range:eP({firstSlot:e_(),lastSlot:e_()})})),rz=rw(rI),rL=rw(r_),rN=rw(rA),rD=rw(rx),rW=rw(rM),rV=rw(rT),rK=rw(e_()),rq=rv(eP({total:e_(),circulating:e_(),nonCirculating:e_(),nonCirculatingAccounts:ek(rd)})),rF=eP({amount:eT(),uiAmount:eA(e_()),decimals:e_(),uiAmountString:ex(eT())}),rH=rv(ek(eP({address:rd,amount:eT(),uiAmount:eA(e_()),decimals:e_(),uiAmountString:ex(eT())}))),rG=rv(ek(eP({pubkey:rd,account:eP({executable:eS(),owner:rd,lamports:e_(),data:rp,rentEpoch:e_()})}))),rJ=eP({program:eT(),parsed:eC(),space:e_()}),rY=rv(ek(eP({pubkey:rd,account:eP({executable:eS(),owner:rd,lamports:e_(),data:rJ,rentEpoch:e_()})}))),rZ=rv(ek(eP({lamports:e_(),address:rd}))),rX=eP({executable:eS(),owner:rd,lamports:e_(),data:rp,rentEpoch:e_()}),rQ=eP({pubkey:rd,account:rX}),r0=eR(eB([eI(i.D),rJ]),eB([rf,rJ]),e=>Array.isArray(e)?eb(e,rp):e),r1=eP({executable:eS(),owner:rd,lamports:e_(),data:r0,rentEpoch:e_()}),r2=eP({pubkey:rd,account:r1}),r6=eP({state:eB([eE("active"),eE("inactive"),eE("activating"),eE("deactivating")]),active:e_(),inactive:e_()}),r8=rw(ek(eP({signature:eT(),slot:e_(),err:rO,memo:eA(eT()),blockTime:ex(eA(e_()))}))),r3=rw(ek(eP({signature:eT(),slot:e_(),err:rO,memo:eA(eT()),blockTime:ex(eA(e_()))}))),r5=eP({subscription:e_(),result:rk(rX)}),r4=eP({pubkey:rd,account:rX}),r7=eP({subscription:e_(),result:rk(r4)}),r9=eP({parent:e_(),slot:e_(),root:e_()}),ne=eP({subscription:e_(),result:r9}),nt=eB([eP({type:eB([eE("firstShredReceived"),eE("completed"),eE("optimisticConfirmation"),eE("root")]),slot:e_(),timestamp:e_()}),eP({type:eE("createdBank"),parent:e_(),slot:e_(),timestamp:e_()}),eP({type:eE("frozen"),slot:e_(),timestamp:e_(),stats:eP({numTransactionEntries:e_(),numSuccessfulTransactions:e_(),numFailedTransactions:e_(),maxTransactionsPerEntry:e_()})}),eP({type:eE("dead"),slot:e_(),timestamp:e_(),err:eT()})]),nr=eP({subscription:e_(),result:nt}),nn=eP({subscription:e_(),result:rk(eB([rP,rB]))}),ni=eP({subscription:e_(),result:e_()}),ns=eP({pubkey:eT(),gossip:eA(eT()),tpu:eA(eT()),rpc:eA(eT()),version:eA(eT())}),no=eP({votePubkey:eT(),nodePubkey:eT(),activatedStake:e_(),epochVoteAccount:eS(),epochCredits:ek(eO([e_(),e_(),e_()])),commission:e_(),lastVote:e_(),rootSlot:eA(e_())}),na=rw(eP({current:ek(no),delinquent:ek(no)})),nu=eB([eE("processed"),eE("confirmed"),eE("finalized")]),nc=eP({slot:e_(),confirmations:eA(e_()),err:rO,confirmationStatus:ex(nu)}),nl=rv(ek(eA(nc))),nh=rw(e_()),nd=eP({accountKey:rd,writableIndexes:ek(e_()),readonlyIndexes:ek(e_())}),nf=eP({signatures:ek(eT()),message:eP({accountKeys:ek(eT()),header:eP({numRequiredSignatures:e_(),numReadonlySignedAccounts:e_(),numReadonlyUnsignedAccounts:e_()}),instructions:ek(eP({accounts:ek(e_()),data:eT(),programIdIndex:e_()})),recentBlockhash:eT(),addressTableLookups:ex(ek(nd))})}),np=eP({pubkey:rd,signer:eS(),writable:eS(),source:ex(eB([eE("transaction"),eE("lookupTable")]))}),ng=eP({accountKeys:ek(np),signatures:ek(eT())}),nm=eP({parsed:eC(),program:eT(),programId:rd}),ny=eP({accounts:ek(rd),data:eT(),programId:rd}),nb=eR(eB([ny,nm]),eB([eP({parsed:eC(),program:eT(),programId:eT()}),eP({accounts:ek(eT()),data:eT(),programId:eT()})]),e=>"accounts"in e?eb(e,ny):eb(e,nm)),nw=eP({signatures:ek(eT()),message:eP({accountKeys:ek(np),instructions:ek(nb),recentBlockhash:eT(),addressTableLookups:ex(eA(ek(nd)))})}),nv=eP({accountIndex:e_(),mint:eT(),owner:ex(eT()),programId:ex(eT()),uiTokenAmount:rF}),nk=eP({writable:ek(rd),readonly:ek(rd)}),nS=eP({err:rO,fee:e_(),innerInstructions:ex(eA(ek(eP({index:e_(),instructions:ek(eP({accounts:ek(e_()),data:eT(),programIdIndex:e_()}))})))),preBalances:ek(e_()),postBalances:ek(e_()),logMessages:ex(eA(ek(eT()))),preTokenBalances:ex(eA(ek(nv))),postTokenBalances:ex(eA(ek(nv))),loadedAddresses:ex(nk),computeUnitsConsumed:ex(e_()),costUnits:ex(e_())}),nI=eP({err:rO,fee:e_(),innerInstructions:ex(eA(ek(eP({index:e_(),instructions:ek(nb)})))),preBalances:ek(e_()),postBalances:ek(e_()),logMessages:ex(eA(ek(eT()))),preTokenBalances:ex(eA(ek(nv))),postTokenBalances:ex(eA(ek(nv))),loadedAddresses:ex(nk),computeUnitsConsumed:ex(e_()),costUnits:ex(e_())}),nE=eB([eE(0),eE("legacy")]),nA=eP({pubkey:eT(),lamports:e_(),postBalance:eA(e_()),rewardType:eA(eT()),commission:ex(eA(e_()))}),n_=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),transactions:ek(eP({transaction:nf,meta:eA(nS),version:ex(nE)})),rewards:ex(ek(nA)),blockTime:eA(e_()),blockHeight:eA(e_())}))),nx=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),rewards:ex(ek(nA)),blockTime:eA(e_()),blockHeight:eA(e_())}))),nM=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),transactions:ek(eP({transaction:ng,meta:eA(nS),version:ex(nE)})),rewards:ex(ek(nA)),blockTime:eA(e_()),blockHeight:eA(e_())}))),nT=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),transactions:ek(eP({transaction:nw,meta:eA(nI),version:ex(nE)})),rewards:ex(ek(nA)),blockTime:eA(e_()),blockHeight:eA(e_())}))),nO=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),transactions:ek(eP({transaction:ng,meta:eA(nI),version:ex(nE)})),rewards:ex(ek(nA)),blockTime:eA(e_()),blockHeight:eA(e_())}))),nP=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),rewards:ex(ek(nA)),blockTime:eA(e_()),blockHeight:eA(e_())}))),nB=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),transactions:ek(eP({transaction:nf,meta:eA(nS)})),rewards:ex(ek(nA)),blockTime:eA(e_())}))),nC=rw(eA(eP({blockhash:eT(),previousBlockhash:eT(),parentSlot:e_(),signatures:ek(eT()),blockTime:eA(e_())}))),nR=rw(eA(eP({slot:e_(),meta:eA(nS),blockTime:ex(eA(e_())),transaction:nf,version:ex(nE)}))),nj=rw(eA(eP({slot:e_(),transaction:nw,meta:eA(nI),blockTime:ex(eA(e_())),version:ex(nE)}))),n$=rv(eP({blockhash:eT(),lastValidBlockHeight:e_()})),nU=rv(eS()),nz=rw(ek(eP({slot:e_(),numTransactions:e_(),numSlots:e_(),samplePeriodSecs:e_()}))),nL=rv(eA(eP({feeCalculator:eP({lamportsPerSignature:e_()})}))),nN=rw(eT()),nD=rw(eT()),nW=eP({err:rO,logs:ek(eT()),signature:eT()}),nV=eP({result:rk(nW),subscription:e_()}),nK={"solana-client":"js/1.0.0-maintenance"};class nq{constructor(e,t){var r,n;let i,o,a,u,c,l;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let e={};return async t=>{let{commitment:r,config:n}=rg(t),i=this._buildArgs([],r,void 0,n),o=ri(i);return e[o]=e[o]??(async()=>{try{let e=await this._rpcRequest("getBlockHeight",i),t=eb(e,rw(e_()));if("error"in t)throw new tX(t.error,"failed to get block height information");return t.result}finally{delete e[o]}})(),await e[o]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,i=t.wsEndpoint,o=t.httpHeaders,a=t.fetch,u=t.fetchMiddleware,c=t.disableRetryOnRateLimit,l=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=i||function(e){let t=e.match(rh);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);let[r,n,i,o]=t,a=e.startsWith("https:")?"wss:":"ws:",u=null==i?null:parseInt(i.slice(1),10),c=null==u?"":`:${u+1}`;return`${a}//${n}${c}${o}`}(e),this._rpcClient=function(e,t,r,n,i,o){let a,u;let c=r||ra;return null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(u=async(e,t)=>{let r=await new Promise((r,i)=>{try{n(e,t,(e,t)=>r([e,t]))}catch(e){i(e)}});return await c(...r)}),new e8(async(r,n)=>{let o={method:"POST",body:r,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},nK)};try{let t=5,r,a=500;for(;r=u?await u(e,o):await c(e,o),!(429!==r.status||!0===i||(t-=1,0===t));)console.error(`Server responded with ${r.status} ${r.statusText}.  Retrying after ${a}ms delay...`),await t0(a),a*=2;let l=await r.text();r.ok?n(null,l):n(Error(`${r.status} ${r.statusText}: ${l}`))}catch(e){e instanceof Error&&n(e)}},{})}(e,o,a,u,c,l),this._rpcRequest=(r=this._rpcClient,(e,t)=>new Promise((n,i)=>{r.request(e,t,(e,t)=>{if(e){i(e);return}n(t)})})),this._rpcBatchRequest=(n=this._rpcClient,e=>new Promise((t,r)=>{0===e.length&&t([]);let i=e.map(e=>n.request(e.methodName,e.args));n.request(i,(e,n)=>{if(e){r(e);return}t(n)})})),this._rpcWebSocket=new ru(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgs([e.toBase58()],r,void 0,n),o=eb(await this._rpcRequest("getBalance",i),rv(e_()));if("error"in o)throw new tX(o.error,`failed to get balance for ${e.toBase58()}`);return o.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get balance of account "+e.toBase58()+": "+t)})}async getBlockTime(e){let t=eb(await this._rpcRequest("getBlockTime",[e]),rw(eA(e_())));if("error"in t)throw new tX(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){let e=eb(await this._rpcRequest("minimumLedgerSlot",[]),rw(e_()));if("error"in e)throw new tX(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){let e=eb(await this._rpcRequest("getFirstAvailableBlock",[]),rK);if("error"in e)throw new tX(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};let r=eb(await this._rpcRequest("getSupply",[t]),rq);if("error"in r)throw new tX(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){let r=this._buildArgs([e.toBase58()],t),n=eb(await this._rpcRequest("getTokenSupply",r),rv(rF));if("error"in n)throw new tX(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){let r=this._buildArgs([e.toBase58()],t),n=eb(await this._rpcRequest("getTokenAccountBalance",r),rv(rF));if("error"in n)throw new tX(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){let{commitment:n,config:i}=rg(r),o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});let a=this._buildArgs(o,n,"base64",i),u=eb(await this._rpcRequest("getTokenAccountsByOwner",a),rG);if("error"in u)throw new tX(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});let i=this._buildArgs(n,r,"jsonParsed"),o=eb(await this._rpcRequest("getTokenAccountsByOwner",i),rY);if("error"in o)throw new tX(o.error,`failed to get token accounts owned by account ${e.toBase58()}`);return o.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=eb(await this._rpcRequest("getLargestAccounts",r),rZ);if("error"in n)throw new tX(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){let r=this._buildArgs([e.toBase58()],t),n=eb(await this._rpcRequest("getTokenLargestAccounts",r),rH);if("error"in n)throw new tX(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgs([e.toBase58()],r,"base64",n),o=eb(await this._rpcRequest("getAccountInfo",i),rv(eA(rX)));if("error"in o)throw new tX(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getParsedAccountInfo(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=eb(await this._rpcRequest("getAccountInfo",i),rv(eA(r1)));if("error"in o)throw new tX(o.error,`failed to get info about account ${e.toBase58()}`);return o.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){let{commitment:r,config:n}=rg(t),i=e.map(e=>e.toBase58()),o=this._buildArgs([i],r,"jsonParsed",n),a=eb(await this._rpcRequest("getMultipleAccounts",o),rv(ek(eA(r1))));if("error"in a)throw new tX(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:r,config:n}=rg(t),i=e.map(e=>e.toBase58()),o=this._buildArgs([i],r,"base64",n),a=eb(await this._rpcRequest("getMultipleAccounts",o),rv(ek(eA(rX))));if("error"in a)throw new tX(a.error,`failed to get info for accounts ${i}`);return a.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){let{commitment:n,config:i}=rg(t),o=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:r??i?.epoch}),a=eb(await this._rpcRequest("getStakeActivation",o),rw(r6));if("error"in a)throw new tX(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result}async getProgramAccounts(e,t){let{commitment:r,config:n}=rg(t),{encoding:i,...o}=n||{},a=this._buildArgs([e.toBase58()],r,i||"base64",{...o,...o.filters?{filters:rm(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),c=ek(rQ),l=!0===o.withContext?eb(u,rv(c)):eb(u,rw(c));if("error"in l)throw new tX(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),o=eb(await this._rpcRequest("getProgramAccounts",i),rw(ek(r2)));if("error"in o)throw new tX(o.error,`failed to get accounts owned by program ${e.toBase58()}`);return o.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{n=j.decode(r)}catch{throw Error("signature must be base58 encoded: "+r)}return tM(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise((o,a)=>{try{r=this.onSignature(t,(e,t)=>{r=void 0,o({__type:t$.PROCESSED,response:{context:t,value:e}})},e);let u=new Promise(e=>{null==r?e():n=this._onSubscriptionStateChange(r,t=>{"subscribed"===t&&e()})});(async()=>{if(await u,i)return;let r=await this.getSignatureStatus(t);if(i||null==r)return;let{context:n,value:c}=r;if(null!=c){if(c?.err)a(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,o({__type:t$.PROCESSED,response:{context:n,value:c}})}}})()}catch(e){a(e)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i,o=!1,a=new Promise(t=>{let n=async()=>{try{return await this.getBlockHeight(e)}catch{return -1}};(async()=>{let e=await n();if(!o){for(;e<=r;)if(await t0(1e3),o||(e=await n(),o))return;t({__type:t$.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),l=this.getCancellationPromise(t);try{let e=await Promise.race([l,c,a]);if(e.__type===t$.PROCESSED)i=e.response;else throw new tw(n)}finally{o=!0,u()}return i}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:o}}){let a,u=!1,c=new Promise(t=>{let o=i,a=null,c=async()=>{try{let{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch{return o}};(async()=>{if(o=await c(),!u)for(;;){if(i!==o){t({__type:t$.NONCE_INVALID,slotInWhichNonceDidAdvance:a});return}if(await t0(2e3),u||(o=await c(),u))return}})()}),{abortConfirmation:l,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),d=this.getCancellationPromise(t);try{let t=await Promise.race([d,h,c]);if(t.__type===t$.PROCESSED)a=t.response;else{let n;for(;;){let e=await this.getSignatureStatus(o);if(null==e)break;if(e.context.slot<(t.slotInWhichNonceDidAdvance??r)){await t0(400);continue}n=e;break}if(n?.value){let t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new tk(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new tk(o);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new tk(o)}a={context:n.context,value:{err:n.value.err}}}else throw new tk(o)}}finally{u=!0,l()}return a}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r,n;let i=new Promise(t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout(()=>t({__type:t$.TIMED_OUT,timeoutMs:n}),n)}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:t});try{let e=await Promise.race([a,i]);if(e.__type===t$.PROCESSED)n=e.response;else throw new tv(t,e.timeoutMs/1e3)}finally{clearTimeout(r),o()}return n}async getClusterNodes(){let e=eb(await this._rpcRequest("getClusterNodes",[]),rw(ek(ns)));if("error"in e)throw new tX(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){let t=this._buildArgs([],e),r=eb(await this._rpcRequest("getVoteAccounts",t),na);if("error"in r)throw new tX(r.error,"failed to get vote accounts");return r.result}async getSlot(e){let{commitment:t,config:r}=rg(e),n=this._buildArgs([],t,void 0,r),i=eb(await this._rpcRequest("getSlot",n),rw(e_()));if("error"in i)throw new tX(i.error,"failed to get slot");return i.result}async getSlotLeader(e){let{commitment:t,config:r}=rg(e),n=this._buildArgs([],t,void 0,r),i=eb(await this._rpcRequest("getSlotLeader",n),rw(eT()));if("error"in i)throw new tX(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){let r=eb(await this._rpcRequest("getSlotLeaders",[e,t]),rw(ek(rd)));if("error"in r)throw new tX(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(e,t){let{context:r,value:n}=await this.getSignatureStatuses([e],t);return tM(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){let r=[e];t&&r.push(t);let n=eb(await this._rpcRequest("getSignatureStatuses",r),nl);if("error"in n)throw new tX(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){let{commitment:t,config:r}=rg(e),n=this._buildArgs([],t,void 0,r),i=eb(await this._rpcRequest("getTransactionCount",n),rw(e_()));if("error"in i)throw new tX(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),r=eb(await this._rpcRequest("getInflationGovernor",t),rz);if("error"in r)throw new tX(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){let{commitment:n,config:i}=rg(r),o=this._buildArgs([e.map(e=>e.toBase58())],n,void 0,{...i,epoch:t??i?.epoch}),a=eb(await this._rpcRequest("getInflationReward",o),rE);if("error"in a)throw new tX(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){let e=eb(await this._rpcRequest("getInflationRate",[]),rL);if("error"in e)throw new tX(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){let{commitment:t,config:r}=rg(e),n=this._buildArgs([],t,void 0,r),i=eb(await this._rpcRequest("getEpochInfo",n),rD);if("error"in i)throw new tX(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){let e=eb(await this._rpcRequest("getEpochSchedule",[]),rW);if("error"in e)throw new tX(e.error,"failed to get epoch schedule");let t=e.result;return new ro(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){let e=eb(await this._rpcRequest("getLeaderSchedule",[]),rV);if("error"in e)throw new tX(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){let r=this._buildArgs([e],t),n=eb(await this._rpcRequest("getMinimumBalanceForRentExemption",r),nh);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){let t=eb(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),nz);if("error"in t)throw new tX(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){let r=this._buildArgs([e],t),n=eb(await this._rpcRequest("getFeeCalculatorForBlockhash",r),nL);if("error"in n)throw new tX(n.error,"failed to get fee calculator");let{context:i,value:o}=n.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(e,t){let r=th(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=eb(await this._rpcRequest("getFeeForMessage",n),rv(eA(e_())));if("error"in i)throw new tX(i.error,"failed to get fee for message");if(null===i.result)throw Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(e=>e.toBase58()),r=t?.length?[t]:[],n=eb(await this._rpcRequest("getRecentPrioritizationFees",r),rN);if("error"in n)throw new tX(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:r}=rg(e),n=this._buildArgs([],t,void 0,r),i=eb(await this._rpcRequest("getLatestBlockhash",n),n$);if("error"in i)throw new tX(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgs([e],r,void 0,n),o=eb(await this._rpcRequest("isBlockhashValid",i),nU);if("error"in o)throw new tX(o.error,"failed to determine if the blockhash `"+e+"`is valid");return o.result}async getVersion(){let e=eb(await this._rpcRequest("getVersion",[]),rw(rC));if("error"in e)throw new tX(e.error,"failed to get version");return e.result}async getGenesisHash(){let e=eb(await this._rpcRequest("getGenesisHash",[]),rw(eT()));if("error"in e)throw new tX(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let e=eb(o,nM);if("error"in e)throw e.error;return e.result}case"none":{let e=eb(o,nx);if("error"in e)throw e.error;return e.result}default:{let e=eb(o,n_);if("error"in e)throw e.error;let{result:t}=e;return t?{...t,transactions:t.transactions.map(({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:rS(r,e.message)},version:r}))}:null}}}catch(e){throw new tX(e,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{let e=eb(o,nO);if("error"in e)throw e.error;return e.result}case"none":{let e=eb(o,nP);if("error"in e)throw e.error;return e.result}default:{let e=eb(o,nT);if("error"in e)throw e.error;return e.result}}}catch(e){throw new tX(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){let{commitment:n,...i}=e;r=n,t=i}let n=this._buildArgs([],r,"base64",t),i=eb(await this._rpcRequest("getBlockProduction",n),rU);if("error"in i)throw new tX(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),o=eb(await this._rpcRequest("getTransaction",i),nR);if("error"in o)throw new tX(o.error,"failed to get transaction");let a=o.result;return a&&{...a,transaction:{...a.transaction,message:rS(a.version,a.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:r,config:n}=rg(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),o=eb(await this._rpcRequest("getTransaction",i),nj);if("error"in o)throw new tX(o.error,"failed to get transaction");return o.result}async getParsedTransactions(e,t){let{commitment:r,config:n}=rg(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)}));return(await this._rpcBatchRequest(i)).map(e=>{let t=eb(e,nj);if("error"in t)throw new tX(t.error,"failed to get transactions");return t.result})}async getTransactions(e,t){let{commitment:r,config:n}=rg(t),i=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)}));return(await this._rpcBatchRequest(i)).map(e=>{let t=eb(e,nR);if("error"in t)throw new tX(t.error,"failed to get transactions");let r=t.result;return r&&{...r,transaction:{...r.transaction,message:rS(r.version,r.transaction.message)}}})}async getConfirmedBlock(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=eb(await this._rpcRequest("getBlock",r),nB);if("error"in n)throw new tX(n.error,"failed to get confirmed block");let i=n.result;if(!i)throw Error("Confirmed block "+e+" not found");let o={...i,transactions:i.transactions.map(({transaction:e,meta:t})=>{let r=new tC(e.message);return{meta:t,transaction:{...e,message:r}}})};return{...o,transactions:o.transactions.map(({transaction:e,meta:t})=>({meta:t,transaction:tL.populate(e.message,e.signatures)}))}}async getBlocks(e,t,r){let n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=eb(await this._rpcRequest("getBlocks",n),rw(ek(e_())));if("error"in i)throw new tX(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=eb(await this._rpcRequest("getBlock",r),nC);if("error"in n)throw new tX(n.error,"failed to get block");let i=n.result;if(!i)throw Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=eb(await this._rpcRequest("getBlock",r),nC);if("error"in n)throw new tX(n.error,"failed to get confirmed block");let i=n.result;if(!i)throw Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t),n=eb(await this._rpcRequest("getTransaction",r),nR);if("error"in n)throw new tX(n.error,"failed to get transaction");let i=n.result;if(!i)return i;let o=new tC(i.transaction.message),a=i.transaction.signatures;return{...i,transaction:tL.populate(o,a)}}async getParsedConfirmedTransaction(e,t){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=eb(await this._rpcRequest("getTransaction",r),nj);if("error"in n)throw new tX(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){let r=e.map(e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(e=>{let t=eb(e,nj);if("error"in t)throw new tX(t.error,"failed to get confirmed transactions");return t.result})}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{let e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let o=await this.getSlot("finalized");for(;!("before"in n)&&!(++r>o);)try{let e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map(e=>e.signature)}async getConfirmedSignaturesForAddress2(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=eb(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),r8);if("error"in i)throw new tX(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=eb(await this._rpcRequest("getSignaturesForAddress",n),r3);if("error"in i)throw new tX(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),i=null;return null!==n&&(i=new rc({key:e,state:rc.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){let{context:r,value:n}=await this.getAccountInfoAndContext(e,t),i=null;return null!==n&&(i=t5.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(e=>e.value).catch(t=>{throw Error("failed to get nonce for account "+e.toBase58()+": "+t)})}async requestAirdrop(e,t){let r=eb(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),nN);if("error"in r)throw new tX(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await t0(100);let e=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){let e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await t0(200)}throw Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:r}=rg(e),n=this._buildArgs([],t,"base64",r),i=eb(await this._rpcRequest("getStakeMinimumDelegation",n),rv(e_()));if("error"in i)throw new tX(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){let n;if("message"in e){let n=e.serialize(),o=i.D.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw Error("Invalid arguments");let a=t||{};a.encoding="base64","commitment"in a||(a.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(a.innerInstructions=t.innerInstructions);let u=[o,a],c=eb(await this._rpcRequest("simulateTransaction",u),r$);if("error"in c)throw Error("failed to simulate transaction: "+c.error.message);return c.result}if(e instanceof tL?((n=new tL).feePayer=e.feePayer,n.instructions=e.instructions,n.nonceInfo=e.nonceInfo,n.signatures=e.signatures):(n=tL.populate(e))._message=n._json=void 0,void 0!==t&&!Array.isArray(t))throw Error("Invalid arguments");if(n.nonceInfo&&t)n.sign(...t);else{let e=this._disableBlockhashCaching;for(;;){let r=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=r.lastValidBlockHeight,n.recentBlockhash=r.blockhash,!t)break;if(n.sign(...t),!n.signature)throw Error("!signature");let i=n.signature.toString("base64");if(this._blockhashInfo.simulatedSignatures.includes(i)||this._blockhashInfo.transactionSignatures.includes(i))e=!0;else{this._blockhashInfo.simulatedSignatures.push(i);break}}}let o=n._compile(),a=o.serialize(),u=n._serialize(a).toString("base64"),c={encoding:"base64",commitment:this.commitment};if(r){let e=(Array.isArray(r)?r:o.nonProgramIds()).map(e=>e.toBase58());c.accounts={encoding:"base64",addresses:e}}t&&(c.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(c.innerInstructions=t.innerInstructions);let l=[u,c],h=eb(await this._rpcRequest("simulateTransaction",l),r$);if("error"in h){let e;if("data"in h.error&&(e=h.error.data.logs)&&Array.isArray(e)){let t=`
    `,r=t+e.join(t);console.error(h.error.message,r)}throw new tZ({action:"simulate",signature:"",transactionMessage:h.error.message,logs:e})}return h.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw Error("Invalid arguments");let r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw Error("Invalid arguments");if(e.nonceInfo)e.sign(...t);else{let r=this._disableBlockhashCaching;for(;;){let n=await this._blockhashWithExpiryBlockHeight(r);if(e.lastValidBlockHeight=n.lastValidBlockHeight,e.recentBlockhash=n.blockhash,e.sign(...t),!e.signature)throw Error("!signature");let i=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(i))r=!0;else{this._blockhashInfo.transactionSignatures.push(i);break}}}let n=e.serialize();return await this.sendRawTransaction(n,r)}async sendRawTransaction(e,t){let r=th(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){let r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);let o=[e,r],a=eb(await this._rpcRequest("sendTransaction",o),nD);if("error"in a){let e;throw"data"in a.error&&(e=a.error.data.logs),new tZ({action:n?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:e})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3===e){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,t])=>{this._setSubscription(e,{...t,state:"pending"})})}_setSubscription(e,t){let r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){let r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach(e=>{try{e(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){let r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};let n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}},500));return}if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async e=>{let r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size){delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await (async()=>{let{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});let t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(o){if(console.error(`Received ${o instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:o}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await (async()=>{let{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;this._setSubscription(e,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach(e=>{try{e(...t)}catch(e){console.error(e)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=eb(e,r5);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,n=ri([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let t=this._subscriptionsByHash[n];tM(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:n,config:i}=rg(r),o=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=eb(e,r7);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){let{commitment:i,config:o}=rg(r),a=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o||(n?{filters:rm(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){let n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:r}=eb(e,nV);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=eb(e,ne);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=eb(e,nr);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){let i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){let i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=eb(e,nn);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){let{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],n,void 0,i),a=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:r}=eb(e,ni);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class nF{constructor(e){this._keypair=void 0,this._keypair=e??to()}static generate(){return new nF(to())}static fromSecretKey(e,t){if(64!==e.byteLength)throw Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let t=ta(e.slice(0,32));for(let e=0;e<32;e++)if(r[e]!==t[e])throw Error("provided secretKey is invalid")}return new nF({publicKey:r,secretKey:e})}static fromSeed(e){let t=ta(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new nF({publicKey:t,secretKey:r})}get publicKey(){return new tm(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}let nH=Object.freeze({CreateLookupTable:{index:0,layout:et.struct([et.u32("instruction"),t4("recentSlot"),et.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:et.struct([et.u32("instruction")])},ExtendLookupTable:{index:2,layout:et.struct([et.u32("instruction"),t4(),et.seq(tI(),et.offset(et.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:et.struct([et.u32("instruction")])},CloseLookupTable:{index:4,layout:et.struct([et.u32("instruction")])}});class nG{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=et.u32("instruction").decode(e.data);for(let[e,n]of Object.entries(nH))if(n.index==r){t=e;break}if(!t)throw Error("Invalid Instruction. Should be a LookupTable Instruction");return t}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);let{recentSlot:t}=t2(nH.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);let{addresses:t}=t2(nH.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(e=>new tm(e))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(nJ.programId))throw Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class nJ{constructor(){}static createLookupTable(e){let[t,r]=tm.findProgramAddressSync([e.authority.toBuffer(),ea().encode(e.recentSlot)],this.programId),n=t1(nH.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:re.programId,isSigner:!1,isWritable:!1}];return[new tz({programId:this.programId,keys:i,data:n}),t]}static freezeLookupTable(e){let t=t1(nH.FreezeLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new tz({programId:this.programId,keys:r,data:t})}static extendLookupTable(e){let t=t1(nH.ExtendLookupTable,{addresses:e.addresses.map(e=>e.toBytes())}),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&r.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:re.programId,isSigner:!1,isWritable:!1}),new tz({programId:this.programId,keys:r,data:t})}static deactivateLookupTable(e){let t=t1(nH.DeactivateLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new tz({programId:this.programId,keys:r,data:t})}static closeLookupTable(e){let t=t1(nH.CloseLookupTable),r=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new tz({programId:this.programId,keys:r,data:t})}}nJ.programId=new tm("AddressLookupTab1e1111111111111111111111111");class nY{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=et.u8("instruction").decode(e.data);for(let[e,n]of Object.entries(nZ))if(n.index==r){t=e;break}if(!t)throw Error("Instruction type incorrect; not a ComputeBudgetInstruction");return t}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:t,additionalFee:r}=t2(nZ.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:t}=t2(nZ.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);let{units:t}=t2(nZ.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);let{microLamports:t}=t2(nZ.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(nX.programId))throw Error("invalid instruction; programId is not ComputeBudgetProgram")}}let nZ=Object.freeze({RequestUnits:{index:0,layout:et.struct([et.u8("instruction"),et.u32("units"),et.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:et.struct([et.u8("instruction"),et.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:et.struct([et.u8("instruction"),et.u32("units")])},SetComputeUnitPrice:{index:3,layout:et.struct([et.u8("instruction"),t4("microLamports")])}});class nX{constructor(){}static requestUnits(e){let t=t1(nZ.RequestUnits,e);return new tz({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){let t=t1(nZ.RequestHeapFrame,e);return new tz({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){let t=t1(nZ.SetComputeUnitLimit,e);return new tz({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){let t=t1(nZ.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new tz({keys:[],programId:this.programId,data:t})}}nX.programId=new tm("ComputeBudget111111111111111111111111111111");let nQ=et.struct([et.u8("numSignatures"),et.u8("padding"),et.u16("signatureOffset"),et.u16("signatureInstructionIndex"),et.u16("publicKeyOffset"),et.u16("publicKeyInstructionIndex"),et.u16("messageDataOffset"),et.u16("messageDataSize"),et.u16("messageInstructionIndex")]);class n0{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,instructionIndex:o}=e;tM(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),tM(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);let a=nQ.span,u=a+t.length,c=u+n.length,l=i.D.alloc(c+r.length),h=o??65535;return nQ.encode({numSignatures:1,padding:0,signatureOffset:u,signatureInstructionIndex:h,publicKeyOffset:a,publicKeyInstructionIndex:h,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:h},l),l.fill(t,a),l.fill(n,u),l.fill(r,c),new tz({keys:[],programId:n0.programId,data:l})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;tM(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{let e=nF.fromSecretKey(t),i=e.publicKey.toBytes(),o=tc(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}n0.programId=new tm("Ed25519SigVerify111111111111111111111111111");let n1=(e,t)=>{let r=i.bB.sign(e,t);return[r.toCompactRawBytes(),r.recovery]};i.bB.utils.isValidPrivateKey;let n2=i.bB.getPublicKey,n6=et.struct([et.u8("numSignatures"),et.u16("signatureOffset"),et.u8("signatureInstructionIndex"),et.u16("ethAddressOffset"),et.u8("ethAddressInstructionIndex"),et.u16("messageDataOffset"),et.u16("messageDataSize"),et.u8("messageInstructionIndex"),et.blob(20,"ethAddress"),et.blob(64,"signature"),et.u8("recoveryId")]);class n8{constructor(){}static publicKeyToEthAddress(e){tM(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return i.D.from((0,i.ap)(th(e))).slice(-20)}catch(e){throw Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:o}=e;return n8.createInstructionWithEthAddress({ethAddress:n8.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(e){let t;let{ethAddress:r,message:n,signature:o,recoveryId:a,instructionIndex:u=0}=e;tM(20===(t="string"==typeof r?r.startsWith("0x")?i.D.from(r.substr(2),"hex"):i.D.from(r,"hex"):r).length,`Address must be 20 bytes but received ${t.length} bytes`);let c=12+t.length,l=c+o.length+1,h=i.D.alloc(n6.span+n.length);return n6.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:u,ethAddressOffset:12,ethAddressInstructionIndex:u,messageDataOffset:l,messageDataSize:n.length,messageInstructionIndex:u,signature:th(o),ethAddress:th(t),recoveryId:a},h),h.fill(th(n),n6.span),new tz({keys:[],programId:n8.programId,data:h})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;tM(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{let e=th(t),o=n2(e,!1).slice(1),a=i.D.from((0,i.ap)(th(r))),[u,c]=n1(a,e);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:u,recoveryId:c,instructionIndex:n})}catch(e){throw Error(`Error creating instruction; ${e}`)}}}n8.programId=new tm("KeccakSecp256k11111111111111111111111111111");let n3=new tm("StakeConfig11111111111111111111111111111111");class n5{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class n4{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}n4.default=new n4(0,0,tm.default);class n7{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=et.u32("instruction").decode(e.data);for(let[e,n]of Object.entries(n9))if(n.index==r){t=e;break}if(!t)throw Error("Instruction type incorrect; not a StakeInstruction");return t}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t,lockup:r}=t2(n9.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new n5(new tm(t.staker),new tm(t.withdrawer)),lockup:new n4(r.unixTimestamp,r.epoch,new tm(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),t2(n9.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,stakeAuthorizationType:r}=t2(n9.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new tm(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:i}=t2(n9.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new tm(i),newAuthorizedPubkey:new tm(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=t2(n9.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),t2(n9.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=t2(n9.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),t2(n9.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(it.programId))throw Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}let n9=Object.freeze({Initialize:{index:0,layout:et.struct([et.u32("instruction"),((e="authorized")=>et.struct([tI("staker"),tI("withdrawer")],e))(),((e="lockup")=>et.struct([et.ns64("unixTimestamp"),et.ns64("epoch"),tI("custodian")],e))()])},Authorize:{index:1,layout:et.struct([et.u32("instruction"),tI("newAuthorized"),et.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:et.struct([et.u32("instruction")])},Split:{index:3,layout:et.struct([et.u32("instruction"),et.ns64("lamports")])},Withdraw:{index:4,layout:et.struct([et.u32("instruction"),et.ns64("lamports")])},Deactivate:{index:5,layout:et.struct([et.u32("instruction")])},Merge:{index:7,layout:et.struct([et.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:et.struct([et.u32("instruction"),tI("newAuthorized"),et.u32("stakeAuthorizationType"),tA("authoritySeed"),tI("authorityOwner")])}}),ie=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class it{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:n}=e,i=n||n4.default,o=t1(n9.Initialize,{authorized:{staker:th(r.staker.toBuffer()),withdrawer:th(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:th(i.custodian.toBuffer())}});return new tz({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tF,isSigner:!1,isWritable:!1}],programId:this.programId,data:o})}static createAccountWithSeed(e){let t=new tL;t.add(re.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){let t=new tL;t.add(re.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=t1(n9.Delegate);return new tL().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:tY,isSigner:!1,isWritable:!1},{pubkey:n3,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:o}=e,a=t1(n9.Authorize,{newAuthorized:th(n.toBuffer()),stakeAuthorizationType:i.index}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tW,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&u.push({pubkey:o,isSigner:!0,isWritable:!1}),new tL().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=e,c=t1(n9.AuthorizeWithSeed,{newAuthorized:th(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:n,authorityOwner:th(i.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:tW,isSigner:!1,isWritable:!1}];return u&&l.push({pubkey:u,isSigner:!0,isWritable:!1}),new tL().add({keys:l,programId:this.programId,data:c})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,o=t1(n9.Split,{lamports:i});return new tz({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static split(e,t){let r=new tL;return r.add(re.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:o,seed:a,lamports:u}=e,c=new tL;return c.add(re.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&c.add(re.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:u}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=t1(n9.Merge);return new tL().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:tY,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:o}=e,a=t1(n9.Withdraw,{lamports:i}),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:tY,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&u.push({pubkey:o,isSigner:!0,isWritable:!1}),new tL().add({keys:u,programId:this.programId,data:a})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,n=t1(n9.Deactivate);return new tL().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}it.programId=new tm("Stake11111111111111111111111111111111111111"),it.space=200;class ir{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}}class ii{constructor(){}static decodeInstructionType(e){let t;this.checkProgramId(e.programId);let r=et.u32("instruction").decode(e.data);for(let[e,n]of Object.entries(is))if(n.index==r){t=e;break}if(!t)throw Error("Instruction type incorrect; not a VoteInstruction");return t}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);let{voteInit:t}=t2(is.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new ir(new tm(t.nodePubkey),new tm(t.authorizedVoter),new tm(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,voteAuthorizationType:r}=t2(is.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new tm(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:i}}=t2(is.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new tm(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new tm(n),voteAuthorizationType:{index:i},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=t2(is.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(ia.programId))throw Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}let is=Object.freeze({InitializeAccount:{index:0,layout:et.struct([et.u32("instruction"),((e="voteInit")=>et.struct([tI("nodePubkey"),tI("authorizedVoter"),tI("authorizedWithdrawer"),et.u8("commission")],e))()])},Authorize:{index:1,layout:et.struct([et.u32("instruction"),tI("newAuthorized"),et.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:et.struct([et.u32("instruction"),et.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:et.struct([et.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:et.struct([et.u32("instruction"),((e="voteAuthorizeWithSeedArgs")=>et.struct([et.u32("voteAuthorizationType"),tI("currentAuthorityDerivedKeyOwnerPubkey"),tA("currentAuthorityDerivedKeySeed"),tI("newAuthorized")],e))()])}}),io=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class ia{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=t1(is.InitializeAccount,{voteInit:{nodePubkey:th(n.nodePubkey.toBuffer()),authorizedVoter:th(n.authorizedVoter.toBuffer()),authorizedWithdrawer:th(n.authorizedWithdrawer.toBuffer()),commission:n.commission}});return new tz({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tF,isSigner:!1,isWritable:!1},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static createAccount(e){let t=new tL;return t.add(re.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,o=t1(is.Authorize,{newAuthorized:th(n.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new tL().add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=e,u=t1(is.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:th(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:th(i.toBuffer()),voteAuthorizationType:o.index}}),c=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:tW,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new tL().add({keys:c,programId:this.programId,data:u})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,o=t1(is.Withdraw,{lamports:n});return new tL().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw Error("Withdraw will leave vote account with insufficient funds.");return ia.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=t1(is.UpdateValidatorIdentity);return new tL().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ia.programId=new tm("Vote111111111111111111111111111111111111111"),ia.space=3762;let iu=new tm("Va1idator1nfo111111111111111111111111111111"),ic=eP({name:eT(),website:ex(eT()),details:ex(eT()),iconUrl:ex(eT()),keybaseUsername:ex(eT())});class il{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(2!==t_(t))return null;let r=[];for(let e=0;e<2;e++){let e=new tm(tB(t,0,32)),n=1===tP(t);r.push({publicKey:e,isSigner:n})}if(r[0].publicKey.equals(iu)&&r[1].isSigner){let e=JSON.parse(tA().decode(i.D.from(t)));return ey(e,ic),new il(r[1].publicKey,e)}return null}}let ih=new tm("Vote111111111111111111111111111111111111111"),id=et.struct([tI("nodePubkey"),tI("authorizedWithdrawer"),et.u8("commission"),et.nu64(),et.seq(et.struct([et.nu64("slot"),et.u32("confirmationCount")]),et.offset(et.u32(),-8),"votes"),et.u8("rootSlotValid"),et.nu64("rootSlot"),et.nu64(),et.seq(et.struct([et.nu64("epoch"),tI("authorizedVoter")]),et.offset(et.u32(),-8),"authorizedVoters"),et.struct([et.seq(et.struct([tI("authorizedPubkey"),et.nu64("epochOfLastAuthorizedSwitch"),et.nu64("targetEpoch")]),32,"buf"),et.nu64("idx"),et.u8("isEmpty")],"priorVoters"),et.nu64(),et.seq(et.struct([et.nu64("epoch"),et.nu64("credits"),et.nu64("prevCredits")]),et.offset(et.u32(),-8),"epochCredits"),et.struct([et.nu64("slot"),et.nu64("timestamp")],"lastTimestamp")]);class ip{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){let t=id.decode(th(e),4),r=t.rootSlot;return t.rootSlotValid||(r=null),new ip({nodePubkey:new tm(t.nodePubkey),authorizedWithdrawer:new tm(t.authorizedWithdrawer),commission:t.commission,votes:t.votes,rootSlot:r,authorizedVoters:t.authorizedVoters.map(ig),priorVoters:function({buf:e,idx:t,isEmpty:r}){return r?[]:[...e.slice(t+1).map(im),...e.slice(0,t).map(im)]}(t.priorVoters),epochCredits:t.epochCredits,lastTimestamp:t.lastTimestamp})}}function ig({authorizedVoter:e,epoch:t}){return{epoch:t,authorizedVoter:new tm(e)}}function im({authorizedPubkey:e,epochOfLastAuthorizedSwitch:t,targetEpoch:r}){return{authorizedPubkey:new tm(e),epochOfLastAuthorizedSwitch:t,targetEpoch:r}}let iy={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function ib(e,t){let r=!1===t?"http":"https";if(!e)return iy[r].devnet;let n=iy[r][e];if(!n)throw Error(`Unknown ${r} cluster: ${e}`);return n}async function iw(e,t,r,n){let i,o;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,o=n):o=r;let a=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},u=await e.sendRawTransaction(t,a),c=o&&o.commitment,l=(await (i?e.confirmTransaction(i,c):e.confirmTransaction(u,c))).value;if(l.err)throw null!=u?new tZ({action:a?.skipPreflight?"send":"simulate",signature:u,transactionMessage:`Status: (${JSON.stringify(l)})`}):Error(`Raw transaction ${u} failed (${JSON.stringify(l)})`);return u}let iv=1e9,ik=Object.freeze(Object.defineProperty({__proto__:null,Account:ty,AddressLookupTableAccount:rc,AddressLookupTableInstruction:nG,AddressLookupTableProgram:nJ,Authorized:n5,BLOCKHASH_CACHE_TIMEOUT_MS:3e4,BPF_LOADER_DEPRECATED_PROGRAM_ID:tb,BPF_LOADER_PROGRAM_ID:rr,BpfLoader:rn,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:nZ,ComputeBudgetInstruction:nY,ComputeBudgetProgram:nX,Connection:nq,Ed25519Program:n0,Enum:tf,EpochSchedule:ro,FeeCalculatorLayout:t6,Keypair:nF,LAMPORTS_PER_SOL:1e9,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:nH,Loader:rt,Lockup:n4,MAX_SEED_LENGTH:32,Message:tC,MessageAccountKeys:tS,MessageV0:tR,NONCE_ACCOUNT_LENGTH:t3,NonceAccount:t5,PACKET_DATA_SIZE:1232,PUBLIC_KEY_LENGTH:32,PublicKey:tm,SIGNATURE_LENGTH_IN_BYTES:64,SOLANA_SCHEMA:tp,STAKE_CONFIG_ID:n3,STAKE_INSTRUCTION_LAYOUTS:n9,SYSTEM_INSTRUCTION_LAYOUTS:t9,SYSVAR_CLOCK_PUBKEY:tW,SYSVAR_EPOCH_SCHEDULE_PUBKEY:tV,SYSVAR_INSTRUCTIONS_PUBKEY:tK,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:tq,SYSVAR_RENT_PUBKEY:tF,SYSVAR_REWARDS_PUBKEY:tH,SYSVAR_SLOT_HASHES_PUBKEY:tG,SYSVAR_SLOT_HISTORY_PUBKEY:tJ,SYSVAR_STAKE_HISTORY_PUBKEY:tY,Secp256k1Program:n8,SendTransactionError:tZ,SolanaJSONRPCError:tX,SolanaJSONRPCErrorCode:{JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},StakeAuthorizationLayout:ie,StakeInstruction:n7,StakeProgram:it,Struct:td,SystemInstruction:t7,SystemProgram:re,Transaction:tL,TransactionExpiredBlockheightExceededError:tw,TransactionExpiredNonceInvalidError:tk,TransactionExpiredTimeoutError:tv,TransactionInstruction:tz,TransactionMessage:tN,TransactionStatus:t$,VALIDATOR_INFO_KEY:iu,VERSION_PREFIX_MASK:127,VOTE_PROGRAM_ID:ih,ValidatorInfo:il,VersionedMessage:tj,VersionedTransaction:tD,VoteAccount:ip,VoteAuthorizationLayout:io,VoteInit:ir,VoteInstruction:ii,VoteProgram:ia,clusterApiUrl:ib,sendAndConfirmRawTransaction:iw,sendAndConfirmTransaction:tQ},Symbol.toStringTag,{value:"Module"})),iS="Solana";class iI{static byteSize=32;static platform=iS;type="Native";address;constructor(e){iI.instanceof(e)?this.address=e.address:i.ai.instanceof(e)?this.address=new tm(e.toUint8Array()):"string"==typeof e&&i.m.valid(e)?this.address=new tm(i.m.decode(e)):this.address=new tm(e)}unwrap(){return this.address}toString(){return this.address.toBase58()}toUint8Array(){return new Uint8Array(this.address.toBytes())}toNative(){return this}toUniversalAddress(){return new i.ai(this.toUint8Array())}static instanceof(e){return e.constructor.platform===iI.platform}equals(e){return iI.instanceof(e)?e.unwrap().equals(this.unwrap()):this.toUniversalAddress().equals(e)}}(0,i.b0)(iS,iI);let iE=e=>i.aO.encode(e),iA=e=>i.aO.decode(e);function i_(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function ix(e){if(e.length<8192)return btoa(String.fromCharCode(...e));let t="";for(var r=0;r<e.length;r+=8192)t+=String.fromCharCode(...e.slice(r,r+8192));return btoa(t)}function iM(e){let t=e.startsWith("0x")?e.slice(2):e,r=t.length%2==0?t:`0${t}`,n=r.match(/[0-9a-fA-F]{2}/g)?.map(e=>parseInt(e,16))??[];if(n.length!==r.length/2)throw Error(`Invalid hex string ${e}`);return Uint8Array.from(n)}function iT(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function iO(e,t){return Array.from({length:Math.ceil(e.length/t)},(r,n)=>e.slice(n*t,(n+1)*t))}class iP{constructor(e,t){if("function"!=typeof e)throw TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: ${e}.`);this._batchLoadFn=e,this._maxBatchSize=function(e){if(!(!e||!1!==e.batch))return 1;let t=e&&e.maxBatchSize;if(void 0===t)return 1/0;if("number"!=typeof t||t<1)throw TypeError(`maxBatchSize must be a positive number: ${t}`);return t}(t),this._batchScheduleFn=function(e){let t=e&&e.batchScheduleFn;if(void 0===t)return iB;if("function"!=typeof t)throw TypeError(`batchScheduleFn must be a function: ${t}`);return t}(t),this._cacheKeyFn=function(e){let t=e&&e.cacheKeyFn;if(void 0===t)return e=>e;if("function"!=typeof t)throw TypeError(`cacheKeyFn must be a function: ${t}`);return t}(t),this._cacheMap=function(e){if(!(!e||!1!==e.cache))return null;let t=e&&e.cacheMap;if(void 0===t)return new Map;if(null!==t){let e=["get","set","delete","clear"].filter(e=>t&&"function"!=typeof t[e]);if(0!==e.length)throw TypeError("Custom cacheMap missing methods: "+e.join(", "))}return t}(t),this._batch=null,this.name=t&&t.name?t.name:null}load(e){let t;if(null==e)throw TypeError(`The loader.load() function must be called with a value, but got: ${String(e)}.`);let r=function(e){let t=e._batch;if(null!==t&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;let r={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=r,e._batchScheduleFn(()=>{(function(e,t){let r;if(t.hasDispatched=!0,0===t.keys.length){iR(t);return}try{r=e._batchLoadFn(t.keys)}catch(r){return iC(e,t,TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function errored synchronously: ${String(r)}.`))}if(!r||"function"!=typeof r.then)return iC(e,t,TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: ${String(r)}.`));Promise.resolve(r).then(e=>{if(!ij(e))throw TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: ${String(e)}.`);if(e.length!==t.keys.length)throw TypeError(`DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.

Keys:
${String(t.keys)}

Values:
${String(e)}`);iR(t);for(let r=0;r<t.callbacks.length;r++){let n=e[r];n instanceof Error?t.callbacks[r].reject(n):t.callbacks[r].resolve(n)}}).catch(r=>{iC(e,t,r)})})(e,r)}),r}(this),n=this._cacheMap;if(n){t=this._cacheKeyFn(e);let i=n.get(t);if(i){let e=r.cacheHits||(r.cacheHits=[]);return new Promise(t=>{e.push(()=>{t(i)})})}}r.keys.push(e);let i=new Promise((e,t)=>{r.callbacks.push({resolve:e,reject:t})});return n&&n.set(t,i),i}loadMany(e){if(!ij(e))throw TypeError(`The loader.loadMany() function must be called with Array<key>, but got: ${e}.`);let t=[];for(let r=0;r<e.length;r++)t.push(this.load(e[r]).catch(e=>e));return Promise.all(t)}clear(e){let t=this._cacheMap;if(t){let r=this._cacheKeyFn(e);t.delete(r)}return this}clearAll(){let e=this._cacheMap;return e&&e.clear(),this}prime(e,t){let r=this._cacheMap;if(r){let n=this._cacheKeyFn(e);if(void 0===r.get(n)){let e;t instanceof Error?(e=Promise.reject(t)).catch(()=>{}):e=Promise.resolve(t),r.set(n,e)}}return this}}let iB="object"==typeof i.p&&"function"==typeof i.p.nextTick?function(e){n||(n=Promise.resolve()),n.then(()=>{i.p.nextTick(e)})}:"function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){setTimeout(e)};function iC(e,t,r){iR(t);for(let n=0;n<t.keys.length;n++)e.clear(t.keys[n]),t.callbacks[n].reject(r)}function iR(e){if(e.cacheHits)for(let t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function ij(e){return"object"==typeof e&&null!==e&&"length"in e&&"number"==typeof e.length&&(0===e.length||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}function i$(e){let t=[],r=0;if(0===e)return[0];for(;e>0;)t[r]=127&e,(e>>=7)&&(t[r]|=128),r+=1;return t}class iU{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32();return BigInt("0x"+(this.read32().toString(16)+e.toString(16).padStart(8,"0"))).toString(10)}read128(){let e=BigInt(this.read64());return BigInt("0x"+(BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0"))).toString(10)}read256(){let e=BigInt(this.read128());return BigInt("0x"+(BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0"))).toString(10)}readBytes(e){let t=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,t,e);return this.shift(e),r}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,{value:t,length:r}=function(e){let t=0,r=0,n=0;for(;;){let i=e[n];if(n+=1,t|=(127&i)<<r,(128&i)==0)break;r+=7}return{value:t,length:n}}(new Uint8Array(this.dataView.buffer,e));return this.shift(r),t}readVec(e){let t=this.readULEB(),r=[];for(let n=0;n<t;n++)r.push(e(this,n,t));return r}}function iz(e,t=["<",">"]){let[r,n]=t,i=[],o="",a=0;for(let t=0;t<e.length;t++){let u=e[t];if(u===r&&a++,u===n&&a--,0===a&&","===u){i.push(o.trim()),o="";continue}o+=u}return i.push(o.trim()),i}class iL{constructor({initialSize:e=1024,maxSize:t=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=t,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){let t=this.bytePosition+e;if(t>this.size){let e=Math.min(this.maxSize,this.size+this.allocateSize);if(t>e)throw Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${t}`);this.size=e;let r=new ArrayBuffer(this.size);new Uint8Array(r).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(r)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return iN(BigInt(e),8).forEach(e=>this.write8(e)),this}write128(e){return iN(BigInt(e),16).forEach(e=>this.write8(e)),this}write256(e){return iN(BigInt(e),32).forEach(e=>this.write8(e)),this}writeULEB(e){return i$(e).forEach(e=>this.write8(e)),this}writeVec(e,t){return this.writeULEB(e.length),Array.from(e).forEach((r,n)=>t(this,r,n,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return function(e,t){switch(t){case"base58":return iE(e);case"base64":return ix(e);case"hex":return iT(e);default:throw Error("Unsupported encoding, supported values are: base64, hex")}}(this.toBytes(),e)}}function iN(e,t){let r=new Uint8Array(t),n=0;for(;e>0;)r[n]=Number(e%BigInt(256)),e/=BigInt(256),n+=1;return r}var iD,iW,iV,iK,iq,iF,iH,iG,iJ=e=>{throw TypeError(e)},iY=(e,t,r)=>t.has(e)||iJ("Cannot "+r),iZ=(e,t,r)=>(iY(e,t,"read from private field"),r?r.call(e):t.get(e)),iX=(e,t,r)=>t.has(e)?iJ("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),iQ=(e,t,r,n)=>(iY(e,t,"write to private field"),t.set(e,r),r);let i0=class e{constructor(e){iX(this,iq),iX(this,iF),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),iQ(this,iq,e.write),iQ(this,iF,e.serialize??((e,t)=>{let r=new iL({initialSize:this.serializedSize(e)??void 0,...t});return iZ(this,iq).call(this,e,r),r.toBytes()})),this.validate=e.validate??(()=>{})}write(e,t){this.validate(e),iZ(this,iq).call(this,e,t)}serialize(e,t){return this.validate(e),new i8(this,iZ(this,iF).call(this,e,t))}parse(e){let t=new iU(e);return this.read(t)}fromHex(e){return this.parse(iM(e))}fromBase58(e){return this.parse(iA(e))}fromBase64(e){return this.parse(i_(e))}transform({name:t,input:r,output:n,validate:i}){return new e({name:t??this.name,read:e=>n?n(this.read(e)):this.read(e),write:(e,t)=>iZ(this,iq).call(this,r?r(e):e,t),serializedSize:e=>this.serializedSize(r?r(e):e),serialize:(e,t)=>iZ(this,iF).call(this,r?r(e):e,t),validate:e=>{i?.(e),this.validate(r?r(e):e)}})}};iq=new WeakMap,iF=new WeakMap;let i1=i0,i2=Symbol.for("@mysten/serialized-bcs");function i6(e){return!!e&&"object"==typeof e&&!0===e[i2]}class i8{constructor(e,t){iX(this,iH),iX(this,iG),iQ(this,iH,e),iQ(this,iG,t)}get[i2](){return!0}toBytes(){return iZ(this,iG)}toHex(){return iT(iZ(this,iG))}toBase64(){return ix(iZ(this,iG))}toBase58(){return iE(iZ(this,iG))}parse(){return iZ(this,iH).parse(iZ(this,iG))}}function i3({size:e,...t}){return new i1({...t,serializedSize:()=>e})}function i5({readMethod:e,writeMethod:t,...r}){return i3({...r,read:t=>t[e](),write:(e,r)=>r[t](e),validate:e=>{if(e<0||e>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${e}. Expected value in range 0-${r.maxValue}`);r.validate?.(e)}})}function i4({readMethod:e,writeMethod:t,...r}){return i3({...r,read:t=>t[e](),write:(e,r)=>r[t](BigInt(e)),validate:e=>{let t=BigInt(e);if(t<0||t>r.maxValue)throw TypeError(`Invalid ${r.name} value: ${t}. Expected value in range 0-${r.maxValue}`);r.validate?.(t)}})}iH=new WeakMap,iG=new WeakMap;class i7 extends i1{constructor({name:e,fields:t,...r}){let n=Object.entries(t);super({name:e,serializedSize:e=>{let t=0;for(let[r,i]of n){let n=i.serializedSize(e[r]);if(null==n)return null;t+=n}return t},read:e=>{let t={};for(let[r,i]of n)t[r]=i.read(e);return t},write:(e,t)=>{for(let[r,i]of n)i.write(e[r],t)},...r,validate:e=>{if(r?.validate?.(e),"object"!=typeof e||null==e)throw TypeError(`Expected object, found ${typeof e}`)}})}}class i9 extends i1{constructor({fields:e,...t}){let r=Object.entries(e);super({read:e=>{let t=e.readULEB(),n=r[t];if(!n)throw TypeError(`Unknown value ${t} for enum ${name}`);let[i,o]=n;return{[i]:o?.read(e)??!0,$kind:i}},write:(t,n)=>{let[i,o]=Object.entries(t).filter(([t])=>Object.hasOwn(e,t))[0];for(let e=0;e<r.length;e++){let[t,a]=r[e];if(t===i){n.writeULEB(e),a?.write(o,n);return}}},...t,validate:r=>{if(t?.validate?.(r),"object"!=typeof r||null==r)throw TypeError(`Expected object, found ${typeof r}`);let n=Object.keys(r).filter(t=>void 0!==r[t]&&Object.hasOwn(e,t));if(1!==n.length)throw TypeError(`Expected object with one key, but found ${n.length} for type ${name}}`);let[i]=n;if(!Object.hasOwn(e,i))throw TypeError(`Invalid enum variant ${i}`)}})}}class se extends i1{constructor({fields:e,name:t,...r}){super({name:t??`(${e.map(e=>e.name).join(", ")})`,serializedSize:t=>{let r=0;for(let n=0;n<e.length;n++){let i=e[n].serializedSize(t[n]);if(null==i)return null;r+=i}return r},read:t=>{let r=[];for(let n of e)r.push(n.read(t));return r},write:(t,r)=>{for(let n=0;n<e.length;n++)e[n].write(t[n],r)},...r,validate:t=>{if(r?.validate?.(t),!Array.isArray(t))throw TypeError(`Expected array, found ${typeof t}`);if(t.length!==e.length)throw TypeError(`Expected array of length ${e.length}, found ${t.length}`)}})}}let st={u8:e=>i5({readMethod:"read8",writeMethod:"write8",size:1,maxValue:255,...e,name:e?.name??"u8"}),u16:e=>i5({readMethod:"read16",writeMethod:"write16",size:2,maxValue:65535,...e,name:e?.name??"u16"}),u32:e=>i5({readMethod:"read32",writeMethod:"write32",size:4,maxValue:4294967296-1,...e,name:e?.name??"u32"}),u64:e=>i4({readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...e,name:e?.name??"u64"}),u128:e=>i4({readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...e,name:e?.name??"u128"}),u256:e=>i4({readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...e,name:e?.name??"u256"}),bool:e=>i3({size:1,read:e=>1===e.read8(),write:(e,t)=>t.write8(e?1:0),...e,name:e?.name??"bool",validate:t=>{if(e?.validate?.(t),"boolean"!=typeof t)throw TypeError(`Expected boolean, found ${typeof t}`)}}),uleb128:e=>(function({serialize:e,...t}){let r=new i1({...t,serialize:e,write:(e,t)=>{for(let n of r.serialize(e).toBytes())t.write8(n)}});return r})({read:e=>e.readULEB(),serialize:e=>Uint8Array.from(i$(e)),...e,name:e?.name??"uleb128"}),bytes:(e,t)=>i3({size:e,read:t=>t.readBytes(e),write:(t,r)=>{let n=new Uint8Array(t);for(let t=0;t<e;t++)r.write8(n[t]??0)},...t,name:t?.name??`bytes[${e}]`,validate:r=>{if(t?.validate?.(r),!r||"object"!=typeof r||!("length"in r))throw TypeError(`Expected array, found ${typeof r}`);if(r.length!==e)throw TypeError(`Expected array of length ${e}, found ${r.length}`)}}),byteVector:e=>new i1({read:e=>{let t=e.readULEB();return e.readBytes(t)},write:(e,t)=>{let r=new Uint8Array(e);t.writeULEB(r.length);for(let e=0;e<r.length;e++)t.write8(r[e]??0)},...e,name:e?.name??"vector<u8>",serializedSize:e=>{let t="length"in e?e.length:null;return null==t?null:i$(t).length+t},validate:t=>{if(e?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw TypeError(`Expected array, found ${typeof t}`)}}),string:e=>(function({toBytes:e,fromBytes:t,...r}){return new i1({...r,read:e=>{let r=e.readULEB();return t(e.readBytes(r))},write:(t,r)=>{let n=e(t);r.writeULEB(n.length);for(let e=0;e<n.length;e++)r.write8(n[e])},serialize:t=>{let r=e(t),n=i$(r.length),i=new Uint8Array(n.length+r.length);return i.set(n,0),i.set(r,n.length),i},validate:e=>{if("string"!=typeof e)throw TypeError(`Invalid ${r.name} value: ${e}. Expected string`);r.validate?.(e)}})})({toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...e,name:e?.name??"string"}),fixedArray:function(e,t,r){return new i1({read:r=>{let n=Array(e);for(let i=0;i<e;i++)n[i]=t.read(r);return n},write:(e,r)=>{for(let n of e)t.write(n,r)},...r,name:r?.name??`${t.name}[${e}]`,validate:t=>{if(r?.validate?.(t),!t||"object"!=typeof t||!("length"in t))throw TypeError(`Expected array, found ${typeof t}`);if(t.length!==e)throw TypeError(`Expected array of length ${e}, found ${t.length}`)}})},option:function(e){return st.enum(`Option<${e.name}>`,{None:null,Some:e}).transform({input:e=>null==e?{None:!0}:{Some:e},output:e=>"Some"===e.$kind?e.Some:null})},vector:function(e,t){return new i1({read:t=>{let r=t.readULEB(),n=Array(r);for(let i=0;i<r;i++)n[i]=e.read(t);return n},write:(t,r)=>{for(let n of(r.writeULEB(t.length),t))e.write(n,r)},...t,name:t?.name??`vector<${e.name}>`,validate:e=>{if(t?.validate?.(e),!e||"object"!=typeof e||!("length"in e))throw TypeError(`Expected array, found ${typeof e}`)}})},tuple:(e,t)=>new se({fields:e,...t}),struct:(e,t,r)=>new i7({name:e,fields:t,...r}),enum:(e,t,r)=>new i9({name:e,fields:t,...r}),map:function(e,t){return st.vector(st.tuple([e,t])).transform({name:`Map<${e.name}, ${t.name}>`,input:e=>[...e.entries()],output:e=>{let t=new Map;for(let[r,n]of e)t.set(r,n);return t}})},lazy:e=>(function(e){let t=null;function r(){return t||(t=e()),t}return new i1({name:"lazy",read:e=>r().read(e),serializedSize:e=>r().serializedSize(e),write:(e,t)=>r().write(e,t),serialize:(e,t)=>r().serialize(e,t).toBytes()})})(e)},sr=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,sn=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,si=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,ss=/^\d+$/,so=e=>{var t;let r=e.split("/");if(r.length<2||r.length>3)return!1;let[n,i,o]=r;return!!((void 0===o||ss.test(o))&&!((t=n).length>235)&&(t.includes("@")?sr.test(t):sn.test(t)))&&si.test(i)&&i.length<64},sa=e=>{for(let t of e.split(/::|<|>|,/))if(t.includes("/")&&!so(t))return!1;return!0};function su(e){try{return 32===iA(e).length}catch{return!1}}let sc=32;function sl(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2==0&&(/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2)===sc}function sh(e){let[t,r]=e.split("::"),n=so(t),i=e.slice(t.length+r.length+4),o=i.includes("<")?i.slice(0,i.indexOf("<")):i,a=i.includes("<")?iz(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(e=>{var t;return(t=e.trim()).includes("::")?sh(t):t}):[];return{address:n?t:sf(t),module:r,name:o,typeParams:a}}function sd(e){let{address:t,module:r,name:n,typeParams:i}="string"==typeof e?sh(e):e,o=i?.length>0?`<${i.map(e=>"string"==typeof e?e:sd(e)).join(",")}>`:"";return`${t}::${r}::${n}${o}`}function sf(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(2*sc,"0")}`}function sp(e,t=!1){return sf(e,t)}BigInt(1e9);let sg=sp("0x6"),sm="0x2::sui::SUI";sp("0x5");let sy=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),sb=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),sw=new Uint32Array(32);function sv(e,t,r,n,o,a){let u=o[a],c=o[a+1],l=sw[2*e],h=sw[2*e+1],d=sw[2*t],f=sw[2*t+1],p=sw[2*r],g=sw[2*r+1],m=sw[2*n],y=sw[2*n+1],b=(0,i.bX)(l,d,u);h=(0,i.bP)(b,h,f,c),l=0|b,({Dh:y,Dl:m}={Dh:y^h,Dl:m^l}),({Dh:y,Dl:m}={Dh:(0,i.bR)(y,m),Dl:(0,i.bQ)(y)}),({h:g,l:p}=(0,i.bS)(g,p,y,m)),({Bh:f,Bl:d}={Bh:f^g,Bl:d^p}),({Bh:f,Bl:d}={Bh:(0,i.bU)(f,d,24),Bl:(0,i.bT)(f,d,24)}),sw[2*e]=l,sw[2*e+1]=h,sw[2*t]=d,sw[2*t+1]=f,sw[2*r]=p,sw[2*r+1]=g,sw[2*n]=m,sw[2*n+1]=y}function sk(e,t,r,n,o,a){let u=o[a],c=o[a+1],l=sw[2*e],h=sw[2*e+1],d=sw[2*t],f=sw[2*t+1],p=sw[2*r],g=sw[2*r+1],m=sw[2*n],y=sw[2*n+1],b=(0,i.bX)(l,d,u);h=(0,i.bP)(b,h,f,c),l=0|b,({Dh:y,Dl:m}={Dh:y^h,Dl:m^l}),({Dh:y,Dl:m}={Dh:(0,i.bU)(y,m,16),Dl:(0,i.bT)(y,m,16)}),({h:g,l:p}=(0,i.bS)(g,p,y,m)),({Bh:f,Bl:d}={Bh:f^g,Bl:d^p}),({Bh:f,Bl:d}={Bh:(0,i.bW)(f,d,63),Bl:(0,i.bV)(f,d,63)}),sw[2*e]=l,sw[2*e+1]=h,sw[2*t]=d,sw[2*t+1]=f,sw[2*r]=p,sw[2*r+1]=g,sw[2*n]=m,sw[2*n+1]=y}class sS extends i.bJ{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,(0,i.bK)(e),(0,i.bK)(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=(0,i.bF)(this.buffer)}update(e){(0,i.bL)(this),e=(0,i.bE)(e),(0,i.bM)(e);let{blockLen:t,buffer:r,buffer32:n}=this,o=e.length,a=e.byteOffset,u=e.buffer;for(let c=0;c<o;){this.pos===t&&((0,i.bN)(n),this.compress(n,0,!1),(0,i.bN)(n),this.pos=0);let l=Math.min(t-this.pos,o-c),h=a+c;if(l===t&&!(h%4)&&c+l<o){let e=new Uint32Array(u,h,Math.floor((o-c)/4));(0,i.bN)(e);for(let r=0;c+t<o;r+=n.length,c+=t)this.length+=t,this.compress(e,r,!1);(0,i.bN)(e);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){(0,i.bL)(this),(0,i.bO)(e,this);let{pos:t,buffer32:r}=this;this.finished=!0,(0,i.bI)(this.buffer.subarray(t)),(0,i.bN)(r),this.compress(r,0,!0),(0,i.bN)(r);let n=(0,i.bF)(e);this.get().forEach((e,t)=>n[t]=(0,i.bG)(e))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){let{buffer:t,length:r,finished:n,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(t),e.destroyed=i,e.finished=n,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class sI extends sS{constructor(e={}){let t=void 0===e.dkLen?64:e.dkLen;super(128,t),this.v0l=0|sb[0],this.v0h=0|sb[1],this.v1l=0|sb[2],this.v1h=0|sb[3],this.v2l=0|sb[4],this.v2h=0|sb[5],this.v3l=0|sb[6],this.v3h=0|sb[7],this.v4l=0|sb[8],this.v4h=0|sb[9],this.v5l=0|sb[10],this.v5h=0|sb[11],this.v6l=0|sb[12],this.v6h=0|sb[13],this.v7l=0|sb[14],this.v7h=0|sb[15],function(e,t={},r,n,o){if((0,i.bK)(64),e<0||e>64)throw Error("outputLen bigger than keyLen");let{key:a,salt:u,personalization:c}=t;if(void 0!==a&&(a.length<1||a.length>64))throw Error("key length must be undefined or 1.."+r);if(void 0!==u&&16!==u.length)throw Error("salt must be undefined or 16");if(void 0!==c&&16!==c.length)throw Error("personalization must be undefined or 16")}(t,e,64,0,0);let{key:r,personalization:n,salt:o}=e,a=0;if(void 0!==r&&(a=(r=(0,i.bE)(r)).length),this.v0l^=this.outputLen|a<<8|16842752,void 0!==o){o=(0,i.bE)(o);let e=(0,i.bF)(o);this.v4l^=(0,i.bG)(e[0]),this.v4h^=(0,i.bG)(e[1]),this.v5l^=(0,i.bG)(e[2]),this.v5h^=(0,i.bG)(e[3])}if(void 0!==n){n=(0,i.bE)(n);let e=(0,i.bF)(n);this.v6l^=(0,i.bG)(e[0]),this.v6h^=(0,i.bG)(e[1]),this.v7l^=(0,i.bG)(e[2]),this.v7h^=(0,i.bG)(e[3])}if(void 0!==r){let e=new Uint8Array(this.blockLen);e.set(r),this.update(e)}}get(){let{v0l:e,v0h:t,v1l:r,v1h:n,v2l:i,v2h:o,v3l:a,v3h:u,v4l:c,v4h:l,v5l:h,v5h:d,v6l:f,v6h:p,v7l:g,v7h:m}=this;return[e,t,r,n,i,o,a,u,c,l,h,d,f,p,g,m]}set(e,t,r,n,i,o,a,u,c,l,h,d,f,p,g,m){this.v0l=0|e,this.v0h=0|t,this.v1l=0|r,this.v1h=0|n,this.v2l=0|i,this.v2h=0|o,this.v3l=0|a,this.v3h=0|u,this.v4l=0|c,this.v4h=0|l,this.v5l=0|h,this.v5h=0|d,this.v6l=0|f,this.v6h=0|p,this.v7l=0|g,this.v7h=0|m}compress(e,t,r){this.get().forEach((e,t)=>sw[t]=e),sw.set(sb,16);let{h:n,l:o}=(0,i.bH)(BigInt(this.length));sw[24]=sb[8]^o,sw[25]=sb[9]^n,r&&(sw[28]=~sw[28],sw[29]=~sw[29]);let a=0;for(let r=0;r<12;r++)sv(0,4,8,12,e,t+2*sy[a++]),sk(0,4,8,12,e,t+2*sy[a++]),sv(1,5,9,13,e,t+2*sy[a++]),sk(1,5,9,13,e,t+2*sy[a++]),sv(2,6,10,14,e,t+2*sy[a++]),sk(2,6,10,14,e,t+2*sy[a++]),sv(3,7,11,15,e,t+2*sy[a++]),sk(3,7,11,15,e,t+2*sy[a++]),sv(0,5,10,15,e,t+2*sy[a++]),sk(0,5,10,15,e,t+2*sy[a++]),sv(1,6,11,12,e,t+2*sy[a++]),sk(1,6,11,12,e,t+2*sy[a++]),sv(2,7,8,13,e,t+2*sy[a++]),sk(2,7,8,13,e,t+2*sy[a++]),sv(3,4,9,14,e,t+2*sy[a++]),sk(3,4,9,14,e,t+2*sy[a++]);this.v0l^=sw[0]^sw[16],this.v0h^=sw[1]^sw[17],this.v1l^=sw[2]^sw[18],this.v1h^=sw[3]^sw[19],this.v2l^=sw[4]^sw[20],this.v2h^=sw[5]^sw[21],this.v3l^=sw[6]^sw[22],this.v3h^=sw[7]^sw[23],this.v4l^=sw[8]^sw[24],this.v4h^=sw[9]^sw[25],this.v5l^=sw[10]^sw[26],this.v5h^=sw[11]^sw[27],this.v6l^=sw[12]^sw[28],this.v6h^=sw[13]^sw[29],this.v7l^=sw[14]^sw[30],this.v7h^=sw[15]^sw[31],(0,i.bI)(sw)}destroy(){this.destroyed=!0,(0,i.bI)(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let sE=(0,i.bD)(e=>new sI(e)),sA=/^vector<(.+)>$/,s_=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class sx{static parseFromStr(e,t=!1){if("address"===e)return{address:null};if("bool"===e)return{bool:null};if("u8"===e)return{u8:null};if("u16"===e)return{u16:null};if("u32"===e)return{u32:null};if("u64"===e)return{u64:null};if("u128"===e)return{u128:null};if("u256"===e)return{u256:null};if("signer"===e)return{signer:null};let r=e.match(sA);if(r)return{vector:sx.parseFromStr(r[1],t)};let n=e.match(s_);if(n)return{struct:{address:t?sf(n[1]):n[1],module:n[2],name:n[3],typeParams:void 0===n[5]?[]:sx.parseStructTypeArgs(n[5],t)}};throw Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,t=!1){return iz(e).map(e=>sx.parseFromStr(e,t))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${sx.tagToString(e.vector)}>`;if("struct"in e){let t=e.struct,r=t.typeParams.map(sx.tagToString).join(", ");return`${t.address}::${t.module}::${t.name}${r?`<${r}>`:""}`}throw Error("Invalid TypeTag")}}let sM=st.bytes(sc).transform({validate:e=>{let t="string"==typeof e?e:iT(e);if(!t||!sl(sf(t)))throw Error(`Invalid Sui address ${t}`)},input:e=>"string"==typeof e?iM(sf(e)):e,output:e=>sf(iT(e))}),sT=st.vector(st.u8()).transform({name:"ObjectDigest",input:e=>iA(e),output:e=>iE(new Uint8Array(e)),validate:e=>{if(32!==iA(e).length)throw Error("ObjectDigest must be 32 bytes")}}),sO=st.struct("SuiObjectRef",{objectId:sM,version:st.u64(),digest:sT}),sP=st.struct("SharedObjectRef",{objectId:sM,initialSharedVersion:st.u64(),mutable:st.bool()}),sB=st.enum("ObjectArg",{ImmOrOwnedObject:sO,SharedObject:sP,Receiving:sO}),sC=st.enum("Owner",{AddressOwner:sM,ObjectOwner:sM,Shared:st.struct("Shared",{initialSharedVersion:st.u64()}),Immutable:null,ConsensusAddressOwner:st.struct("ConsensusAddressOwner",{owner:sM,startVersion:st.u64()})}),sR=st.enum("CallArg",{Pure:st.struct("Pure",{bytes:st.vector(st.u8()).transform({input:e=>"string"==typeof e?i_(e):e,output:e=>ix(new Uint8Array(e))})}),Object:sB}),sj=st.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:st.lazy(()=>sj),struct:st.lazy(()=>sV),u16:null,u32:null,u256:null}),s$=sj.transform({input:e=>"string"==typeof e?sx.parseFromStr(e,!0):e,output:e=>sx.tagToString(e)}),sU=st.enum("Argument",{GasCoin:null,Input:st.u16(),Result:st.u16(),NestedResult:st.tuple([st.u16(),st.u16()])}),sz=st.struct("ProgrammableMoveCall",{package:sM,module:st.string(),function:st.string(),typeArguments:st.vector(s$),arguments:st.vector(sU)}),sL=st.enum("Command",{MoveCall:sz,TransferObjects:st.struct("TransferObjects",{objects:st.vector(sU),address:sU}),SplitCoins:st.struct("SplitCoins",{coin:sU,amounts:st.vector(sU)}),MergeCoins:st.struct("MergeCoins",{destination:sU,sources:st.vector(sU)}),Publish:st.struct("Publish",{modules:st.vector(st.vector(st.u8()).transform({input:e=>"string"==typeof e?i_(e):e,output:e=>ix(new Uint8Array(e))})),dependencies:st.vector(sM)}),MakeMoveVec:st.struct("MakeMoveVec",{type:st.enum("Option",{None:null,Some:s$}).transform({input:e=>null===e?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:st.vector(sU)}),Upgrade:st.struct("Upgrade",{modules:st.vector(st.vector(st.u8()).transform({input:e=>"string"==typeof e?i_(e):e,output:e=>ix(new Uint8Array(e))})),dependencies:st.vector(sM),package:sM,ticket:sU})}),sN=st.struct("ProgrammableTransaction",{inputs:st.vector(sR),commands:st.vector(sL)}),sD=st.enum("TransactionKind",{ProgrammableTransaction:sN,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),sW=st.enum("TransactionExpiration",{None:null,Epoch:st.u64({name:"unsafe_u64"}).transform({input:e=>e,output:e=>Number(e)})}),sV=st.struct("StructTag",{address:sM,module:st.string(),name:st.string(),typeParams:st.vector(sj)}),sK=st.struct("GasData",{payment:st.vector(sO),owner:sM,price:st.u64(),budget:st.u64()}),sq=st.struct("TransactionDataV1",{kind:sD,sender:sM,gasData:sK,expiration:sW}),sF=st.enum("TransactionData",{V1:sq}),sH=st.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),sG=st.enum("IntentVersion",{V0:null}),sJ=st.enum("AppId",{Sui:null}),sY=st.struct("Intent",{scope:sH,version:sG,appId:sJ});function sZ(e){return st.struct(`IntentMessage<${e.name}>`,{intent:sY,value:e})}let sX=st.enum("CompressedSignature",{ED25519:st.fixedArray(64,st.u8()),Secp256k1:st.fixedArray(64,st.u8()),Secp256r1:st.fixedArray(64,st.u8()),ZkLogin:st.vector(st.u8()),Passkey:st.vector(st.u8())}),sQ=st.enum("PublicKey",{ED25519:st.fixedArray(32,st.u8()),Secp256k1:st.fixedArray(33,st.u8()),Secp256r1:st.fixedArray(33,st.u8()),ZkLogin:st.vector(st.u8()),Passkey:st.fixedArray(33,st.u8())}),s0=st.struct("MultiSigPkMap",{pubKey:sQ,weight:st.u8()}),s1=st.struct("MultiSigPublicKey",{pk_map:st.vector(s0),threshold:st.u16()}),s2=st.struct("MultiSig",{sigs:st.vector(sX),bitmap:st.u16(),multisig_pk:s1}),s6=st.vector(st.u8()).transform({input:e=>"string"==typeof e?i_(e):e,output:e=>ix(new Uint8Array(e))}),s8=st.struct("SenderSignedTransaction",{intentMessage:sZ(sF),txSignatures:st.vector(s6)}),s3=st.vector(s8,{name:"SenderSignedData"}),s5=st.struct("PasskeyAuthenticator",{authenticatorData:st.vector(st.u8()),clientDataJson:st.string(),userSignature:st.vector(st.u8())}),s4=st.enum("PackageUpgradeError",{UnableToFetchPackage:st.struct("UnableToFetchPackage",{packageId:sM}),NotAPackage:st.struct("NotAPackage",{objectId:sM}),IncompatibleUpgrade:null,DigestDoesNotMatch:st.struct("DigestDoesNotMatch",{digest:st.vector(st.u8())}),UnknownUpgradePolicy:st.struct("UnknownUpgradePolicy",{policy:st.u8()}),PackageIDDoesNotMatch:st.struct("PackageIDDoesNotMatch",{packageId:sM,ticketId:sM})}),s7=st.struct("ModuleId",{address:sM,name:st.string()}),s9=st.struct("MoveLocation",{module:s7,function:st.u16(),instruction:st.u16(),functionName:st.option(st.string())}),oe=st.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:st.struct("IndexOutOfBounds",{idx:st.u16()}),SecondaryIndexOutOfBounds:st.struct("SecondaryIndexOutOfBounds",{resultIdx:st.u16(),secondaryIdx:st.u16()}),InvalidResultArity:st.struct("InvalidResultArity",{resultIdx:st.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),ot=st.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),or=st.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:st.struct("MoveObjectTooBig",{objectSize:st.u64(),maxObjectSize:st.u64()}),MovePackageTooBig:st.struct("MovePackageTooBig",{objectSize:st.u64(),maxObjectSize:st.u64()}),CircularObjectOwnership:st.struct("CircularObjectOwnership",{object:sM}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:st.option(s9),MoveAbort:st.tuple([s9,st.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:st.struct("CommandArgumentError",{argIdx:st.u16(),kind:oe}),TypeArgumentError:st.struct("TypeArgumentError",{argumentIdx:st.u16(),kind:ot}),UnusedValueWithoutDrop:st.struct("UnusedValueWithoutDrop",{resultIdx:st.u16(),secondaryIdx:st.u16()}),InvalidPublicFunctionReturnType:st.struct("InvalidPublicFunctionReturnType",{idx:st.u16()}),InvalidTransferObject:null,EffectsTooLarge:st.struct("EffectsTooLarge",{currentSize:st.u64(),maxSize:st.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:st.struct("PackageUpgradeError",{upgradeError:s4}),WrittenObjectsTooLarge:st.struct("WrittenObjectsTooLarge",{currentSize:st.u64(),maxSize:st.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:st.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:st.vector(sM)}),AddressDeniedForCoin:st.struct("AddressDeniedForCoin",{address:sM,coinType:st.string()}),CoinTypeGlobalPause:st.struct("CoinTypeGlobalPause",{coinType:st.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),on=st.enum("ExecutionStatus",{Success:null,Failed:st.struct("ExecutionFailed",{error:or,command:st.option(st.u64())})}),oi=st.struct("GasCostSummary",{computationCost:st.u64(),storageCost:st.u64(),storageRebate:st.u64(),nonRefundableStorageFee:st.u64()}),os=st.struct("TransactionEffectsV1",{status:on,executedEpoch:st.u64(),gasUsed:oi,modifiedAtVersions:st.vector(st.tuple([sM,st.u64()])),sharedObjects:st.vector(sO),transactionDigest:sT,created:st.vector(st.tuple([sO,sC])),mutated:st.vector(st.tuple([sO,sC])),unwrapped:st.vector(st.tuple([sO,sC])),deleted:st.vector(sO),unwrappedThenDeleted:st.vector(sO),wrapped:st.vector(sO),gasObject:st.tuple([sO,sC]),eventsDigest:st.option(sT),dependencies:st.vector(sT)}),oo=st.tuple([st.u64(),sT]),oa=st.enum("ObjectIn",{NotExist:null,Exist:st.tuple([oo,sC])}),ou=st.enum("ObjectOut",{NotExist:null,ObjectWrite:st.tuple([sT,sC]),PackageWrite:oo}),oc=st.enum("IDOperation",{None:null,Created:null,Deleted:null}),ol=st.struct("EffectsObjectChange",{inputState:oa,outputState:ou,idOperation:oc}),oh=st.enum("UnchangedSharedKind",{ReadOnlyRoot:oo,MutateDeleted:st.u64(),ReadDeleted:st.u64(),Cancelled:st.u64(),PerEpochConfig:null}),od=st.struct("TransactionEffectsV2",{status:on,executedEpoch:st.u64(),gasUsed:oi,transactionDigest:sT,gasObjectIndex:st.option(st.u32()),eventsDigest:st.option(sT),dependencies:st.vector(sT),lamportVersion:st.u64(),changedObjects:st.vector(st.tuple([sM,ol])),unchangedSharedObjects:st.vector(st.tuple([sM,oh])),auxDataDigest:st.option(sT)}),of=st.enum("TransactionEffects",{V1:os,V2:od});function op(e){switch(e){case"u8":return st.u8();case"u16":return st.u16();case"u32":return st.u32();case"u64":return st.u64();case"u128":return st.u128();case"u256":return st.u256();case"bool":return st.bool();case"string":return st.string();case"id":case"address":return sM}let t=e.match(/^(vector|option)<(.+)>$/);if(t){let[e,r]=t.slice(1);return"vector"===e?st.vector(op(r)):st.option(op(r))}throw Error(`Invalid Pure type name: ${e}`)}let og={...st,U8:st.u8(),U16:st.u16(),U32:st.u32(),U64:st.u64(),U128:st.u128(),U256:st.u256(),ULEB128:st.uleb128(),Bool:st.bool(),String:st.string(),Address:sM,AppId:sJ,Argument:sU,CallArg:sR,Command:sL,CompressedSignature:sX,GasData:sK,Intent:sY,IntentMessage:sZ,IntentScope:sH,IntentVersion:sG,MultiSig:s2,MultiSigPkMap:s0,MultiSigPublicKey:s1,ObjectArg:sB,ObjectDigest:sT,Owner:sC,PasskeyAuthenticator:s5,ProgrammableMoveCall:sz,ProgrammableTransaction:sN,PublicKey:sQ,SenderSignedData:s3,SenderSignedTransaction:s8,SharedObjectRef:sP,StructTag:sV,SuiObjectRef:sO,TransactionData:sF,TransactionDataV1:sq,TransactionEffects:of,TransactionExpiration:sW,TransactionKind:sD,TypeTag:s$},om="::",oy="0x2::sui::SUI",ob=e=>/^(0x)?[0-9a-fA-F]+::\w+::\w+$/.test(e),ow=e=>e.replace(/(0x)(0*)/g,"0x");function ov(e){return e=(e=e.startsWith("0x")?e.slice(2):e).length%2==0?e:"0"+e,`0x${64===e.length?e:i.m.encode(i.an.zpad(i.m.decode(e),32))}`}let ok=e=>{let t=e.split(om);if(3!==t.length)throw Error(`Invalid Sui type: ${e}`);return[sf(t[0]),t[1],t[2]].join(om)},oS=e=>new oA(e).getCoinType(),oI=e=>new oA(e).getPackageId(),oE=e=>{let t=ow(e).match(/0x2::table::Table<(.*)>/);if(!t||t.length<2)throw Error(`Invalid table type: ${e}`);let[r]=t[1].split(",");if(!r||!ob(r))throw Error(`Invalid key type: ${r}`);return r},oA=class e{static byteSize=32;static platform="Sui";address;module;constructor(t){if(e.instanceof(t))this.address=t.address,this.module=t.module;else if(i.ai.instanceof(t))this.address=t.toUint8Array();else if("string"==typeof t){if(ob(t)){let e=t.split(om);this.module=e.slice(1).join(om),t=e[0]}if(t=ov(t),!i.m.valid(t))throw Error("Invalid Sui address: "+t);this.address=i.m.decode(t)}else this.address=t}unwrap(){let e=this.getPackageId(),t=this.module?om+this.module:"";return`${e}${t}`}toString(){return this.unwrap()}toNative(){return this}toUint8Array(){return this.address}toUniversalAddress(){return new i.ai(this.toUint8Array())}getPackageId(){return ov(i.m.encode(this.address))}getCoinType(){if("sui::SUI"===this.module)return oy;if(!this.module)throw Error("No module present in Sui token address");return this.unwrap()}static instanceof(t){return t.constructor.platform===e.platform}equals(t){return e.instanceof(t)?t.unwrap()===this.unwrap():this.toUniversalAddress().equals(t)}};(0,i.b0)("Sui",oA);class o_{transaction;network;chain;description;parallelizable;constructor(e,t,r,n,i=!1){this.transaction=e,this.network=t,this.chain=r,this.description=n,this.parallelizable=i}}let ox="1.37.2",oM={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class oT extends Error{}class oO extends oT{constructor(e,t){super(e),this.code=t,this.type=oM[t]??"ServerError"}}class oP extends oT{constructor(e,t,r){super(e),this.status=t,this.statusText=r}}var oB,oC,oR,oj,o$,oU,oz,oL,oN,oD=e=>{throw TypeError(e)},oW=(e,t,r)=>t.has(e)||oD("Cannot "+r),oV=(e,t,r)=>(oW(e,t,"read from private field"),r?r.call(e):t.get(e)),oK=(e,t,r)=>t.has(e)?oD("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),oq=(e,t,r,n)=>(oW(e,t,"write to private field"),t.set(e,r),r),oF=(e,t,r)=>(oW(e,t,"access private method"),r),oH=(e,t,r,n)=>({set _(s){oq(e,t,s)},get _(){return oV(e,t,n)}});let oG={WebSocketConstructor:"u">typeof WebSocket?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class oJ{constructor(e,t={}){if(oK(this,oz),oK(this,oB,0),oK(this,oC,0),oK(this,oR,null),oK(this,oj,null),oK(this,o$,new Set),oK(this,oU,new Map),this.endpoint=e,this.options={...oG,...t},!this.options.WebSocketConstructor)throw Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=function(e){let t=new URL(e);return t.protocol=t.protocol.replace("http","ws"),t.toString()}(this.endpoint))}async makeRequest(e,t,r){let n=await oF(this,oz,oL).call(this);return new Promise((i,o)=>{oq(this,oB,oV(this,oB)+1),oV(this,oU).set(oV(this,oB),{resolve:i,reject:o,timeout:setTimeout(()=>{oV(this,oU).delete(oV(this,oB)),o(Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r?.addEventListener("abort",()=>{oV(this,oU).delete(oV(this,oB)),o(r.reason)}),n.send(JSON.stringify({jsonrpc:"2.0",id:oV(this,oB),method:e,params:t}))}).then(({error:e,result:t})=>{if(e)throw new oO(e.message,e.code);return t})}async subscribe(e){let t=new oY(e);return oV(this,o$).add(t),await t.subscribe(this),()=>t.unsubscribe(this)}}oB=new WeakMap,oC=new WeakMap,oR=new WeakMap,oj=new WeakMap,o$=new WeakMap,oU=new WeakMap,oz=new WeakSet,oL=function(){return oV(this,oj)||oq(this,oj,new Promise(e=>{oV(this,oR)?.close(),oq(this,oR,new this.options.WebSocketConstructor(this.endpoint)),oV(this,oR).addEventListener("open",()=>{oq(this,oC,0),e(oV(this,oR))}),oV(this,oR).addEventListener("close",()=>{oH(this,oC)._++,oV(this,oC)<=this.options.maxReconnects&&setTimeout(()=>{oF(this,oz,oN).call(this)},this.options.reconnectTimeout)}),oV(this,oR).addEventListener("message",({data:e})=>{let t;try{t=JSON.parse(e)}catch(t){console.error(Error(`Failed to parse RPC message: ${e}`,{cause:t}));return}if("id"in t&&null!=t.id&&oV(this,oU).has(t.id)){let{resolve:e,timeout:r}=oV(this,oU).get(t.id);clearTimeout(r),e(t)}else if("params"in t){let{params:e}=t;oV(this,o$).forEach(t=>{t.subscriptionId===e.subscription&&e.subscription===t.subscriptionId&&t.onMessage(e.result)})}})})),oV(this,oj)},oN=async function(){return oV(this,oR)?.close(),oq(this,oj,null),Promise.allSettled([...oV(this,o$)].map(e=>e.subscribe(this)))};class oY{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){let{subscriptionId:t}=this;return this.subscribed=!1,null!=t&&(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[t]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;let t=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=t)}}var oZ,oX,oQ,o0,o1,o2=e=>{throw TypeError(e)},o6=(e,t,r)=>t.has(e)||o2("Cannot "+r),o8=(e,t,r)=>(o6(e,t,"read from private field"),r?r.call(e):t.get(e)),o3=(e,t,r)=>t.has(e)?o2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),o5=(e,t,r,n)=>(o6(e,t,"write to private field"),t.set(e,r),r),o4=(e,t,r)=>(o6(e,t,"access private method"),r);class o7{constructor(e){o3(this,o0),o3(this,oZ,0),o3(this,oX),o3(this,oQ),o5(this,oX,e)}fetch(e,t){let r=o8(this,oX).fetch??fetch;if(!r)throw Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,t)}async request(e){o5(this,oZ,o8(this,oZ)+1);let t=await this.fetch(o8(this,oX).rpc?.url??o8(this,oX).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":ox,"Client-Target-Api-Version":"1.55.0","Client-Request-Method":e.method,...o8(this,oX).rpc?.headers},body:JSON.stringify({jsonrpc:"2.0",id:o8(this,oZ),method:e.method,params:e.params})});if(!t.ok)throw new oP(`Unexpected status code: ${t.status}`,t.status,t.statusText);let r=await t.json();if("error"in r&&null!=r.error)throw new oO(r.error.message,r.error.code);return r.result}async subscribe(e){let t=await o4(this,o0,o1).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{t()})),async()=>!!await t()}}oZ=new WeakMap,oX=new WeakMap,oQ=new WeakMap,o0=new WeakSet,o1=function(){if(!o8(this,oQ)){let e=o8(this,oX).WebSocketConstructor??WebSocket;if(!e)throw Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");o5(this,oQ,new oJ(o8(this,oX).websocket?.url??o8(this,oX).url,{WebSocketConstructor:e,...o8(this,oX).websocket}))}return o8(this,oQ)};var o9,ae,at=e=>{throw TypeError(e)},ar=(e,t,r)=>t.has(e)||at("Cannot "+r),an=(e,t,r)=>(ar(e,t,"read from private field"),t.get(e)),ai=(e,t,r)=>t.has(e)?at("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),as=(e,t,r,n)=>(ar(e,t,"write to private field"),t.set(e,r),r);let ao=class e{constructor({prefix:e,cache:t}={}){ai(this,o9),ai(this,ae),as(this,o9,e??[]),as(this,ae,t??new Map)}read(e,t){let r=[an(this,o9),...e].join(":");if(an(this,ae).has(r))return an(this,ae).get(r);let n=t();return an(this,ae).set(r,n),"object"==typeof n&&null!==n&&"then"in n?Promise.resolve(n).then(e=>(an(this,ae).set(r,e),e)).catch(e=>{throw an(this,ae).delete(r),e}):n}readSync(e,t){let r=[an(this,o9),...e].join(":");if(an(this,ae).has(r))return an(this,ae).get(r);let n=t();return an(this,ae).set(r,n),n}clear(e){let t=[...an(this,o9),...e??[]].join(":");if(!t){an(this,ae).clear();return}for(let e of an(this,ae).keys())e.startsWith(t)&&an(this,ae).delete(e)}scope(t){return new e({prefix:[...an(this,o9),...Array.isArray(t)?t:[t]],cache:an(this,ae)})}};o9=new WeakMap,ae=new WeakMap;class aa{constructor({network:e,base:t,cache:r=t?.cache??new ao}){this.network=e,this.base=t??this,this.cache=r}$extend(...e){return Object.create(this,Object.fromEntries(e.map(e=>{if("experimental_asClientExtension"in e){let{name:t,register:r}=e.experimental_asClientExtension();return[t,{value:r(this)}]}return[e.name,{value:e.register(this)}]})))}}function au(e){let t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function ac(e,t,r,n,i){var o,a,u,c;let l=i&&"input"in i?i.input:r.value,h=i?.expected??e.expects??null,d=i?.received??au(l),f={kind:e.kind,type:e.type,input:l,expected:h,received:d,message:`Invalid ${t}: ${h?`Expected ${h} but r`:"R"}eceived ${d}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},p="schema"===e.kind,g=i?.message??e.message??(o=e.reference,a=f.lang,uj?.get(o)?.get(a))??(p?(u=f.lang,uR?.get(u)):null)??n.message??(c=f.lang,uC?.get(c));g&&(f.message="function"==typeof g?g(f):g),p&&(r.typed=!1),r.issues?r.issues.push(f):r.issues=[f]}var al=class extends Error{issues;constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function ah(e,t){return{kind:"validation",type:"check",reference:ah,async:!1,expects:null,requirement:e,message:t,_run(e,t){return e.typed&&!this.requirement(e.value)&&ac(this,"input",e,t),e}}}function ad(e){return{kind:"validation",type:"integer",reference:ad,async:!1,expects:null,requirement:Number.isInteger,message:e,_run(e,t){return e.typed&&!this.requirement(e.value)&&ac(this,"integer",e,t),e}}}function af(e){return{kind:"transformation",type:"transform",reference:af,async:!1,operation:e,_run(e){return e.value=this.operation(e.value),e}}}function ap(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function ag(e,t){return!e._run({typed:!1,value:t},{abortEarly:!0}).issues}function am(e,t){return{kind:"schema",type:"array",reference:am,expects:"Array",async:!1,item:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<r.length;n++){let i=r[n],o=this.item._run({typed:!1,value:i},t);if(o.issues){let a={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else ac(this,"type",e,t);return e}}}function ay(e){return{kind:"schema",type:"bigint",reference:ay,expects:"bigint",async:!1,message:e,_run(e,t){return"bigint"==typeof e.value?e.typed=!0:ac(this,"type",e,t),e}}}function ab(e){return{kind:"schema",type:"boolean",reference:ab,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:ac(this,"type",e,t),e}}}function aw(e){return{kind:"schema",type:"lazy",reference:aw,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function av(e,t){return{kind:"schema",type:"literal",reference:av,expects:au(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:ac(this,"type",e,t),e}}}function ak(e,...t){let r={kind:"schema",type:"nullable",reference:ak,expects:`${e.expects} | null`,async:!1,wrapped:e,_run(e,t){return null===e.value&&("default"in this&&(e.value=ap(this,e,t)),null===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function aS(e,...t){let r={kind:"schema",type:"nullish",reference:aS,expects:`${e.expects} | null | undefined`,async:!1,wrapped:e,_run(e,t){return(null===e.value||void 0===e.value)&&("default"in this&&(e.value=ap(this,e,t)),null===e.value||void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function aI(e){return{kind:"schema",type:"number",reference:aI,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?ac(this,"type",e,t):e.typed=!0,e}}}function aE(e,t){return{kind:"schema",type:"object",reference:aE,expects:"Object",async:!1,entries:e,message:t,_run(e,t){let r=e.value;if(r&&"object"==typeof r)for(let n in e.typed=!0,e.value={},this.entries){let i=r[n],o=this.entries[n]._run({typed:!1,value:i},t);if(o.issues){let a={type:"object",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),(void 0!==o.value||n in r)&&(e.value[n]=o.value)}else ac(this,"type",e,t);return e}}}function aA(e,...t){let r={kind:"schema",type:"optional",reference:aA,expects:`${e.expects} | undefined`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=ap(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(r.default=t[0]),r}function a_(e,t,r){return{kind:"schema",type:"record",reference:a_,expects:"Object",async:!1,key:e,value:t,message:r,_run(e,t){let r=e.value;if(r&&"object"==typeof r){for(let n in e.typed=!0,e.value={},r)if(Object.hasOwn(r,n)&&"__proto__"!==n&&"prototype"!==n&&"constructor"!==n){let i=r[n],o=this.key._run({typed:!1,value:n},t);if(o.issues){let a={type:"object",origin:"key",input:r,key:n,value:i};for(let t of o.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let a=this.value._run({typed:!1,value:i},t);if(a.issues){let o={type:"object",origin:"value",input:r,key:n,value:i};for(let t of a.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}o.typed&&a.typed||(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else ac(this,"type",e,t);return e}}}function ax(e){return{kind:"schema",type:"string",reference:ax,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:ac(this,"type",e,t),e}}}function aM(e,t){return{kind:"schema",type:"tuple",reference:aM,expects:"Array",async:!1,items:e,message:t,_run(e,t){let r=e.value;if(Array.isArray(r)){e.typed=!0,e.value=[];for(let n=0;n<this.items.length;n++){let i=r[n],o=this.items[n]._run({typed:!1,value:i},t);if(o.issues){let a={type:"array",origin:"value",input:r,key:n,value:i};for(let t of o.issues)t.path?t.path.unshift(a):t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value.push(o.value)}}else ac(this,"type",e,t);return e}}}function aT(e){let t;if(e)for(let r of e)t?t.push(...r.issues):t=r.issues;return t}function aO(e,t){return{kind:"schema",type:"union",reference:aO,expects:[...new Set(e.map(e=>e.expects))].join(" | ")||"never",async:!1,options:e,message:t,_run(e,t){let r,n,i;for(let o of this.options){let a=o._run({typed:!1,value:e.value},t);if(a.typed){if(a.issues)n?n.push(a):n=[a];else{r=a;break}}else i?i.push(a):i=[a]}if(r)return r;if(n){if(1===n.length)return n[0];ac(this,"type",e,t,{issues:aT(n)}),e.typed=!0}else{if(i?.length===1)return i[0];ac(this,"type",e,t,{issues:aT(i)})}return e}}}function aP(){return{kind:"schema",type:"unknown",reference:aP,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function aB(e,t,r){let n=e._run({typed:!1,value:t},{lang:r?.lang??uB?.lang,message:r?.message,abortEarly:r?.abortEarly??uB?.abortEarly,abortPipeEarly:r?.abortPipeEarly??uB?.abortPipeEarly});if(n.issues)throw new al(n.issues);return n.value}function aC(...e){return{...e[0],pipe:e,_run(t,r){for(let n=0;n<e.length;n++){if(t.issues&&("schema"===e[n].kind||"transformation"===e[n].kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=e[n]._run(t,r))}return t}}}function aR(e){return aC(aO(Object.entries(e).map(([e,t])=>aE({[e]:t}))),af(e=>({...e,$kind:Object.keys(e)[0]})))}let aj=aC(ax(),af(e=>sf(e)),ah(sl)),a$=ax(),aU=aC(aO([ax(),aC(aI(),ad())]),ah(e=>{try{return BigInt(e),BigInt(e)>=0&&0xffffffffffffffffn>=BigInt(e)}catch{return!1}},"Invalid u64")),az=aE({objectId:aj,version:aU,digest:ax()}),aL=aC(aO([aE({GasCoin:av(!0)}),aE({Input:aC(aI(),ad()),type:aA(av("pure"))}),aE({Input:aC(aI(),ad()),type:aA(av("object"))}),aE({Result:aC(aI(),ad())}),aE({NestedResult:aM([aC(aI(),ad()),aC(aI(),ad())])})]),af(e=>({...e,$kind:Object.keys(e)[0]}))),aN=aE({budget:ak(aU),price:ak(aU),owner:ak(aj),payment:ak(am(az))}),aD=aO([av("address"),av("bool"),av("u8"),av("u16"),av("u32"),av("u64"),av("u128"),av("u256"),aE({vector:aw(()=>aD)}),aE({datatype:aE({package:ax(),module:ax(),type:ax(),typeParameters:am(aw(()=>aD))})}),aE({typeParameter:aC(aI(),ad())})]),aW=aE({ref:ak(aO([av("&"),av("&mut")])),body:aD}),aV=aE({package:aj,module:ax(),function:ax(),typeArguments:am(ax()),arguments:am(aL),_argumentTypes:aA(ak(am(aW)))}),aK=aE({name:ax(),inputs:a_(ax(),aO([aL,am(aL)])),data:a_(ax(),aP())}),aq=aR({MoveCall:aV,TransferObjects:aE({objects:am(aL),address:aL}),SplitCoins:aE({coin:aL,amounts:am(aL)}),MergeCoins:aE({destination:aL,sources:am(aL)}),Publish:aE({modules:am(a$),dependencies:am(aj)}),MakeMoveVec:aE({type:ak(ax()),elements:am(aL)}),Upgrade:aE({modules:am(a$),dependencies:am(aj),package:aj,ticket:aL}),$Intent:aK}),aF=aR({ImmOrOwnedObject:az,SharedObject:aE({objectId:aj,initialSharedVersion:aU,mutable:ab()}),Receiving:az}),aH=aR({Object:aF,Pure:aE({bytes:a$}),UnresolvedPure:aE({value:aP()}),UnresolvedObject:aE({objectId:aj,version:aA(ak(aU)),digest:aA(ak(ax())),initialSharedVersion:aA(ak(aU))})}),aG=aR({Object:aF,Pure:aE({bytes:a$})}),aJ=aR({None:av(!0),Epoch:aU}),aY=aE({version:av(2),sender:aS(aj),expiration:aS(aJ),gasData:aN,inputs:am(aH),commands:am(aq)}),aZ={MoveCall(e){let[t,r="",n=""]="target"in e?e.target.split("::"):[e.package,e.module,e.function];return{$kind:"MoveCall",MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments??[],arguments:e.arguments??[]}}},TransferObjects:(e,t)=>({$kind:"TransferObjects",TransferObjects:{objects:e.map(e=>aB(aL,e)),address:aB(aL,t)}}),SplitCoins:(e,t)=>({$kind:"SplitCoins",SplitCoins:{coin:aB(aL,e),amounts:t.map(e=>aB(aL,e))}}),MergeCoins:(e,t)=>({$kind:"MergeCoins",MergeCoins:{destination:aB(aL,e),sources:t.map(e=>aB(aL,e))}}),Publish:({modules:e,dependencies:t})=>({$kind:"Publish",Publish:{modules:e.map(e=>"string"==typeof e?e:ix(new Uint8Array(e))),dependencies:t.map(e=>sp(e))}}),Upgrade:({modules:e,dependencies:t,package:r,ticket:n})=>({$kind:"Upgrade",Upgrade:{modules:e.map(e=>"string"==typeof e?e:ix(new Uint8Array(e))),dependencies:t.map(e=>sp(e)),package:r,ticket:aB(aL,n)}}),MakeMoveVec:({type:e,elements:t})=>({$kind:"MakeMoveVec",MakeMoveVec:{type:e??null,elements:t.map(e=>aB(aL,e))}}),Intent:({name:e,inputs:t={},data:r={}})=>({$kind:"$Intent",$Intent:{name:e,inputs:Object.fromEntries(Object.entries(t).map(([e,t])=>[e,Array.isArray(t)?t.map(e=>aB(aL,e)):aB(aL,t)])),data:r}})},aX=aE({digest:ax(),objectId:ax(),version:aO([aC(aI(),ad()),ax(),ay()])}),aQ=aR({ImmOrOwned:aX,Shared:aE({objectId:aj,initialSharedVersion:aU,mutable:ab()}),Receiving:aX}),a0=aR({Object:aQ,Pure:am(aC(aI(),ad()))}),a1=aO([aE({kind:av("Input"),index:aC(aI(),ad()),value:aP(),type:aA(av("object"))}),aE({kind:av("Input"),index:aC(aI(),ad()),value:aP(),type:av("pure")})]),a2=aO([aE({Epoch:aC(aI(),ad())}),aE({None:ak(av(!0))})]),a6=aC(aO([aI(),ax(),ay()]),ah(e=>{if(!["string","number","bigint"].includes(typeof e))return!1;try{return BigInt(e),!0}catch{return!1}})),a8=aO([aE({bool:ak(av(!0))}),aE({u8:ak(av(!0))}),aE({u64:ak(av(!0))}),aE({u128:ak(av(!0))}),aE({address:ak(av(!0))}),aE({signer:ak(av(!0))}),aE({vector:aw(()=>a8)}),aE({struct:aw(()=>a3)}),aE({u16:ak(av(!0))}),aE({u32:ak(av(!0))}),aE({u256:ak(av(!0))})]),a3=aE({address:ax(),module:ax(),name:ax(),typeParams:am(a8)}),a5=aE({budget:aA(a6),price:aA(a6),payment:aA(am(aX)),owner:aA(ax())}),a4=aO([a1,aE({kind:av("GasCoin")}),aE({kind:av("Result"),index:aC(aI(),ad())}),aE({kind:av("NestedResult"),index:aC(aI(),ad()),resultIndex:aC(aI(),ad())})]),a7=aE({kind:av("MoveCall"),target:aC(ax(),ah(e=>3===e.split("::").length)),typeArguments:am(ax()),arguments:am(a4)}),a9=aE({kind:av("TransferObjects"),objects:am(a4),address:a4}),ue=aE({kind:av("SplitCoins"),coin:a4,amounts:am(a4)}),ut=aE({kind:av("MergeCoins"),destination:a4,sources:am(a4)}),ur=aE({kind:av("MakeMoveVec"),type:aO([aE({Some:a8}),aE({None:ak(av(!0))})]),objects:am(a4)}),un=aO([a7,a9,ue,ut,aE({kind:av("Publish"),modules:am(am(aC(aI(),ad()))),dependencies:am(ax())}),aE({kind:av("Upgrade"),modules:am(am(aC(aI(),ad()))),dependencies:am(ax()),packageId:ax(),ticket:a4}),ur]);function ui(e){let t=e.inputs.map((e,t)=>{if(e.Object)return{kind:"Input",index:t,value:{Object:e.Object.ImmOrOwnedObject?{ImmOrOwned:e.Object.ImmOrOwnedObject}:e.Object.Receiving?{Receiving:{digest:e.Object.Receiving.digest,version:e.Object.Receiving.version,objectId:e.Object.Receiving.objectId}}:{Shared:{mutable:e.Object.SharedObject.mutable,initialSharedVersion:e.Object.SharedObject.initialSharedVersion,objectId:e.Object.SharedObject.objectId}}},type:"object"};if(e.Pure)return{kind:"Input",index:t,value:{Pure:Array.from(i_(e.Pure.bytes))},type:"pure"};if(e.UnresolvedPure)return{kind:"Input",type:"pure",index:t,value:e.UnresolvedPure.value};if(e.UnresolvedObject)return{kind:"Input",type:"object",index:t,value:e.UnresolvedObject.objectId};throw Error("Invalid input")});return{version:1,sender:e.sender??void 0,expiration:e.expiration?.$kind==="Epoch"?{Epoch:Number(e.expiration.Epoch)}:e.expiration?{None:!0}:null,gasConfig:{owner:e.gasData.owner??void 0,budget:e.gasData.budget??void 0,price:e.gasData.price??void 0,payment:e.gasData.payment??void 0},inputs:t,transactions:e.commands.map(e=>{if(e.MakeMoveVec)return{kind:"MakeMoveVec",type:null===e.MakeMoveVec.type?{None:!0}:{Some:sx.parseFromStr(e.MakeMoveVec.type)},objects:e.MakeMoveVec.elements.map(e=>us(e,t))};if(e.MergeCoins)return{kind:"MergeCoins",destination:us(e.MergeCoins.destination,t),sources:e.MergeCoins.sources.map(e=>us(e,t))};if(e.MoveCall)return{kind:"MoveCall",target:`${e.MoveCall.package}::${e.MoveCall.module}::${e.MoveCall.function}`,typeArguments:e.MoveCall.typeArguments,arguments:e.MoveCall.arguments.map(e=>us(e,t))};if(e.Publish)return{kind:"Publish",modules:e.Publish.modules.map(e=>Array.from(i_(e))),dependencies:e.Publish.dependencies};if(e.SplitCoins)return{kind:"SplitCoins",coin:us(e.SplitCoins.coin,t),amounts:e.SplitCoins.amounts.map(e=>us(e,t))};if(e.TransferObjects)return{kind:"TransferObjects",objects:e.TransferObjects.objects.map(e=>us(e,t)),address:us(e.TransferObjects.address,t)};if(e.Upgrade)return{kind:"Upgrade",modules:e.Upgrade.modules.map(e=>Array.from(i_(e))),dependencies:e.Upgrade.dependencies,packageId:e.Upgrade.package,ticket:us(e.Upgrade.ticket,t)};throw Error(`Unknown transaction ${Object.keys(e)}`)})}}function us(e,t){if("GasCoin"===e.$kind)return{kind:"GasCoin"};if("Result"===e.$kind)return{kind:"Result",index:e.Result};if("NestedResult"===e.$kind)return{kind:"NestedResult",index:e.NestedResult[0],resultIndex:e.NestedResult[1]};if("Input"===e.$kind)return t[e.Input];throw Error(`Invalid argument ${Object.keys(e)}`)}function uo(e){switch(e.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:e.index};case"NestedResult":return{NestedResult:[e.index,e.resultIndex]};case"Input":return{Input:e.index}}}function ua(e){return aO(Object.entries(e).map(([e,t])=>aE({[e]:t})))}aE({version:av(1),sender:aA(ax()),expiration:aS(a2),gasConfig:a5,inputs:am(a1),transactions:am(un)});let uu=ua({GasCoin:av(!0),Input:aC(aI(),ad()),Result:aC(aI(),ad()),NestedResult:aM([aC(aI(),ad()),aC(aI(),ad())])}),uc=aE({budget:ak(aU),price:ak(aU),owner:ak(aj),payment:ak(am(az))}),ul=aE({package:aj,module:ax(),function:ax(),typeArguments:am(ax()),arguments:am(uu)}),uh=aE({name:ax(),inputs:a_(ax(),aO([uu,am(uu)])),data:a_(ax(),aP())}),ud=ua({MoveCall:ul,TransferObjects:aE({objects:am(uu),address:uu}),SplitCoins:aE({coin:uu,amounts:am(uu)}),MergeCoins:aE({destination:uu,sources:am(uu)}),Publish:aE({modules:am(a$),dependencies:am(aj)}),MakeMoveVec:aE({type:ak(ax()),elements:am(uu)}),Upgrade:aE({modules:am(a$),dependencies:am(aj),package:aj,ticket:uu}),$Intent:uh}),uf=ua({ImmOrOwnedObject:az,SharedObject:aE({objectId:aj,initialSharedVersion:aU,mutable:ab()}),Receiving:az}),up=ua({Object:uf,Pure:aE({bytes:a$}),UnresolvedPure:aE({value:aP()}),UnresolvedObject:aE({objectId:aj,version:aA(ak(aU)),digest:aA(ak(ax())),initialSharedVersion:aA(ak(aU))})}),ug=ua({None:av(!0),Epoch:aU}),um=aE({version:av(2),sender:aS(aj),expiration:aS(ug),gasData:uc,inputs:am(up),commands:am(ud),digest:aA(ak(ax()))}),uy={Pure:function(e){return{$kind:"Pure",Pure:{bytes:e instanceof Uint8Array?ix(e):e.toBase64()}}},ObjectRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:t,version:r,objectId:sf(e)}}}),SharedObjectRef:({objectId:e,mutable:t,initialSharedVersion:r})=>({$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:t,initialSharedVersion:r,objectId:sf(e)}}}),ReceivingRef:({objectId:e,digest:t,version:r})=>({$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:t,version:r,objectId:sf(e)}}})};function ub(e){if("string"==typeof e)switch(e){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw Error(`Unexpected type ${e}`)}if("Vector"in e)return{vector:ub(e.Vector)};if("Struct"in e)return{datatype:{package:e.Struct.address,module:e.Struct.module,type:e.Struct.name,typeParameters:e.Struct.typeArguments.map(ub)}};if("TypeParameter"in e)return{typeParameter:e.TypeParameter};throw Error(`Unexpected type ${JSON.stringify(e)}`)}function uw(e){return async function(t,r,n){return await uE(t,e),await uI(t,e),r.onlyTransactionKind||(await uv(t,e),await uk(t,e),await uS(t,e)),await n()}}async function uv(e,t){e.gasConfig.price||(e.gasConfig.price=String(await t.getReferenceGasPrice()))}async function uk(e,t){if(e.gasConfig.budget)return;let r=await t.dryRunTransactionBlock({transactionBlock:e.build({overrides:{gasData:{budget:String(5e10),payment:[]}}})});if("success"!==r.effects.status.status)throw Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});let n=1000n*BigInt(e.gasConfig.price||1n),i=BigInt(r.effects.gasUsed.computationCost)+n,o=i+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);e.gasConfig.budget=String(o>i?o:i)}async function uS(e,t){if(!e.gasConfig.payment){let r=(await t.getCoins({owner:e.gasConfig.owner||e.sender,coinType:sm})).data.filter(t=>!e.inputs.find(e=>!!e.Object?.ImmOrOwnedObject&&t.coinObjectId===e.Object.ImmOrOwnedObject.objectId)).map(e=>({objectId:e.coinObjectId,digest:e.digest,version:e.version}));if(!r.length)throw Error("No valid gas coins found for the transaction.");e.gasConfig.payment=r.map(e=>aB(az,e))}}async function uI(e,t){let r=[...new Set(e.inputs.filter(e=>e.UnresolvedObject&&!(e.UnresolvedObject.version||e.UnresolvedObject?.initialSharedVersion)).map(e=>sp(e.UnresolvedObject.objectId)))],n=r.length?iO(r,50):[],i=(await Promise.all(n.map(e=>t.multiGetObjects({ids:e,options:{showOwner:!0}})))).flat(),o=Array.from(new Map(r.map((e,t)=>[e,i[t]]))).filter(([e,t])=>t.error).map(([e,t])=>JSON.stringify(t.error));if(o.length)throw Error(`The following input objects are invalid: ${o.join(", ")}`);let a=i.map(e=>{if(e.error||!e.data)throw Error(`Failed to fetch object: ${e.error}`);let t=e.data.owner,r=t&&"object"==typeof t?"Shared"in t?t.Shared.initial_shared_version:"ConsensusAddressOwner"in t?t.ConsensusAddressOwner.start_version:null:null;return{objectId:e.data.objectId,digest:e.data.digest,version:e.data.version,initialSharedVersion:r}}),u=new Map(r.map((e,t)=>[e,a[t]]));for(let[t,r]of e.inputs.entries()){let n;if(!r.UnresolvedObject)continue;let i=sf(r.UnresolvedObject.objectId),o=u.get(i);r.UnresolvedObject.initialSharedVersion??o?.initialSharedVersion?n=uy.SharedObjectRef({objectId:i,initialSharedVersion:r.UnresolvedObject.initialSharedVersion||o?.initialSharedVersion,mutable:function(e,t){let r=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){let n=t.MoveCall.arguments.indexOf(e);r="&"!==t.MoveCall._argumentTypes[n].ref||r}("MakeMoveVec"===t.$kind||"MergeCoins"===t.$kind||"SplitCoins"===t.$kind||"TransferObjects"===t.$kind)&&(r=!0)}),r}(e,t)}):function(e,t){let r=!1;return e.getInputUses(t,(e,t)=>{if(t.MoveCall&&t.MoveCall._argumentTypes){var n;let i=t.MoveCall.arguments.indexOf(e);r="object"==typeof(n=t.MoveCall._argumentTypes[i]).body&&"datatype"in n.body&&"0x2"===n.body.datatype.package&&"transfer"===n.body.datatype.module&&"Receiving"===n.body.datatype.type||r}}),r}(e,t)&&(n=uy.ReceivingRef({objectId:i,digest:r.UnresolvedObject.digest??o?.digest,version:r.UnresolvedObject.version??o?.version})),e.inputs[e.inputs.indexOf(r)]=n??uy.ObjectRef({objectId:i,digest:r.UnresolvedObject.digest??o?.digest,version:r.UnresolvedObject.version??o?.version})}}async function uE(e,t){let{inputs:r,commands:n}=e,i=[],o=new Set;n.forEach(t=>{if(t.MoveCall&&!t.MoveCall._argumentTypes&&t.MoveCall.arguments.map(t=>"Input"===t.$kind?e.inputs[t.Input]:null).some(e=>e?.UnresolvedPure||e?.UnresolvedObject)){let e=`${t.MoveCall.package}::${t.MoveCall.module}::${t.MoveCall.function}`;o.add(e),i.push(t.MoveCall)}});let a=new Map;o.size>0&&await Promise.all([...o].map(async e=>{let[r,n,i]=e.split("::"),o=await t.getNormalizedMoveFunction({package:r,module:n,function:i});a.set(e,o.parameters.map(e=>"object"==typeof e&&"Reference"in e?{ref:"&",body:ub(e.Reference)}:"object"==typeof e&&"MutableReference"in e?{ref:"&mut",body:ub(e.MutableReference)}:{ref:null,body:ub(e)}))})),i.length&&await Promise.all(i.map(async e=>{let t=a.get(`${e.package}::${e.module}::${e.function}`);if(!t)return;let r=t.length>0&&function(e){let t="object"==typeof e.body&&"datatype"in e.body?e.body.datatype:null;return!!t&&sf(t.package)===sf("0x2")&&"tx_context"===t.module&&"TxContext"===t.type}(t.at(-1))?t.slice(0,t.length-1):t;e._argumentTypes=r})),n.forEach(e=>{if(!e.MoveCall)return;let t=e.MoveCall,n=`${t.package}::${t.module}::${t.function}`,i=t._argumentTypes;if(i){if(i.length!==e.MoveCall.arguments.length)throw Error(`Incorrect number of arguments for ${n}`);i.forEach((e,n)=>{let i=t.arguments[n];if("Input"!==i.$kind)return;let o=r[i.Input];if(!o.UnresolvedPure&&!o.UnresolvedObject)return;let a=o.UnresolvedPure?.value??o.UnresolvedObject?.objectId,u=function e(t){if("string"==typeof t)switch(t){case"address":return og.Address;case"bool":return og.Bool;case"u8":return og.U8;case"u16":return og.U16;case"u32":return og.U32;case"u64":return og.U64;case"u128":return og.U128;case"u256":return og.U256;default:throw Error(`Unknown type signature ${t}`)}if("vector"in t){if("u8"===t.vector)return og.vector(og.U8).transform({input:e=>"string"==typeof e?new TextEncoder().encode(e):e,output:e=>e});let r=e(t.vector);return r?og.vector(r):null}if("datatype"in t){let r=sf(t.datatype.package);if(r===sf("0x1")){if("ascii"===t.datatype.module&&"String"===t.datatype.type||"string"===t.datatype.module&&"String"===t.datatype.type)return og.String;if("option"===t.datatype.module&&"Option"===t.datatype.type){let r=e(t.datatype.typeParameters[0]);return r?og.vector(r):null}}if(r===sf("0x2")&&"object"===t.datatype.module&&"ID"===t.datatype.type)return og.Address}return null}(e.body);if(u){i.type="pure",r[r.indexOf(o)]=uy.Pure(u.serialize(a));return}if("string"!=typeof a)throw Error(`Expect the argument to be an object id string, got ${JSON.stringify(a,null,2)}`);i.type="object";let c=o.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:a}}:o;r[i.Input]=c})}})}function uA(e,t){return!!(e.inputs.some(e=>e.UnresolvedObject||e.UnresolvedPure)||!t.onlyTransactionKind&&(!e.gasConfig.price||!e.gasConfig.budget||!e.gasConfig.payment))}async function u_(e,t,r){if(function(e){for(let t of e.commands)switch(t.$kind){case"SplitCoins":t.SplitCoins.amounts.forEach(t=>{uM(t,og.U64,e)});break;case"TransferObjects":uM(t.TransferObjects.address,og.Address,e)}}(e),!uA(e,t))return await ux(e),r();let n=function(e){if(!e.client)throw Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client}(t);return(n.core?.resolveTransactionPlugin()??uw(n))(e,t,async()=>{await ux(e),await r()})}function ux(e){e.inputs.forEach((e,t)=>{if("Object"!==e.$kind&&"Pure"!==e.$kind)throw Error(`Input at index ${t} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function uM(e,t,r){if("Input"!==e.$kind)return;let n=r.inputs[e.Input];"UnresolvedPure"===n.$kind&&(r.inputs[e.Input]=uy.Pure(t.serialize(n.UnresolvedPure.value)))}function uT(e){return sf(e).replace("0x","")}class uO{constructor(e){this.version=2,this.sender=e?.sender??null,this.expiration=e?.expiration??null,this.inputs=e?.inputs??[],this.commands=e?.commands??[],this.gasData=e?.gasData??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){let t=og.TransactionKind.parse(e).ProgrammableTransaction;if(!t)throw Error("Unable to deserialize from bytes.");return uO.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:t.inputs,commands:t.commands})}static fromBytes(e){let t=og.TransactionData.parse(e)?.V1,r=t.kind.ProgrammableTransaction;if(!t||!r)throw Error("Unable to deserialize from bytes.");return uO.restore({version:2,sender:t.sender,expiration:t.expiration,gasData:t.gasData,inputs:r.inputs,commands:r.commands})}static restore(e){return new uO(2===e.version?aB(aY,e):aB(aY,aB(aY,{version:2,sender:e.sender??null,expiration:e.expiration?"Epoch"in e.expiration?{Epoch:e.expiration.Epoch}:{None:!0}:null,gasData:{owner:e.gasConfig.owner??null,budget:e.gasConfig.budget?.toString()??null,price:e.gasConfig.price?.toString()??null,payment:e.gasConfig.payment?.map(e=>({digest:e.digest,objectId:e.objectId,version:e.version.toString()}))??null},inputs:e.inputs.map(e=>{if("Input"===e.kind){if(ag(a0,e.value)){let t=aB(a0,e.value);if(t.Object){if(t.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:t.Object.ImmOrOwned.objectId,version:String(t.Object.ImmOrOwned.version),digest:t.Object.ImmOrOwned.digest}}};if(t.Object.Shared)return{Object:{SharedObject:{mutable:t.Object.Shared.mutable??null,initialSharedVersion:t.Object.Shared.initialSharedVersion,objectId:t.Object.Shared.objectId}}};if(t.Object.Receiving)return{Object:{Receiving:{digest:t.Object.Receiving.digest,version:String(t.Object.Receiving.version),objectId:t.Object.Receiving.objectId}}};throw Error("Invalid object input")}return{Pure:{bytes:ix(new Uint8Array(t.Pure))}}}return"object"===e.type?{UnresolvedObject:{objectId:e.value}}:{UnresolvedPure:{value:e.value}}}throw Error("Invalid input")}),commands:e.transactions.map(e=>{switch(e.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in e.type?sx.tagToString(e.type.Some):null,elements:e.objects.map(e=>uo(e))}};case"MergeCoins":return{MergeCoins:{destination:uo(e.destination),sources:e.sources.map(e=>uo(e))}};case"MoveCall":{let[t,r,n]=e.target.split("::");return{MoveCall:{package:t,module:r,function:n,typeArguments:e.typeArguments,arguments:e.arguments.map(e=>uo(e))}}}case"Publish":return{Publish:{modules:e.modules.map(e=>ix(Uint8Array.from(e))),dependencies:e.dependencies}};case"SplitCoins":return{SplitCoins:{coin:uo(e.coin),amounts:e.amounts.map(e=>uo(e))}};case"TransferObjects":return{TransferObjects:{objects:e.objects.map(e=>uo(e)),address:uo(e.address)}};case"Upgrade":return{Upgrade:{modules:e.modules.map(e=>ix(Uint8Array.from(e))),dependencies:e.dependencies,package:e.packageId,ticket:uo(e.ticket)}}}throw Error(`Unknown transaction ${Object.keys(e)}`)})})))}static getDigestFromBytes(e){return iE(function(e,t){let r=Array.from(`${e}::`).map(e=>e.charCodeAt(0)),n=new Uint8Array(r.length+t.length);return n.set(r),n.set(t,r.length),sE(n,{dkLen:32})}("TransactionData",e))}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:t,onlyTransactionKind:r}={}){let n=this.inputs,i=this.commands;if(r)return og.TransactionKind.serialize({ProgrammableTransaction:{inputs:n,commands:i}},{maxSize:e}).toBytes();let o=t?.expiration??this.expiration,a=t?.sender??this.sender,u={...this.gasData,...t?.gasConfig,...t?.gasData};if(!a)throw Error("Missing transaction sender");if(!u.budget)throw Error("Missing gas budget");if(!u.payment)throw Error("Missing gas payment");if(!u.price)throw Error("Missing gas price");let c={sender:uT(a),expiration:o||{None:!0},gasData:{payment:u.payment,owner:uT(this.gasData.owner??a),price:BigInt(u.price),budget:BigInt(u.budget)},kind:{ProgrammableTransaction:{inputs:n,commands:i}}};return og.TransactionData.serialize({V1:c},{maxSize:e}).toBytes()}addInput(e,t){let r=this.inputs.length;return this.inputs.push(t),{Input:r,type:e,$kind:"Input"}}getInputUses(e,t){this.mapArguments((r,n)=>("Input"===r.$kind&&r.Input===e&&t(r,n),r))}mapCommandArguments(e,t){let r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(n=>t(n,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(n=>t(n,r,e)),r.TransferObjects.address=t(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=t(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(n=>t(n,r,e));break;case"MergeCoins":r.MergeCoins.destination=t(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(n=>t(n,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(n=>t(n,r,e));break;case"Upgrade":r.Upgrade.ticket=t(r.Upgrade.ticket,r,e);break;case"$Intent":let n=r.$Intent.inputs;for(let[i,o]of(r.$Intent.inputs={},Object.entries(n)))r.$Intent.inputs[i]=Array.isArray(o)?o.map(n=>t(n,r,e)):t(o,r,e);break;case"Publish":break;default:throw Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(let t of this.commands.keys())this.mapCommandArguments(t,e)}replaceCommand(e,t,r=e){if(!Array.isArray(t)){this.commands[e]=t;return}let n=t.length-1;this.commands.splice(e,1,...t),0!==n&&this.mapArguments((i,o,a)=>{if(a<e+t.length)return i;switch(i.$kind){case"Result":i.Result===e&&(i.Result=r),i.Result>e&&(i.Result+=n);break;case"NestedResult":i.NestedResult[0]===e&&(i.NestedResult[0]=r),i.NestedResult[0]>e&&(i.NestedResult[0]+=n)}return i})}getDigest(){let e=this.build({onlyTransactionKind:!1});return uO.getDigestFromBytes(e)}snapshot(){return aB(aY,this)}shallowClone(){return new uO({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}}function uP(e){return"string"==typeof e?sf(e):e.Object?e.Object.ImmOrOwnedObject?sf(e.Object.ImmOrOwnedObject.objectId):e.Object.Receiving?sf(e.Object.Receiving.objectId):sf(e.Object.SharedObject.objectId):e.UnresolvedObject?sf(e.UnresolvedObject.objectId):void 0}var uB,uC,uR,uj,u$,uU,uz,uL,uN,uD,uW,uV,uK,uq,uF=e=>{throw TypeError(e)},uH=(e,t,r)=>t.has(e)||uF("Cannot "+r),uG=(e,t,r)=>(uH(e,t,"read from private field"),r?r.call(e):t.get(e)),uJ=(e,t,r)=>t.has(e)?uF("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),uY=(e,t,r,n)=>(uH(e,t,"write to private field"),t.set(e,r),r),uZ=(e,t,r)=>(uH(e,t,"access private method"),r);let uX={"Mvr-Source":`@mysten/sui@${ox}`};class uQ{constructor({cache:e,url:t,pageSize:r=50,overrides:n}){uJ(this,uN),uJ(this,u$),uJ(this,uU),uJ(this,uz),uJ(this,uL),uY(this,u$,e),uY(this,uU,t),uY(this,uz,r),uY(this,uL,{packages:n?.packages,types:n?.types}),function(e){if(e?.packages)for(let[t,r]of Object.entries(e.packages)){if(!so(t))throw Error(`Invalid package name: ${t}`);if(!sl(sf(r)))throw Error(`Invalid package ID: ${r}`)}if(e?.types)for(let[t,r]of Object.entries(e.types)){if(sh(t).typeParams.length>0)throw Error("Type overrides must be first-level only. If you want to supply generic types, just pass each type individually.");if(!sl(sh(r).address))throw Error(`Invalid type: ${r}`)}}(uG(this,uL))}async resolvePackage({package:e}){return{package:await uG(this,uN,uD).load(e)}}async resolveType({type:e}){let t=[...u0(e)],r=await uG(this,uN,uW).loadMany(t),n={};for(let e=0;e<t.length;e++){let i=r[e];if(i instanceof Error)throw i;n[t[e]]=i}return{type:u1(e,n)}}async resolve({types:e=[],packages:t=[]}){let r=new Set;for(let t of e??[])u0(t,r);let n=[...r],[i,o]=await Promise.all([n.length>0?uG(this,uN,uW).loadMany(n):[],t.length>0?uG(this,uN,uD).loadMany(t):[]]),a={...uG(this,uL)?.types};for(let[e,t]of n.entries()){let r=i[e];if(r instanceof Error)throw r;a[t]=r}let u={};for(let t of e??[]){let e=u1(t,a);u[t]={type:e}}let c={};for(let[e,r]of(t??[]).entries()){let t=uG(this,uL)?.packages?.[r]??o[e];if(t instanceof Error)throw t;c[r]={package:t}}return{types:u,packages:c}}}function u0(e,t=new Set){if("string"==typeof e&&!u2(e))return t;let r=u6(e)?e:sh(e);for(let e of(u2(r.address)&&t.add(`${r.address}::${r.module}::${r.name}`),r.typeParams))u0(e,t);return t}function u1(e,t){let r=u6(e)?e:sh(e),n=t[`${r.address}::${r.module}::${r.name}`];return sd({...r,address:n?n.split("::")[0]:r.address,typeParams:r.typeParams.map(e=>u1(e,t))})}function u2(e){return e.includes("/")||e.includes("@")||e.includes(".sui")}function u6(e){return"object"==typeof e&&"address"in e&&"module"in e&&"name"in e&&"typeParams"in e}function u8(e){let t=new Set;for(let r of e)if(u2(r)){if(!sa(r))throw Error(`Invalid type with names: ${r}`);t.add(r)}return t}u$=new WeakMap,uU=new WeakMap,uz=new WeakMap,uL=new WeakMap,uN=new WeakSet,uD=function(){return uG(this,u$).readSync(["#mvrPackageDataLoader",uG(this,uU)??""],()=>{let e=new iP(async e=>{if(!uG(this,uU))throw Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);let t=await uZ(this,uN,uV).call(this,e);return e.map(e=>t[e]??Error(`Failed to resolve package: ${e}`))}),t=uG(this,uL)?.packages;if(t)for(let[r,n]of Object.entries(t))e.prime(r,n);return e})},uW=function(){return uG(this,u$).readSync(["#mvrTypeDataLoader",uG(this,uU)??""],()=>{let e=new iP(async e=>{if(!uG(this,uU))throw Error(`MVR Api URL is not set for the current client (resolving ${e.join(", ")})`);let t=await uZ(this,uN,uK).call(this,e);return e.map(e=>t[e]??Error(`Failed to resolve type: ${e}`))}),t=uG(this,uL)?.types;if(t)for(let[r,n]of Object.entries(t))e.prime(r,n);return e})},uV=async function(e){if(0===e.length)return{};let t=iO(e,uG(this,uz)),r={};return await Promise.all(t.map(async e=>{let t=await uZ(this,uN,uq).call(this,"/v1/resolution/bulk",{names:e});if(t?.resolution)for(let e of Object.keys(t?.resolution)){let n=t.resolution[e]?.package_id;n&&(r[e]=n)}})),r},uK=async function(e){if(0===e.length)return{};let t=iO(e,uG(this,uz)),r={};return await Promise.all(t.map(async e=>{let t=await uZ(this,uN,uq).call(this,"/v1/struct-definition/bulk",{types:e});if(t?.resolution)for(let e of Object.keys(t?.resolution)){let n=t.resolution[e]?.type_tag;n&&(r[e]=n)}})),r},uq=async function(e,t){if(!uG(this,uU))throw Error("MVR Api URL is not set for the current client");let r=await fetch(`${uG(this,uU)}${e}`,{method:"POST",headers:{"Content-Type":"application/json",...uX},body:JSON.stringify(t)});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(`Failed to resolve types: ${e?.message}`)}return r.json()};let u3=e=>async(e,t,r)=>{let n=function(e){let t=new Set,r=new Set;for(let n of e.commands)switch(n.$kind){case"MakeMoveVec":n.MakeMoveVec.type&&u8([n.MakeMoveVec.type]).forEach(e=>{r.add(e)});break;case"MoveCall":let e=n.MoveCall,i=e.package.split("::")[0];if(u2(i)){if(!so(i))throw Error(`Invalid package name: ${i}`);t.add(i)}u8(e.typeArguments??[]).forEach(e=>{r.add(e)})}return{packages:[...t],types:[...r]}}(e);if(0===n.types.length&&0===n.packages.length)return r();(function(e,t){for(let r of e.commands){if(r.MakeMoveVec?.type){if(!u2(r.MakeMoveVec.type))continue;if(!t.types[r.MakeMoveVec.type])throw Error(`No resolution found for type: ${r.MakeMoveVec.type}`);r.MakeMoveVec.type=t.types[r.MakeMoveVec.type].type}let e=r.MoveCall;if(!e)continue;let n=e.package.split("::"),i=n[0];if(u2(i)&&!t.packages[i])throw Error(`No address found for package: ${i}`);u2(i)&&(n[0]=t.packages[i].package,e.package=n.join("::"));let o=e.typeArguments;if(o){for(let e=0;e<o.length;e++)if(u2(o[e])){if(!t.types[o[e]])throw Error(`No resolution found for type: ${o[e]}`);o[e]=t.types[o[e]].type}e.typeArguments=o}}})(e,await (function(e){if(!e.client)throw Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return e.client})(t).core.mvr.resolve({types:n.types,packages:n.packages})),await r()};var u5,u4,u7,u9,ce,ct,cr,cn,ci,cs,co,ca,cu,cc,cl,ch,cd,cf,cp,cg=e=>{throw TypeError(e)},cm=(e,t,r)=>t.has(e)||cg("Cannot "+r),cy=(e,t,r)=>(cm(e,t,"read from private field"),r?r.call(e):t.get(e)),cb=(e,t,r)=>t.has(e)?cg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),cw=(e,t,r,n)=>(cm(e,t,"write to private field"),t.set(e,r),r),cv=(e,t,r)=>(cm(e,t,"access private method"),r);function ck(e,t=1/0){let r=[],n=t=>r[t]??(r[t]={$kind:"NestedResult",get NestedResult(){return["function"==typeof e?e():e,t]}});return new Proxy({$kind:"Result",get Result(){return"function"==typeof e?e():e}},{set(){throw Error("The transaction result is a proxy, and does not support setting properties directly")},get(e,r){if(r in e)return Reflect.get(e,r);if(r===Symbol.iterator)return function*(){let e=0;for(;e<t;)yield n(e),e++};if("symbol"==typeof r)return;let i=parseInt(r,10);if(!(Number.isNaN(i)||i<0))return n(i)}})}let cS=Symbol.for("@mysten/transaction");function cI(e){return!!e&&"object"==typeof e&&!0===e[cS]}let cE={buildPlugins:new Map,serializationPlugins:new Map},cA=Symbol.for("@mysten/transaction/registry");function c_(){try{let e=globalThis;return e[cA]||(e[cA]=cE),e[cA]}catch{return cE}}let cx=class e{constructor(){cb(this,cs),cb(this,u5),cb(this,u4),cb(this,u7,new Map),cb(this,u9,[]),cb(this,ce,[]),cb(this,ct,new Set),cb(this,cr,new Set),cb(this,cn,new Map),cb(this,ci),this.object=function(e){function t(t){return e(t)}return t.system=()=>e("0x5"),t.clock=()=>e("0x6"),t.random=()=>e("0x8"),t.denyList=()=>e("0x403"),t.option=({type:e,value:t})=>r=>r.moveCall({typeArguments:[e],target:`0x1::option::${null===t?"none":"some"}`,arguments:null===t?[]:[r.object(t)]}),t}(e=>{if("function"==typeof e)return this.object(this.add(e));if("object"==typeof e&&ag(aL,e))return e;let t=uP(e),r=cy(this,ci).inputs.find(e=>t===uP(e));return r?.Object?.SharedObject&&"object"==typeof e&&e.Object?.SharedObject&&(r.Object.SharedObject.mutable=r.Object.SharedObject.mutable||e.Object.SharedObject.mutable),r?{$kind:"Input",Input:cy(this,ci).inputs.indexOf(r),type:"object"}:cv(this,cs,cu).call(this,"object","string"==typeof e?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:sf(e)}}:e)});let e=c_();cw(this,ci,new uO),cw(this,u4,[...e.buildPlugins.values()]),cw(this,u5,[...e.serializationPlugins.values()])}static fromKind(t){let r=new e;return cw(r,ci,uO.fromKindBytes("string"==typeof t?i_(t):t)),cw(r,u9,cy(r,ci).inputs.slice()),cw(r,ce,cy(r,ci).commands.slice()),cw(r,ct,new Set(cy(r,ce).map((e,t)=>t))),r}static from(t){let r=new e;return cI(t)?cw(r,ci,new uO(t.getData())):"string"==typeof t&&t.startsWith("{")?cw(r,ci,uO.restore(JSON.parse(t))):cw(r,ci,uO.fromBytes("string"==typeof t?i_(t):t)),cw(r,u9,cy(r,ci).inputs.slice()),cw(r,ce,cy(r,ci).commands.slice()),cw(r,ct,new Set(cy(r,ce).map((e,t)=>t))),r}static registerGlobalSerializationPlugin(e,t){c_().serializationPlugins.set(e,t??e)}static unregisterGlobalSerializationPlugin(e){c_().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,t){c_().buildPlugins.set(e,t??e)}static unregisterGlobalBuildPlugin(e){c_().buildPlugins.delete(e)}addSerializationPlugin(e){cy(this,u5).push(e)}addBuildPlugin(e){cy(this,u4).push(e)}addIntentResolver(e,t){if(cy(this,u7).has(e)&&cy(this,u7).get(e)!==t)throw Error(`Intent resolver for ${e} already exists`);cy(this,u7).set(e,t)}setSender(e){cy(this,ci).sender=e}setSenderIfNotSet(e){cy(this,ci).sender||(cy(this,ci).sender=e)}setExpiration(e){cy(this,ci).expiration=e?aB(aJ,e):null}setGasPrice(e){cy(this,ci).gasConfig.price=String(e)}setGasBudget(e){cy(this,ci).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){null==cy(this,ci).gasData.budget&&(cy(this,ci).gasConfig.budget=String(e))}setGasOwner(e){cy(this,ci).gasConfig.owner=e}setGasPayment(e){cy(this,ci).gasConfig.payment=e.map(e=>aB(az,e))}get blockData(){return ui(cy(this,ci).snapshot())}getData(){return cy(this,ci).snapshot()}get[cS](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:function(e){function t(t,r){if("string"==typeof t)return e(op(t).serialize(r));if(t instanceof Uint8Array||i6(t))return e(t);throw Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return t.u8=t=>e(og.U8.serialize(t)),t.u16=t=>e(og.U16.serialize(t)),t.u32=t=>e(og.U32.serialize(t)),t.u64=t=>e(og.U64.serialize(t)),t.u128=t=>e(og.U128.serialize(t)),t.u256=t=>e(og.U256.serialize(t)),t.bool=t=>e(og.Bool.serialize(t)),t.string=t=>e(og.String.serialize(t)),t.address=t=>e(og.Address.serialize(t)),t.id=t.address,t.vector=(t,r)=>e(og.vector(op(t)).serialize(r)),t.option=(t,r)=>e(og.option(op(t)).serialize(r)),t}(e=>i6(e)?cv(this,cs,cu).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):cv(this,cs,cu).call(this,"pure",ag(aG,e)?aB(aG,e):e instanceof Uint8Array?uy.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(uy.ObjectRef(...e))}receivingRef(...e){return this.object(uy.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(uy.SharedObjectRef(...e))}add(e){if("function"==typeof e){if(cy(this,cn).has(e))return cy(this,cn).get(e);let t=cv(this,cs,co).call(this),r=e(t);if(!(r&&"object"==typeof r&&"then"in r))return cw(this,ct,cy(t,ct)),cy(this,cn).set(e,r),r;let n=cv(this,cs,ca).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{resultIndex:cy(this,ci).commands.length,result:null}}});cy(this,cr).add(Promise.resolve(r).then(e=>{n.$Intent.data.result=e}));let i=ck(()=>n.$Intent.data.resultIndex);return cy(this,cn).set(e,i),i}return cv(this,cs,ca).call(this,e),ck(cy(this,ci).commands.length-1)}splitCoins(e,t){let r=aZ.SplitCoins("string"==typeof e?this.object(e):cv(this,cs,cl).call(this,e),t.map(e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e?this.pure.u64(e):cv(this,cs,cc).call(this,e)));return cv(this,cs,ca).call(this,r),ck(cy(this,ci).commands.length-1,t.length)}mergeCoins(e,t){return this.add(aZ.MergeCoins(this.object(e),t.map(e=>this.object(e))))}publish({modules:e,dependencies:t}){return this.add(aZ.Publish({modules:e,dependencies:t}))}upgrade({modules:e,dependencies:t,package:r,ticket:n}){return this.add(aZ.Upgrade({modules:e,dependencies:t,package:r,ticket:this.object(n)}))}moveCall({arguments:e,...t}){return this.add(aZ.MoveCall({...t,arguments:e?.map(e=>cv(this,cs,cc).call(this,e))}))}transferObjects(e,t){return this.add(aZ.TransferObjects(e.map(e=>this.object(e)),"string"==typeof t?this.pure.address(t):cv(this,cs,cc).call(this,t)))}makeMoveVec({type:e,elements:t}){return this.add(aZ.MakeMoveVec({type:e,elements:t.map(e=>this.object(e))}))}serialize(){return JSON.stringify(ui(cy(this,ci).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(aB(um,this.isFullyResolved()?{...cy(this,ci).snapshot(),digest:cy(this,ci).getDigest()}:cy(this,ci).snapshot()),(e,t)=>"bigint"==typeof t?t.toString():t,2)}async sign(e){let{signer:t,...r}=e,n=await this.build(r);return t.signTransaction(n)}isFullyResolved(){return!(!cy(this,ci).sender||cy(this,cr).size>0||cy(this,ci).commands.some(e=>e.$Intent)||uA(cy(this,ci),{}))}async build(e={}){return await this.prepareForSerialization(e),await cv(this,cs,ch).call(this,e),cy(this,ci).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await this.prepareForSerialization(e),await cv(this,cs,ch).call(this,e),cy(this,ci).getDigest()}async prepareForSerialization(e){await cv(this,cs,cf).call(this),cv(this,cs,cp).call(this);let t=new Set;for(let e of cy(this,ci).commands)e.$Intent&&t.add(e.$Intent.name);let r=[...cy(this,u5)];for(let n of t)if(!e.supportedIntents?.includes(n)){if(!cy(this,u7).has(n))throw Error(`Missing intent resolver for ${n}`);r.push(cy(this,u7).get(n))}r.push(u3()),await cv(this,cs,cd).call(this,r,e)}};u5=new WeakMap,u4=new WeakMap,u7=new WeakMap,u9=new WeakMap,ce=new WeakMap,ct=new WeakMap,cr=new WeakMap,cn=new WeakMap,ci=new WeakMap,cs=new WeakSet,co=function(){let e=new cx;return cw(e,ci,cy(this,ci)),cw(e,u5,cy(this,u5)),cw(e,u4,cy(this,u4)),cw(e,u7,cy(this,u7)),cw(e,cr,cy(this,cr)),cw(e,ct,new Set(cy(this,ct))),cw(e,cn,cy(this,cn)),cy(this,u9).push(cy(e,u9)),cy(this,ce).push(cy(e,ce)),e},ca=function(e){let t=cy(this,ci).commands.length;return cy(this,ce).push(e),cy(this,ct).add(t),cy(this,ci).commands.push(e),cy(this,ci).mapCommandArguments(t,e=>{if("Result"===e.$kind&&!cy(this,ct).has(e.Result))throw Error(`Result { Result: ${e.Result} } is not available to use the current transaction`);if("NestedResult"===e.$kind&&!cy(this,ct).has(e.NestedResult[0]))throw Error(`Result { NestedResult: [${e.NestedResult[0]}, ${e.NestedResult[1]}] } is not available to use the current transaction`);if("Input"===e.$kind&&e.Input>=cy(this,ci).inputs.length)throw Error(`Input { Input: ${e.Input} } references an input that does not exist in the current transaction`);return e}),e},cu=function(e,t){return cy(this,u9).push(t),cy(this,ci).addInput(e,t)},cc=function(e){return i6(e)?this.pure(e):cv(this,cs,cl).call(this,e)},cl=function(e){if("function"==typeof e){let t=this.add(e);return"function"==typeof t?cv(this,cs,cl).call(this,t):aB(aL,t)}return aB(aL,e)},ch=async function(e){if(!e.onlyTransactionKind&&!cy(this,ci).sender)throw Error("Missing transaction sender");await cv(this,cs,cd).call(this,[...cy(this,u4),u_],e)},cd=async function(e,t){let r=n=>{if(n>=e.length)return()=>{};let i=e[n];return async()=>{let e=r(n+1),o=!1,a=!1;if(await i(cy(this,ci),t,async()=>{if(o)throw Error(`next() was call multiple times in TransactionPlugin ${n}`);o=!0,await e(),a=!0}),!o)throw Error(`next() was not called in TransactionPlugin ${n}`);if(!a)throw Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)(),cw(this,u9,cy(this,ci).inputs.slice()),cw(this,ce,cy(this,ci).commands.slice())},cf=async function(){for(;cy(this,cr).size>0;){let e=Promise.all(cy(this,cr));cy(this,cr).clear(),cy(this,cr).add(e),await e,cy(this,cr).delete(e)}},cp=function(){let e=cy(this,ci).commands,t=cy(this,ci).inputs,r=cy(this,ce).flat(1/0),n=cy(this,u9).flat(1/0);if(r.length!==e.length)throw Error("Unexpected number of commands found in transaction data");if(n.length!==t.length)throw Error("Unexpected number of inputs found in transaction data");let i=r.filter(e=>e.$Intent?.name!=="AsyncTransactionThunk");function o(t){let r=e[t];if(r.$Intent?.name==="AsyncTransactionThunk"){let e=r.$Intent.data.result;if(null==e)throw Error("AsyncTransactionThunk has not been resolved");return o(e.Result)}let n=i.indexOf(r);if(-1===n)throw Error("Unable to find original index for command");return n}for(let[r,a]of(cy(this,ci).commands=i,cy(this,ci).inputs=n,cw(this,ce,i),cw(this,u9,n),cw(this,ct,new Set(i.map((e,t)=>t))),cy(this,ci).mapArguments(e=>{if("Input"===e.$kind){let r=n.indexOf(t[e.Input]);if(-1===r)throw Error("Input has not been resolved");return{...e,Input:r}}if("Result"===e.$kind){let t=o(e.Result);return{...e,Result:t}}if("NestedResult"===e.$kind){let t=o(e.NestedResult[0]);return{...e,NestedResult:[t,e.NestedResult[1]]}}return e}),e.entries()))if(a.$Intent?.name==="AsyncTransactionThunk")try{a.$Intent.data.resultIndex=o(r)}catch{}};let cM=cx,cT={mainnet:"https://mainnet.mvr.mystenlabs.com",testnet:"https://testnet.mvr.mystenlabs.com"};class cO extends aa{constructor(e){super(e),this.core=this,this.mvr=new uQ({cache:this.cache.scope("core.mvr"),url:e.mvr?.url??cT[this.network],pageSize:e.mvr?.pageSize,overrides:e.mvr?.overrides})}async getObject(e){let{objectId:t}=e,{objects:[r]}=await this.getObjects({objectIds:[t],signal:e.signal});if(r instanceof Error)throw r;return{object:r}}async getDynamicField(e){let t=function(e,t,r){let n=og.Address.serialize(e).toBytes(),i=og.TypeTag.serialize(t).toBytes(),o=og.u64().serialize(r.length).toBytes(),a=sE.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(n),a.update(o),a.update(r),a.update(i),`0x${iT(a.digest().slice(0,32))}`}(e.parentId,sx.parseFromStr(e.name.type),e.name.bcs),{objects:[r]}=await this.getObjects({objectIds:[t],signal:e.signal});if(r instanceof Error)throw r;let n=sh(r.type),i=await r.content;return{dynamicField:{id:r.id,digest:r.digest,version:r.version,type:r.type,name:{type:"string"==typeof n.typeParams[0]?n.typeParams[0]:sd(n.typeParams[0]),bcs:e.name.bcs},value:{type:"string"==typeof n.typeParams[1]?n.typeParams[1]:sd(n.typeParams[1]),bcs:i.slice(sc+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:t=6e4,...r}){let n=e?AbortSignal.any([AbortSignal.timeout(t),e]):AbortSignal.timeout(t),i=new Promise((e,t)=>{n.addEventListener("abort",()=>t(n.reason))});for(i.catch(()=>{});;){n.throwIfAborted();try{return await this.getTransaction({...r,signal:n})}catch{await Promise.race([new Promise(e=>setTimeout(e,2e3)),i])}}}}class cP extends Error{}class cB extends cP{constructor(e,t){super(t),this.code=e}static fromResponse(e,t){switch(e.code){case"notExists":return new cB(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new cB(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new cB(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new cB(e.code,`Display error: ${e.error}`);default:return new cB(e.code,`Unknown error while loading object${t?` ${t}`:""}`)}}}var cC,cR=e=>{throw TypeError(e)},cj=(e,t,r)=>t.has(e)||cR("Cannot "+r),c$=(e,t,r)=>(cj(e,t,"read from private field"),r?r.call(e):t.get(e)),cU=(e,t,r)=>t.has(e)?cR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),cz=(e,t,r,n)=>(cj(e,t,"write to private field"),t.set(e,r),r);class cL extends cO{constructor({jsonRpcClient:e,mvr:t}){super({network:e.network,base:e,mvr:t}),cU(this,cC),cz(this,cC,e)}async getObjects(e){let t=iO(e.objectIds,50),r=[];for(let n of t)for(let[t,i]of(await c$(this,cC).multiGetObjects({ids:n,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal})).entries())i.error?r.push(cB.fromResponse(i.error,n[t])):r.push(cN(i.data));return{objects:r}}async getOwnedObjects(e){let t=await c$(this,cC).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0},filter:e.type?{StructType:e.type}:null,signal:e.signal});return{objects:t.data.map(e=>{if(e.error)throw cB.fromResponse(e.error);return cN(e.data)}),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getCoins(e){let t=await c$(this,cC).getCoins({owner:e.address,coinType:e.coinType,limit:e.limit,cursor:e.cursor,signal:e.signal});return{objects:t.data.map(t=>({id:t.coinObjectId,version:t.version,digest:t.digest,balance:t.balance,type:`0x2::coin::Coin<${t.coinType}>`,content:Promise.resolve(cK.serialize({id:t.coinObjectId,balance:{value:t.balance}}).toBytes()),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:t.hasNextPage,cursor:t.nextCursor??null}}async getBalance(e){let t=await c$(this,cC).getBalance({owner:e.address,coinType:e.coinType,signal:e.signal});return{balance:{coinType:t.coinType,balance:t.totalBalance}}}async getAllBalances(e){return{balances:(await c$(this,cC).getAllBalances({owner:e.address,signal:e.signal})).map(e=>({coinType:e.coinType,balance:e.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){return{transaction:cW(await c$(this,cC).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0,showEffects:!0},signal:e.signal}))}}async executeTransaction(e){return{transaction:cW(await c$(this,cC).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0,showEffects:!0},signal:e.signal}))}}async dryRunTransaction(e){var t;let r=cM.from(e.transaction),n=await c$(this,cC).dryRunTransactionBlock({transactionBlock:e.transaction,signal:e.signal}),{effects:i,objectTypes:o}=function({bytes:e,effects:t,objectChanges:r}){let n=[],i={};return r?.forEach(e=>{switch(e.type){case"published":n.push({id:e.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:null,idOperation:"Created"});break;case"transferred":n.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:e.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:cD(e.recipient),idOperation:"None"}),i[e.objectId]=e.objectType;break;case"mutated":n.push({id:e.objectId,inputState:"Exists",inputVersion:e.previousVersion,inputDigest:null,inputOwner:cD(e.owner),outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:cD(e.owner),idOperation:"None"}),i[e.objectId]=e.objectType;break;case"deleted":n.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:t.deleted?.find(t=>t.objectId===e.objectId)?.digest??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted"}),i[e.objectId]=e.objectType;break;case"wrapped":n.push({id:e.objectId,inputState:"Exists",inputVersion:e.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:e.sender},outputState:"ObjectWrite",outputVersion:e.version,outputDigest:t.wrapped?.find(t=>t.objectId===e.objectId)?.digest??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:e.sender},idOperation:"None"}),i[e.objectId]=e.objectType;break;case"created":n.push({id:e.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.version,outputDigest:e.digest,outputOwner:cD(e.owner),idOperation:"Created"}),i[e.objectId]=e.objectType}}),{objectTypes:i,effects:{bcs:e??null,digest:t.transactionDigest,version:2,status:"success"===t.status.status?{success:!0,error:null}:{success:!1,error:t.status.error},gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:{id:t.gasObject?.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:t.gasObject.reference.version,outputDigest:t.gasObject.reference.digest,outputOwner:cD(t.gasObject.owner),idOperation:"None"},eventsDigest:t.eventsDigest??null,dependencies:t.dependencies??[],lamportVersion:t.gasObject.reference.version,changedObjects:n,unchangedSharedObjects:[],auxiliaryDataDigest:null}}}({effects:n.effects,objectChanges:n.objectChanges});return{transaction:{digest:await r.getDigest(),epoch:null,effects:i,objectTypes:Promise.resolve(o),signatures:[],transaction:(t=e.transaction,{...uO.fromBytes(t).snapshot(),bcs:t})}}}async getReferenceGasPrice(e){return{referenceGasPrice:String(await c$(this,cC).getReferenceGasPrice({signal:e?.signal}))}}async getDynamicFields(e){let t=await c$(this,cC).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:t.data.map(e=>({id:e.objectId,type:e.objectType,name:{type:e.name.type,bcs:i_(e.bcsName)}})),hasNextPage:t.hasNextPage,cursor:t.nextCursor}}async verifyZkLoginSignature(e){let t=await c$(this,cC).verifyZkLoginSignature({bytes:e.bytes,signature:e.signature,intentScope:e.intentScope,author:e.author});return{success:t.success,errors:t.errors}}resolveNameServiceNames(e){return c$(this,cC).resolveNameServiceNames(e)}resolveTransactionPlugin(){return uw(c$(this,cC))}}function cN(e){return{id:e.objectId,version:e.version,digest:e.digest,type:e.type,content:Promise.resolve(e.bcs?.dataType==="moveObject"?i_(e.bcs.bcsBytes):new Uint8Array),owner:cD(e.owner)}}function cD(e){if("Immutable"===e)return{$kind:"Immutable",Immutable:!0};if("ConsensusAddressOwner"in e)return{$kind:"ConsensusAddressOwner",ConsensusAddressOwner:{owner:e.ConsensusAddressOwner.owner,startVersion:e.ConsensusAddressOwner.start_version}};if("AddressOwner"in e)return{$kind:"AddressOwner",AddressOwner:e.AddressOwner};if("ObjectOwner"in e)return{$kind:"ObjectOwner",ObjectOwner:e.ObjectOwner};if("Shared"in e)return{$kind:"Shared",Shared:{initialSharedVersion:e.Shared.initial_shared_version}};throw Error(`Unknown owner type: ${JSON.stringify(e)}`)}function cW(e){let t=og.SenderSignedData.parse(i_(e.rawTransaction))[0],r={};e.objectChanges?.forEach(e=>{"published"!==e.type&&(r[e.objectId]=e.objectType)});let n=og.TransactionData.serialize(t.intentMessage.value).toBytes(),i=uO.restore({version:2,sender:t.intentMessage.value.V1.sender,expiration:t.intentMessage.value.V1.expiration,gasData:t.intentMessage.value.V1.gasData,inputs:t.intentMessage.value.V1.kind.ProgrammableTransaction.inputs,commands:t.intentMessage.value.V1.kind.ProgrammableTransaction.commands});return{digest:e.digest,epoch:e.effects?.executedEpoch??null,effects:function(e){let t=og.TransactionEffects.parse(e);switch(t.$kind){case"V1":return function(e){throw Error("V1 effects are not supported yet")}(t.V1);case"V2":return function({bytes:e,effects:t}){let r=t.changedObjects.map(([e,r])=>({id:e,inputState:"Exist"===r.inputState.$kind?"Exists":"DoesNotExist",inputVersion:r.inputState.Exist?.[0][0]??null,inputDigest:r.inputState.Exist?.[0][1]??null,inputOwner:r.inputState.Exist?.[1]??null,outputState:"NotExist"===r.outputState.$kind?"DoesNotExist":r.outputState.$kind,outputVersion:"PackageWrite"===r.outputState.$kind?r.outputState.PackageWrite?.[0]:r.outputState.ObjectWrite?t.lamportVersion:null,outputDigest:"PackageWrite"===r.outputState.$kind?r.outputState.PackageWrite?.[1]:r.outputState.ObjectWrite?.[0]??null,outputOwner:r.outputState.ObjectWrite?r.outputState.ObjectWrite[1]:null,idOperation:r.idOperation.$kind}));return{bcs:e,digest:t.transactionDigest,version:2,status:"Success"===t.status.$kind?{success:!0,error:null}:{success:!1,error:t.status.Failed.error.$kind},gasUsed:t.gasUsed,transactionDigest:t.transactionDigest,gasObject:null===t.gasObjectIndex?null:r[t.gasObjectIndex]??null,eventsDigest:t.eventsDigest,dependencies:t.dependencies,lamportVersion:t.lamportVersion,changedObjects:r,unchangedSharedObjects:t.unchangedSharedObjects.map(([e,t])=>({kind:"MutateDeleted"===t.$kind?"MutateConsensusStreamEnded":"ReadDeleted"===t.$kind?"ReadConsensusStreamEnded":t.$kind,objectId:e,version:"ReadOnlyRoot"===t.$kind?t.ReadOnlyRoot[0]:t[t.$kind],digest:"ReadOnlyRoot"===t.$kind?t.ReadOnlyRoot[1]:null})),auxiliaryDataDigest:t.auxDataDigest}}({bytes:e,effects:t.V2});default:throw Error(`Unknown transaction effects version: ${t.$kind}`)}}(new Uint8Array(e.rawEffects)),objectTypes:Promise.resolve(r),transaction:{...i,bcs:n},signatures:t.txSignatures}}cC=new WeakMap;let cV=og.struct("Balance",{value:og.u64()}),cK=og.struct("Coin",{id:og.Address,balance:cV}),cq=Symbol.for("@mysten/SuiClient");class cF extends aa{constructor(e){super({network:e.network??"unknown"}),this.jsonRpc=this,this.transport=e.transport??new o7({url:e.url}),this.core=new cL({jsonRpcClient:this,mvr:e.mvr})}get[cq](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins({coinType:e,owner:t,cursor:r,limit:n,signal:i}){if(!t||!sl(sf(t)))throw Error("Invalid Sui address");return e&&u2(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getCoins",params:[t,e,r,n],signal:i})}async getAllCoins(e){if(!e.owner||!sl(sf(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance({owner:e,coinType:t,signal:r}){if(!e||!sl(sf(e)))throw Error("Invalid Sui address");return t&&u2(t)&&(t=(await this.core.mvr.resolveType({type:t})).type),await this.transport.request({method:"suix_getBalance",params:[e,t],signal:r})}async getAllBalances(e){if(!e.owner||!sl(sf(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata({coinType:e,signal:t}){return e&&u2(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getCoinMetadata",params:[e],signal:t})}async getTotalSupply({coinType:e,signal:t}){return e&&u2(e)&&(e=(await this.core.mvr.resolveType({type:e})).type),await this.transport.request({method:"suix_getTotalSupply",params:[e],signal:t})}async call(e,t,{signal:r}={}){return await this.transport.request({method:e,params:t,signal:r})}async getMoveFunctionArgTypes({package:e,module:t,function:r,signal:n}){return e&&so(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e,t,r],signal:n})}async getNormalizedMoveModulesByPackage({package:e,signal:t}){return e&&so(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e],signal:t})}async getNormalizedMoveModule({package:e,module:t,signal:r}){return e&&so(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e,t],signal:r})}async getNormalizedMoveFunction({package:e,module:t,function:r,signal:n}){return e&&so(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e,t,r],signal:n})}async getNormalizedMoveStruct({package:e,module:t,struct:r,signal:n}){return e&&so(e)&&(e=(await this.core.mvr.resolvePackage({package:e})).package),await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e,t,r],signal:n})}async getOwnedObjects(e){if(!e.owner||!sl(sf(e.owner)))throw Error("Invalid Sui address");let t=e.filter?{...e.filter}:void 0;return t&&"MoveModule"in t&&so(t.MoveModule.package)?t.MoveModule={module:t.MoveModule.module,package:(await this.core.mvr.resolvePackage({package:t.MoveModule.package})).package}:t&&"StructType"in t&&u2(t.StructType)&&(t.StructType=(await this.core.mvr.resolveType({type:t.StructType})).type),await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:t,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!sl(sp(e.id)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(e=>{if(!e||!sl(sp(e)))throw Error(`Invalid Sui Object id ${e}`)}),e.ids.length!==new Set(e.ids).size)throw Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks({filter:e,options:t,cursor:r,limit:n,order:i,signal:o}){return e&&"MoveFunction"in e&&so(e.MoveFunction.package)&&(e={...e,MoveFunction:{package:(await this.core.mvr.resolvePackage({package:e.MoveFunction.package})).package}}),await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e,options:t},r,n,"descending"===(i||"descending")],signal:o})}async getTransactionBlock(e){if(!su(e.digest))throw Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(e=>{if(!su(e))throw Error(`Invalid Transaction digest ${e}`)}),e.digests.length!==new Set(e.digests).size)throw Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:t,options:r,requestType:n,signal:i}){let o=await this.transport.request({method:"sui_executeTransactionBlock",params:["string"==typeof e?e:ix(e),Array.isArray(t)?t:[t],r],signal:i});if("WaitForLocalExecution"===n)try{await this.waitForTransaction({digest:o.digest})}catch{}return o}async signAndExecuteTransaction({transaction:e,signer:t,...r}){let n;e instanceof Uint8Array?n=e:(e.setSenderIfNotSet(t.toSuiAddress()),n=await e.build({client:this}));let{signature:i,bytes:o}=await t.signTransaction(n);return this.executeTransactionBlock({transactionBlock:o,signature:i,...r})}async getTotalTransactionBlocks({signal:e}={}){return BigInt(await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e}))}async getReferenceGasPrice({signal:e}={}){return BigInt(await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e}))}async getStakes(e){if(!e.owner||!sl(sf(e.owner)))throw Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(e=>{if(!e||!sl(sp(e)))throw Error(`Invalid Sui Stake id ${e}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents({query:e,cursor:t,limit:r,order:n,signal:i}){return e&&"MoveEventType"in e&&u2(e.MoveEventType)&&(e={...e,MoveEventType:(await this.core.mvr.resolveType({type:e.MoveEventType})).type}),e&&"MoveEventModule"in e&&so(e.MoveEventModule.package)&&(e={...e,MoveEventModule:{module:e.MoveEventModule.module,package:(await this.core.mvr.resolvePackage({package:e.MoveEventModule.package})).package}}),"MoveModule"in e&&so(e.MoveModule.package)&&(e={...e,MoveModule:{module:e.MoveModule.module,package:(await this.core.mvr.resolvePackage({package:e.MoveModule.package})).package}}),await this.transport.request({method:"suix_queryEvents",params:[e,t,r,"descending"===(n||"descending")],signal:i})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){let t;if(cI(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),t=ix(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if("string"==typeof e.transactionBlock)t=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)t=ix(e.transactionBlock);else throw Error("Unknown transaction block format.");return e.signal?.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,t,e.gasPrice?.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:["string"==typeof e.transactionBlock?e.transactionBlock:ix(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!sl(sp(e.parentId)))throw Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){return String(await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e}))}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e?.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e?.epoch],signal:e?.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e?.descendingOrder],signal:e?.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e?.cursor,e?.limit,e?.descendingOrder],signal:e?.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){return iT(iA((await this.getCheckpoint({id:"0",signal:e})).digest).slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...t}){let{nextCursor:r,hasNextPage:n,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[t.address,t.cursor,t.limit],signal:t.signal});return{hasNextPage:n,nextCursor:r,data:i.map(t=>(function(e,t="at"){let r;let n=e.toLowerCase();if(n.includes("@")){if(!sr.test(n))throw Error(`Invalid SuiNS name ${e}`);let[t,i]=n.split("@");r=[...t?t.split("."):[],i]}else{if(!sn.test(n))throw Error(`Invalid SuiNS name ${e}`);r=n.split(".").slice(0,-1)}return"dot"===t?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`})(t,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e?.version],signal:e?.signal})}async verifyZkLoginSignature(e){return await this.transport.request({method:"sui_verifyZkLoginSignature",params:[e.bytes,e.signature,e.intentScope,e.author],signal:e.signal})}async waitForTransaction({signal:e,timeout:t=6e4,pollInterval:r=2e3,...n}){let i=AbortSignal.timeout(t),o=new Promise((e,t)=>{i.addEventListener("abort",()=>t(i.reason))});for(o.catch(()=>{});!i.aborted;){e?.throwIfAborted();try{return await this.getTransactionBlock(n)}catch{await Promise.race([new Promise(e=>setTimeout(e,r)),o])}}throw i.throwIfAborted(),Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}}class cH extends i.bY{}let cG="Sui",cJ=e=>{let t=e.data?.content;return t&&"moveObject"===t.dataType?t.fields:null},cY=(e,t)=>{try{return ok(e)===ok(t)}catch{return!1}},cZ=e=>e?.type==="created",cX=e=>e?.type==="published";function cQ(e){return!Array.isArray(e)&&"object"==typeof e&&"fields"in e&&"type"in e}function c0(e){return"object"==typeof e&&!Array.isArray(e)&&!cQ(e)}function c1(e){return"object"==typeof e&&"id"in e}let c2=async(e,t)=>{let{data:r,error:n}=await e.getObject({id:t,options:{showContent:!0}});if(n)throw Error("Error getting object: "+n);if(!r||!cQ(r.content))throw Error(`Cannot get oject for state id ${t}: `+r);return oI(r.content.type)},c6=async(e,t)=>{if(!sl(t))throw Error(`Invalid object ID: ${t}`);return cJ(await e.getObject({id:t,options:{showContent:!0}}))},c8=async(e,t)=>{let r,n;do{let i=await e.getDynamicFields({parentId:t,cursor:n});r=i.data.find(e=>e.name.type.endsWith("CurrentPackage")),n=i.hasNextPage?i.nextCursor:null}while(n&&!r);if(!r)throw Error("CurrentPackage not found");let i=cJ(await e.getObject({id:r.objectId,options:{showContent:!0}}));if(!i||!c0(i))throw Error("Unable to get fields from object response");if(!("value"in i)||!cQ(i.value))throw Error("Unable to get package id");return i.value.fields.package},c3=async(e,t,r)=>{let n=null,i=null,o=null,a;do{if(!(o=await e.getOwnedObjects({owner:r,filter:{StructType:`${t}::emitter::EmitterCap`},options:{showContent:!0},cursor:a}))||!o.data)throw Error("Failed to get owned objects");for(let e of o.data){if(!e.data)continue;let{version:t,objectId:r}=e.data;(null===n||t<n)&&(n=t,i=r)}a=o.hasNextPage?o.nextCursor:void 0}while(a);return i},c5=async(e,t)=>{let r=new cM,[n]=r.publish({modules:e.modules.map(e=>Array.from(i.ar.decode(e))),dependencies:e.dependencies.map(e=>sp(e))});return r.transferObjects([n],r.pure.address(t)),r};class c4 extends i.bZ{static _platform=cG;constructor(e,t){super(e,t??(0,i.b_)(e,c4._platform))}getRpc(e){if(e in this.config)return new cF({url:this.config[e].rpc});throw Error("No configuration available for chain: "+e)}getChain(e){if(e in this.config)return new cH(e,this);throw Error("No configuration available for chain: "+e)}static nativeTokenId(e,t){if(!c4.isSupportedChain(t))throw Error(`invalid chain for ${cG}: ${t}`);return i.W.tokenId(t,oy)}static isNativeTokenId(e,t,r){return!!c4.isSupportedChain(t)&&r.chain===t&&this.nativeTokenId(e,t)===r}static isSupportedChain(e){return(0,i.d)(e)===c4._platform}static async getDecimals(e,t,r,n){if((0,i.i)(n))return(0,i.b$)(c4._platform);let o=new oA(n);try{let e=await c6(r,o.toString());if(e&&"decimals"in e)return e.decimals}catch{}let a=await r.getCoinMetadata({coinType:o.toString()});if(null===a)throw Error(`Can't fetch decimals for token ${o.toString()}`);return a.decimals}static async getCoins(e,t,r){let n=[],i=null,o=new oA(t).toString();do{let t=await e.getCoins({owner:o,coinType:r,cursor:i});n=[...n,...t.data],i=t.hasNextPage?t.nextCursor:null}while(i);return n}static async getBalance(e,t,r,n,o){if((0,i.i)(o)){let{totalBalance:e}=await r.getBalance({owner:n});return BigInt(e)}let{totalBalance:a}=await r.getBalance({owner:n,coinType:o.toString()});return BigInt(a)}static async getBalances(e,t,r,n){let i=await r.getAllBalances({owner:n}),o={};for(let{coinType:e,totalBalance:t}of i)o[e===oy?"native":e]=BigInt(t);return o}static async sendWait(e,t,r){let n=[];for(let e of r){let r=await t.executeTransactionBlock(e);await t.waitForTransaction({digest:r.digest}),n.push(r.digest)}return n}static async getLatestBlock(e){return Number(await e.getLatestCheckpointSequenceNumber())}static async getLatestFinalizedBlock(e){return this.getLatestBlock(e)}static chainFromChainId(e){let t=(0,i.c0)(c4._platform,e);if(void 0===t)throw Error(`Unknown native chain id ${e}`);let[r,n]=t;return[r,n]}static async chainFromRpc(e){let t=await e.call("sui_getChainIdentifier",[]);return this.chainFromChainId(t)}}let c7=new tm("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),c9=new tm("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),le=new tm("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new tm("So11111111111111111111111111111111111111112"),new tm("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");class lt extends i.bY{async getTokenAccount(e,t){let{getAssociatedTokenAddress:n}=await r.e(2265).then(r.bind(r,82265)),i=new iI(t).unwrap(),o=new iI(e).unwrap(),a=await this.getRpc(),u=await lr.getTokenProgramId(a,i),c=await n(i,o,!1,u);return{chain:this.chain,address:new iI(c.toString())}}async isToken2022(e){if((0,i.i)(e))return!1;let t=new iI(e).unwrap(),r=await this.getRpc();return(await lr.getTokenProgramId(r,t)).equals(c9)}}class lr extends i.bZ{static _platform=iS;constructor(e,t){super(e,t??(0,i.b_)(e,lr._platform))}getRpc(e,t={commitment:"confirmed",disableRetryOnRateLimit:!0}){if(e in this.config)return new nq(this.config[e].rpc,t);throw Error("No configuration available for chain: "+e)}getChain(e,t){if(e in this.config)return new lt(e,this,t);throw Error("No configuration available for chain: "+e)}static nativeTokenId(e,t){if(!lr.isSupportedChain(t))throw Error(`invalid chain: ${t}`);return i.W.chainAddress(t,"11111111111111111111111111111111")}static isNativeTokenId(e,t,r){return!!this.isSupportedChain(t)&&r.chain===t&&this.nativeTokenId(e,t)==r}static isSupportedChain(e){return(0,i.d)(e)===lr._platform}static async getDecimals(e,t,r,n){if((0,i.i)(n))return(0,i.b$)(lr._platform);let o=await r.getParsedAccountInfo(new iI(n).unwrap());if(!o||!o.value)throw Error("could not fetch token details");let{decimals:a}=o.value.data.parsed.info;return a}static async getBalance(e,t,r,n,o){let a=new tm(n);if((0,i.i)(o))return BigInt(await r.getBalance(a));let u=await r.getTokenAccountsByOwner(a,{mint:new iI(o).unwrap()}),c=u.value.length>0?u.value[0].pubkey:a;return BigInt((await r.getTokenAccountBalance(c)).value.amount)}static async getBalances(e,t,r,n){let i=BigInt(await r.getBalance(new tm(n))),o=(await Promise.all([c7,c9].map(e=>new tm(e)).map(e=>r.getParsedTokenAccountsByOwner(new tm(n),{programId:e})))).reduce((e,t)=>e.concat(t.value),[]),a={native:i};return o.forEach(e=>{let t=e.account.data.parsed?.info?.mint,r=e.account.data.parsed?.info?.tokenAmount?.amount;t&&r&&(a[t]=BigInt(r))}),a}static async sendWait(e,t,r,n){let i=await Promise.all(r.map(e=>this.sendTxWithRetry(t,e,n))),o=i.map(e=>e.signature),a=i.filter(e=>e.response.value.err).map(e=>e.response.value.err);if(a.length>0)throw Error(`Failed to confirm transaction: ${a}`);return o}static async sendTxWithRetry(e,t,r={},n=5e3){let i=r.preflightCommitment??e.commitment,o=await e.sendRawTransaction(t,{...r,skipPreflight:!1,maxRetries:0,preflightCommitment:i}),{blockhash:a,lastValidBlockHeight:u}=await e.getLatestBlockhash(),c=e.confirmTransaction({signature:o,blockhash:a,lastValidBlockHeight:u},i),l=null;for(;!l&&!(l=await Promise.race([c,new Promise(e=>setTimeout(()=>{e(null)},n))]));)await e.sendRawTransaction(t,{...r,skipPreflight:!0,maxRetries:0,preflightCommitment:i});return{signature:o,response:l}}static async latestBlock(e,t){return e.getLatestBlockhash(t??e.commitment)}static async getLatestBlock(e){return await e.getSlot()}static async getLatestFinalizedBlock(e){let{lastValidBlockHeight:t}=await this.latestBlock(e,"finalized");return t}static chainFromChainId(e){let t=(0,i.c0)(lr._platform,e);if(!t)throw Error(`No matching genesis hash to determine network and chain: ${e}`);let[r,n]=t;return[r,n]}static async chainFromRpc(e){try{let t=await e.getGenesisHash();return lr.chainFromChainId(t)}catch(t){if(e.rpcEndpoint.includes("http://127")||e.rpcEndpoint.includes("http://localhost")||"http://solana-devnet:8899"===e.rpcEndpoint)return["Devnet","Solana"];throw t}}static async getTokenProgramId(e,t){let r=await e.getAccountInfo(t);if(!r)throw Error(`Mint account not found: ${t.toBase58()}`);let n=r.owner;if(!n)throw Error(`Mint account has no owner: ${t.toBase58()}`);if(n.equals(c7)||n.equals(c9))return n;throw Error(`Mint account has unsupported token program: ${t.toBase58()} (${n.toBase58()})`)}}class ln{transaction;network;chain;description;parallelizable;constructor(e,t,r,n,i=!1){this.transaction=e,this.network=t,this.chain=r,this.description=n,this.parallelizable=i}}function li(e){return void 0!==e.signatures&&void 0!==e.message}}}]);